<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>3.12. byte 类型</title><link rel="stylesheet" type="text/css" href="../../docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="home" href="../../index.html" title="Netkiller Java 手札（版）" /><link rel="up" href="index.html" title="第 3 章 数据类型" /><link rel="prev" href="enum.html" title="3.11. enum" /><link rel="next" href="java.boolean.html" title="3.13. 布尔型 Boolean" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> | <a xmlns="" href="//netkiller.github.io/">简体中文</a> | <a xmlns="" href="http://netkiller.sourceforge.net/">繁体中文</a> | <a xmlns="" href="/journal/index.html">杂文</a>
		| <a xmlns="" href="https://github.com/netkiller">Github</a> | <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> | <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> | <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> | <a xmlns="" href="https://www.youtube.com/user/bg7nyt/videos">Youtube</a> | <a xmlns="" href="//www.netkiller.cn/home/donations.html">打赏(Donations)</a> | <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.12. byte 类型</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="enum.html">上一页</a> </td><th width="60%" align="center">第 3 章 数据类型</th><td width="20%" align="right"> <a accesskey="n" href="java.boolean.html">下一页</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td><td></td><td><a href="https://zhuanlan.zhihu.com/netkiller"><img src="/images/logo/zhihu-card-default.svg" height="25" /></a></td><td valign="middle"><a href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a></td><td></td><td></td><td></td><td></td></tr></table><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="byte"></a>3.12. byte 类型</h2></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id805"></a>3.12.1. string2byte</h3></div></div></div>
			
			<pre class="programlisting">
			
	byte[] bytes = "Helloworld!!! - http://www.netkiller.cn".getBytes();		
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="byte2string"></a>3.12.2. byte[] to String</h3></div></div></div>
			
			<pre class="programlisting">
			
	byte[] bytes = "Helloworld!!! - http://www.netkiller.cn".getBytes();
	String str = new String(bytes, StandardCharsets.UTF_8);
	System.out.println(str);
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="BigInteger2byte"></a>3.12.3. BigInteger2byte</h3></div></div></div>
			
			<pre class="programlisting">
			
BigInteger b= new BigInteger('300');
byte bytes= b.byteValue();			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="int2byte"></a>3.12.4. int to byte array</h3></div></div></div>
			
			<p></p>
			<pre class="programlisting">
			
int a= 120;
byte b= (byte)a;			
			
			</pre>
			<pre class="programlisting">
			
private byte[] bigIntToByteArray( final int i ) {
    BigInteger bigInt = BigInteger.valueOf(i);      
    return bigInt.toByteArray();
}			
			
			</pre>
			<pre class="programlisting">
			
private byte[] intToByteArray ( final int i ) throws IOException {      
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    DataOutputStream dos = new DataOutputStream(bos);
    dos.writeInt(i);
    dos.flush();
    return bos.toByteArray();
}			
			
			</pre>
			<pre class="programlisting">
			
private byte[] intToBytes( final int i ) {
    ByteBuffer bb = ByteBuffer.allocate(4); 
    bb.putInt(i); 
    return bb.array();
}						
			
			</pre>
			<p>位移操作</p>
			<pre class="programlisting">
			
private static byte[] intToBytes(final int a) {
    return new byte[] {
        (byte)((data &gt;&gt; 24) &amp; 0xff),
        (byte)((data &gt;&gt; 16) &amp; 0xff),
        (byte)((data &gt;&gt; 8) &amp; 0xff),
        (byte)((data &gt;&gt; 0) &amp; 0xff),
    };
}			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="byte2int"></a>3.12.5. byte array to int</h3></div></div></div>
			
			<pre class="programlisting">
			
private int convertByteArrayToInt(byte[] intBytes){
    ByteBuffer byteBuffer = ByteBuffer.wrap(intBytes);
    return byteBuffer.getInt();
}			
			
			</pre>
			<pre class="programlisting">
			
private int convertByteArrayToInt(byte[] data) {
    if (data == null || data.length != 4) return 0x0;
    // ----------
    return (int)( // NOTE: type cast not necessary for int
            (0xff &amp; data[0]) &lt;&lt; 24  |
            (0xff &amp; data[1]) &lt;&lt; 16  |
            (0xff &amp; data[2]) &lt;&lt; 8   |
            (0xff &amp; data[3]) &lt;&lt; 0
            );
}			
			
			</pre>
			<p></p>
			<pre class="programlisting">
			
	public static byte[] intToByte32(int num) {
        byte[] arr = new byte[32];
        for (int i = 31; i &gt;= 0; i--) {
            // &amp;1 也可以改为num&amp;0x01,表示取最地位数字.
            arr[i] = (byte) (num &amp; 1);
            // 右移一位.
            num &gt;&gt;= 1;
        }
        return arr;
    }

			
	public static int byte32ToInt(byte[] arr) {
        if (arr == null || arr.length != 32) {
            throw new IllegalArgumentException("byte数组必须不为空,并且长度是32!");
        }
        int sum = 0;
        for (int i = 0; i &lt; 32; ++i) {
            sum |= (arr[i] &lt;&lt; (31 - i));
        }
        return sum;
    }			
			
			</pre>
			<p>int array to byte array</p>
			<pre class="programlisting">
			
private byte[] convertIntArrayToByteArray(int[] data) {
        if (data == null) return null;
        // ----------
        byte[] byts = new byte[data.length * 4];
        for (int i = 0; i &lt; data.length; i++)
            System.arraycopy(convertIntToByteArray(data[i]), 0, byts, i * 4, 4);
        return byts;
    }			
			
			</pre>
			<p>byte array to int array</p>
			<pre class="programlisting">
			
public int[] convertByteArrayToIntArray(byte[] data) {
        if (data == null || data.length % 4 != 0) return null;
        // ----------
        int[] ints = new int[data.length / 4];
        for (int i = 0; i &lt; ints.length; i++)
            ints[i] = ( convertByteArrayToInt(new byte[] {
                    data[(i*4)],
                    data[(i*4)+1],
                    data[(i*4)+2],
                    data[(i*4)+3],
            } ));
        return ints;
    }			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="byte2char"></a>3.12.6. byte2char</h3></div></div></div>
			
			<pre class="programlisting">
			
	byte b1 = 65;
    // char ch = b1;  
          
    char ch = (char) b1;
 
    System.out.println("byte value: " + b1);             // prints 65
    System.out.println("Converted char value: " + ch);   // prints A (ASCII is 65 for A)			
			
			</pre>
			<p></p>
			<pre class="programlisting">
			
	public static char byte2ToChar(byte[] arr) {
        if (arr == null || arr.length != 2) {
            throw new IllegalArgumentException("byte数组必须不为空,并且是2位!");
        }
        return (char) (((char) (arr[0] &lt;&lt; 8)) | ((char) arr[1]));
    }			
    
    public static byte[] charToByte2(char c) {
        byte[] arr = new byte[2];
        arr[0] = (byte) (c &gt;&gt; 8);
        arr[1] = (byte) (c &amp; 0xff);
        return arr;
    }
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="longToByte64"></a>3.12.7. longToByte64</h3></div></div></div>
			
			<pre class="programlisting">
			
    public static byte[] longToByte64(long sum) {
        byte[] arr = new byte[64];
        for (int i = 63; i &gt;= 0; i--) {
            arr[i] = (byte) (sum &amp; 1);
            sum &gt;&gt;= 1;
        }
        return arr;
    }			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="byte64ToLong"></a>3.12.8. byte64ToLong</h3></div></div></div>
			
			<pre class="programlisting">
			
	public static long byte8ToLong(byte[] arr) {
        if (arr == null || arr.length != 8) {
            throw new IllegalArgumentException("byte数组必须不为空,并且是8位!");
        }
        return (long) (((long) (arr[0] &amp; 0xff) &lt;&lt; 56) | ((long) (arr[1] &amp; 0xff) &lt;&lt; 48) | ((long) (arr[2] &amp; 0xff) &lt;&lt; 40)
                        | ((long) (arr[3] &amp; 0xff) &lt;&lt; 32) | ((long) (arr[4] &amp; 0xff) &lt;&lt; 24)
                        | ((long) (arr[5] &amp; 0xff) &lt;&lt; 16) | ((long) (arr[6] &amp; 0xff) &lt;&lt; 8) | ((long) (arr[7] &amp; 0xff)));
    }
    			
	public static byte[] longToByte8(long sum) {
        byte[] arr = new byte[8];
        arr[0] = (byte) (sum &gt;&gt; 56);
        arr[1] = (byte) (sum &gt;&gt; 48);
        arr[2] = (byte) (sum &gt;&gt; 40);
        arr[3] = (byte) (sum &gt;&gt; 32);
        arr[4] = (byte) (sum &gt;&gt; 24);
        arr[5] = (byte) (sum &gt;&gt; 16);
        arr[6] = (byte) (sum &gt;&gt; 8);
        arr[7] = (byte) (sum &amp; 0xff);
        return arr;
    }
    			
	public static long byte64ToLong(byte[] arr) {
        if (arr == null || arr.length != 64) {
            throw new IllegalArgumentException("byte数组必须不为空,并且长度是64!");
        }
        long sum = 0L;
        for (int i = 0; i &lt; 64; ++i) {
            sum |= ((long) arr[i] &lt;&lt; (63 - i));
        }
        return sum;
    }			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="short2byte"></a>3.12.9. short2byte</h3></div></div></div>
			
			<pre class="programlisting">
			
    public static byte[] shortToByte16(short s) {
        byte[] arr = new byte[16];
        for (int i = 15; i &gt;= 0; i--) {
            arr[i] = (byte) (s &amp; 1);
            s &gt;&gt;= 1;
        }
        return arr;
    }

    public static short byte16ToShort(byte[] arr) {
        if (arr == null || arr.length != 16) {
            throw new IllegalArgumentException("byte数组必须不为空,并且长度为16!");
        }
        short sum = 0;
        for (int i = 0; i &lt; 16; ++i) {
            sum |= (arr[i] &lt;&lt; (15 - i));
        }
        return sum;
    }			
    
    public static short byte2ToShort(byte[] arr) {
        if (arr != null &amp;&amp; arr.length != 2) {
            throw new IllegalArgumentException("byte数组必须不为空,并且是2位!");
        }
        return (short) (((short) arr[0] &lt;&lt; 8) | ((short) arr[1] &amp; 0xff));
    }
    
    public static byte[] shortToByte2(Short s) {
        byte[] arr = new byte[2];
        arr[0] = (byte) (s &gt;&gt; 8);
        arr[1] = (byte) (s &amp; 0xff);
        return arr;
    }
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="byte8ToDouble"></a>3.12.10. byte8ToDouble</h3></div></div></div>
			
			<pre class="programlisting">
			
	public static double byte8ToDouble(byte[] arr) {
        if (arr == null || arr.length != 8) {
            throw new IllegalArgumentException("byte数组必须不为空,并且是8位!");
        }
        long l = byte8ToLong(arr);
        return Double.longBitsToDouble(l);
    }

    public static byte[] doubleToByte8(double i) {
        long j = Double.doubleToLongBits(i);
        return longToByte8(j);
    }			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="byte4ToFloat"></a>3.12.11. byte4ToFloat</h3></div></div></div>
			
			<pre class="programlisting">
			
    public static float byte4ToFloat(byte[] arr) {
        if (arr == null || arr.length != 4) {
            throw new IllegalArgumentException("byte数组必须不为空,并且是4位!");
        }
        int i = byte4ToInt(arr);
        return Float.intBitsToFloat(i);
    }

    public static byte[] floatToByte4(float f) {
        int i = Float.floatToIntBits(f);
        return intToByte4(i);
    }			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="unsigned-byte"></a>3.12.12. 无符号 byte</h3></div></div></div>
			
			<pre class="programlisting">
			
byte b= -120;
int a= bytes &amp; 0xff;
			
			</pre>
			<p></p>
			<pre class="programlisting">
			
byte a = (byte)234;
System.out.println(a);

上面的代码，结果是-22，因为java中byte是有符号的，byte范围是-128~127。

如果想输出234，该怎么做呢，首先想到的是将a 赋给大一点的类型，如下：

byte a = (byte)234;
int i = a&amp;0xff;
System.out.println(i);

原因是 0xff是int，占4个字节，a是byte，占1个字节，进行&amp;操作的细节如下：

   00000000 00000000 00000000 11101010    (a)
&amp;
   00000000 00000000 00000000 11111111    (0xff)
---------------------------------------------------------------------
=  00000000 00000000 00000000 11101010

结果是int，但是符号位是0，说明是正数，最后就是正整数234.	
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="byte2hex"></a>3.12.13. byte to hex</h3></div></div></div>
			
			<pre class="programlisting">
			
byte bv = 10;
String hexString = Integer.toHexString(bv);			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="bytes2hex"></a>3.12.14. byte[] to hex</h3></div></div></div>
			
			<pre class="programlisting">
			
byte bytes[] = {(byte)0, (byte)0, (byte)134, (byte)0, (byte)61};
System.out.println(javax.xml.bind.DatatypeConverter.printHexBinary(bytes));			
			
			</pre>
			<p></p>
			<pre class="programlisting">
			
public static String byteArrayToHex(byte[] bytes) {
   StringBuilder sb = new StringBuilder(a.length * 2);
   for(byte b: bytes)
      sb.append(String.format("%02x", b));
   return sb.toString();
}
			
			</pre>
			<pre class="programlisting">
			
BigInteger n = new BigInteger(byteArray);
String hexa = n.toString(16));			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="byte[]"></a>3.12.15. 连接两个 byte[]</h3></div></div></div>
			
			<pre class="programlisting">
			
byte[] one = { 1, 2, 3 };
byte[] two = { 6, 8, 9 };
int length = one.Length + two.Length;
byte[] sum = new byte[length];
one.CopyTo(sum,0);
two.CopyTo(sum,one.Length);			
			
			</pre>
			<pre class="programlisting">
			
byte[] one = { 1, 2, 3 };
byte[] two = { 6, 8, 9 };
List&lt;byte&gt; list1 = new List&lt;byte&gt;(one);
List&lt;byte&gt; list2 = new List&lt;byte&gt;(two);
list1.AddRange(list2);
byte[] sum2 = list1.ToArray();			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="list.byte"></a>3.12.16. List&lt;Byte&gt; to byte[]</h3></div></div></div>
			
			<pre class="programlisting">
			
		List&lt;Byte&gt; byteList = new ArrayList&lt;Byte&gt;();
        byteList.add((byte) 1);
        byteList.add((byte) 2);
        byteList.add((byte) 3);
        byte[] byteArray = Bytes.toArray(byteList);
        System.out.println(Arrays.toString(byteArray));			
			
			</pre>
		</div>
	</div><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="enum.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="index.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="java.boolean.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">3.11. enum </td><td width="20%" align="center"><a accesskey="h" href="../../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 3.13. 布尔型 Boolean</td></tr></table></div><script xmlns="">
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-11694057-1', 'auto');
			ga('send', 'pageview');

		</script><script xmlns="" async="async">
			var _hmt = _hmt || [];
			(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
			})();
</script><script xmlns="" async="async">
			(function(){
			var bp = document.createElement('script');
			var curProtocol = window.location.protocol.split(':')[0];
			if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			}
			else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			}
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(bp, s);
			})();
</script></body></html>