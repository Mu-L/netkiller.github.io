<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>部分 II. Spring Boot</title><link rel="stylesheet" type="text/css" href="../docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="home" href="../index.html" title="Netkiller Java 手札（版）" /><link rel="up" href="../index.html" title="Netkiller Java 手札（版）" /><link rel="prev" href="../java/security/index.html" title="8.9. java.security" /><link rel="next" href="suite/index.html" title="第 9 章 Spring 开发环境" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> | <a xmlns="" href="//netkiller.github.io/">简体中文</a> | <a xmlns="" href="http://netkiller.sourceforge.net/">繁体中文</a> | <a xmlns="" href="/journal/index.html">杂文</a>
		| <a xmlns="" href="https://github.com/netkiller">Github</a> | <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> | <a xmlns="" href="https://edu.51cto.com/lecturer/1703915.html">51CTO学院</a> | <a xmlns="" href="https://edu.csdn.net/lecturer/6423">CSDN程序员研修院</a> | <a xmlns="" href="http://my.oschina.net/neochen/">OSChina 博客</a> | <a xmlns="" href="https://cloud.tencent.com/developer/column/2078">腾讯云社区</a> | <a xmlns="" href="https://yq.aliyun.com/u/netkiller/">阿里云栖社区</a> | <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> | <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> | <a xmlns="" href="https://www.youtube.com/user/bg7nyt/videos">Youtube</a> | <a xmlns="" href="//www.netkiller.cn/home/donations.html">打赏(Donations)</a> | <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">部分 II. Spring Boot</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../java/security/index.html">上一页</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="suite/index.html">下一页</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td><td></td><td><a href="https://zhuanlan.zhihu.com/netkiller"><img src="/images/logo/zhihu-card-default.svg" height="25" /></a></td><td valign="middle"><a href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a></td><td></td><td></td><td></td><td></td></tr></table><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="index"></a>部分 II. Spring Boot</h1></div></div></div><div class="toc"><p><strong>目录</strong></p><dl class="toc"><dt><span class="chapter"><a href="suite/index.html">9. Spring 开发环境</a></span></dt><dd><dl><dt><span class="section"><a href="suite/index.html#idm49383069152">9.1. Java 开发环境</a></span></dt><dt><span class="section"><a href="suite/install.html">9.2. 安装 Spring Tool Suite</a></span></dt><dt><span class="section"><a href="suite/dashboard.html">9.3. Dashboard</a></span></dt><dt><span class="section"><a href="suite/start.spring.io.html">9.4. Spring Initializr - Bootstrap your application</a></span></dt></dl></dd><dt><span class="chapter"><a href="spring.boot.quickstart.html">10. Spring Boot Quick start</a></span></dt><dd><dl><dt><span class="section"><a href="spring.boot.quickstart.html#idm49390077184">10.1. 创建项目</a></span></dt><dt><span class="section"><a href="pom.html">10.2. pom.xml</a></span></dt><dt><span class="section"><a href="controller.html">10.3. Controller</a></span></dt><dt><span class="section"><a href="spring-boot-maven-plugin.html">10.4. Springboot with Maven</a></span></dt><dd><dl><dt><span class="section"><a href="spring-boot-maven-plugin.html#idm49390068096">10.4.1. resource</a></span></dt><dt><span class="section"><a href="spring-boot-maven-plugin.html#idm49384280192">10.4.2. Maven run</a></span></dt><dt><span class="section"><a href="spring-boot-maven-plugin.html#idm49384277280">10.4.3. Spring Boot maven 插件 build-image</a></span></dt><dt><span class="section"><a href="spring-boot-maven-plugin.html#idm49384276928">10.4.4. 生成项目信息</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="SpringApplication.html">11. SpringApplication</a></span></dt><dd><dl><dt><span class="section"><a href="SpringApplication.html#spring.run">11.1. 运行 Spring boot 项目</a></span></dt><dd><dl><dt><span class="section"><a href="SpringApplication.html#idm49384266400">11.1.1. Linux systemd</a></span></dt><dt><span class="section"><a href="SpringApplication.html#idm49384264096">11.1.2. 传统 init.d 脚本</a></span></dt><dt><span class="section"><a href="SpringApplication.html#war">11.1.3. 编译用于Tomcat的 War</a></span></dt></dl></dd><dt><span class="section"><a href="SpringBootApplication.html">11.2. @SpringBootApplication</a></span></dt><dd><dl><dt><span class="section"><a href="SpringBootApplication.html#idm49384259344">11.2.1. 排除 @EnableAutoConfiguration 加载项</a></span></dt></dl></dd><dt><span class="section"><a href="获取Resources中的文件.html">11.3. 获取 Resources 目录中的静态文件</a></span></dt><dt><span class="section"><a href="EnableAutoConfiguration.html">11.4. @EnableAutoConfiguration</a></span></dt><dt><span class="section"><a href="@ComponentScan.html">11.5. @ComponentScan</a></span></dt><dt><span class="section"><a href="@EntityScan.html">11.6. @EntityScan 实体扫描</a></span></dt><dt><span class="section"><a href="@EnableJpaRepositories.html">11.7. @EnableJpaRepositories</a></span></dt><dt><span class="section"><a href="启动和销毁.html">11.8. 启动和销毁</a></span></dt><dt><span class="section"><a href="打印环境变量.html">11.9. 打印环境变量</a></span></dt><dt><span class="section"><a href="CharacterEncodingFilter.html">11.10. CharacterEncodingFilter</a></span></dt><dt><span class="section"><a href="banner.html">11.11. 隐藏 Banner</a></span></dt><dt><span class="section"><a href="scan.html">11.12. 实体与仓库扫描</a></span></dt><dt><span class="section"><a href="beans.html">11.13. 列出 Beans</a></span></dt><dt><span class="section"><a href="spring.boot.ports.html">11.14. Tomcat 端口</a></span></dt><dt><span class="section"><a href="启动配置项.html">11.15. 配置项设定</a></span></dt><dt><span class="section"><a href="spring.profiles.active.html">11.16. spring.profiles.active</a></span></dt><dt><span class="section"><a href="ch11s17.html">11.17. @Profile("dev") / @ActiveProfiles("dev")</a></span></dt><dt><span class="section"><a href="spring.boot.timezone.html">11.18. 设置默认时区</a></span></dt></dl></dd><dt><span class="chapter"><a href="spring.boot.shutdown.html">12. 如何优雅停止 Springboot 运行</a></span></dt><dd><dl><dt><span class="section"><a href="spring.boot.shutdown.html#idm49385093632">12.1. 准备工作</a></span></dt><dt><span class="section"><a href="ch12s02.html">12.2. kill 命令演示</a></span></dt><dt><span class="section"><a href="ch12s03.html">12.3. 容器中如何优雅关闭 Springboot</a></span></dt><dt><span class="section"><a href="ch12s04.html">12.4. 写入PID文件</a></span></dt></dl></dd><dt><span class="chapter"><a href="springboot.properties.html">13. Properties 配置文件</a></span></dt><dd><dl><dt><span class="section"><a href="springboot.properties.html#application.properties">13.1. application.properties 配置文件</a></span></dt><dd><dl><dt><span class="section"><a href="springboot.properties.html#faq.application.properties">13.1.1. application.properties 参考</a></span></dt><dt><span class="section"><a href="springboot.properties.html#spring.config.location">13.1.2. 启动指定参数</a></span></dt><dt><span class="section"><a href="springboot.properties.html#spring.autoconfigure.exclude">13.1.3. 加载排除</a></span></dt><dt><span class="section"><a href="springboot.properties.html#spring.pid">13.1.4. PID FILE</a></span></dt><dt><span class="section"><a href="springboot.properties.html#spring.main.banner-mode">13.1.5. banner 关闭</a></span></dt><dt><span class="section"><a href="springboot.properties.html#server">13.1.6. server</a></span></dt><dt><span class="section"><a href="springboot.properties.html#logging">13.1.7. logging</a></span></dt><dt><span class="section"><a href="springboot.properties.html#server.tomcat">13.1.8. 内嵌 tomcat server</a></span></dt><dt><span class="section"><a href="springboot.properties.html#spring.servlet">13.1.9. servlet</a></span></dt><dt><span class="section"><a href="springboot.properties.html#spring.jackson">13.1.10. JSON 输出与日期格式化</a></span></dt><dt><span class="section"><a href="springboot.properties.html#mail">13.1.11. SMTP 相关配置</a></span></dt><dt><span class="section"><a href="springboot.properties.html#redis">13.1.12. Redis</a></span></dt><dt><span class="section"><a href="springboot.properties.html#mongodb">13.1.13. MongoDB</a></span></dt><dt><span class="section"><a href="springboot.properties.html#mysql">13.1.14. MySQL</a></span></dt><dt><span class="section"><a href="springboot.properties.html#oracle">13.1.15. Oracle</a></span></dt><dt><span class="section"><a href="springboot.properties.html#default_schema">13.1.16. default_schema</a></span></dt><dt><span class="section"><a href="springboot.properties.html#datasource">13.1.17. datasource</a></span></dt><dt><span class="section"><a href="springboot.properties.html#velocity">13.1.18. velocity</a></span></dt><dt><span class="section"><a href="springboot.properties.html#security">13.1.19. Security 相关配置</a></span></dt><dt><span class="section"><a href="springboot.properties.html#mvc">13.1.20. MVC 配置</a></span></dt><dt><span class="section"><a href="springboot.properties.html#kafka">13.1.21. Kafka 相关配置</a></span></dt></dl></dd><dt><span class="section"><a href="properties.html">13.2. Properties 文件</a></span></dt><dd><dl><dt><span class="section"><a href="properties.html#idm49384985072">13.2.1. 禁用命令行注入环境变量</a></span></dt><dt><span class="section"><a href="properties.html#idm49384983920">13.2.2. @Value 注解</a></span></dt><dt><span class="section"><a href="properties.html#ConfigurationProperties">13.2.3. @EnableConfigurationProperties 引用自定义 *.properties 配置文件</a></span></dt><dt><span class="section"><a href="properties.html#idm49384981296">13.2.4. 手工载入 *.properties 文件</a></span></dt><dt><span class="section"><a href="properties.html#spring.profiles.active">13.2.5. spring.profiles.active 参数切换配置文件</a></span></dt><dt><span class="section"><a href="properties.html#idm49384967552">13.2.6. SpringApplicationBuilder.properties() 方法添加配置项</a></span></dt></dl></dd><dt><span class="section"><a href="ch13s03.html">13.3. 参数引用</a></span></dt><dt><span class="section"><a href="ch13s04.html">13.4. 默认值</a></span></dt><dt><span class="section"><a href="ch13s05.html">13.5. 产生随机数</a></span></dt><dd><dl><dt><span class="section"><a href="ch13s05.html#idm49384959792">13.5.1. 随机数</a></span></dt></dl></dd><dt><span class="section"><a href="ch13s06.html">13.6. 多行字符串</a></span></dt><dt><span class="section"><a href="ch13s07.html">13.7. 注入多值属性 arrays, list, set</a></span></dt><dt><span class="section"><a href="ch13s08.html">13.8. containsProperty 读取配置文件</a></span></dt><dt><span class="section"><a href="ch13s09.html">13.9. @PropertySource 注解载入 properties 文件</a></span></dt><dt><span class="section"><a href="ch13s10.html">13.10. List 列表类型</a></span></dt><dt><span class="section"><a href="ch13s11.html">13.11. Map类型</a></span></dt><dt><span class="section"><a href="ch13s12.html">13.12. Binder</a></span></dt><dt><span class="section"><a href="jasypt-spring-boot-starter.html">13.13. 加密 application.properties 中的敏感内容</a></span></dt></dl></dd><dt><span class="chapter"><a href="spring.boot.logging.html">14. Spring boot with Logging</a></span></dt><dd><dl><dt><span class="section"><a href="spring.boot.logging.html#application.properties.logging">14.1. 配置日志文件</a></span></dt><dd><dl><dt><span class="section"><a href="spring.boot.logging.html#idm49384912400">14.1.1. 日志输出级别</a></span></dt><dt><span class="section"><a href="spring.boot.logging.html#idm49384912144">14.1.2. Spring boot 2.1 以后的版本不打印 Mapped 日志问题</a></span></dt><dt><span class="section"><a href="spring.boot.logging.html#idm49384905904">14.1.3. 禁止控制台输出日志</a></span></dt><dt><span class="section"><a href="spring.boot.logging.html#idm49384901872">14.1.4. 定制日志格式</a></span></dt><dt><span class="section"><a href="spring.boot.logging.html#idm49384896656">14.1.5. 彩色输出</a></span></dt></dl></dd><dt><span class="section"><a href="lombok.logging.html">14.2. 打印日志</a></span></dt><dd><dl><dt><span class="section"><a href="lombok.logging.html#idm49384892144">14.2.1. lombok</a></span></dt></dl></dd><dt><span class="section"><a href="springboot.logback.html">14.3. logback 配置详解</a></span></dt><dd><dl><dt><span class="section"><a href="springboot.logback.html#logback.stdout">14.3.1. 标准输出</a></span></dt><dt><span class="section"><a href="springboot.logback.html#idm49384885632">14.3.2. 禁止 logback 日志输出</a></span></dt><dt><span class="section"><a href="springboot.logback.html#logback.level">14.3.3. 指定Class过滤日志</a></span></dt><dt><span class="section"><a href="springboot.logback.html#logback.attr">14.3.4. configuration 属性配置</a></span></dt><dt><span class="section"><a href="springboot.logback.html#logback.contextName">14.3.5. contextName 设置上下文名称</a></span></dt><dt><span class="section"><a href="springboot.logback.html#logback.property">14.3.6. property 设置变量</a></span></dt><dt><span class="section"><a href="springboot.logback.html#logback.encoder">14.3.7. encoder 日志格式设置</a></span></dt><dt><span class="section"><a href="springboot.logback.html#RollingFileAppender">14.3.8. RollingFileAppender</a></span></dt><dt><span class="section"><a href="springboot.logback.html#idm49384869936">14.3.9. 日志过滤</a></span></dt><dt><span class="section"><a href="springboot.logback.html#logback.file">14.3.10. 标准输出</a></span></dt><dt><span class="section"><a href="springboot.logback.html#idm49384862528">14.3.11. MDC</a></span></dt><dt><span class="section"><a href="springboot.logback.html#logback.mongodb">14.3.12. 日志写入 MongoDB</a></span></dt><dt><span class="section"><a href="springboot.logback.html#logback.logstash">14.3.13. 日志发送给 logstash</a></span></dt><dt><span class="section"><a href="springboot.logback.html#springboot.fluentd">14.3.14. fluentd</a></span></dt><dt><span class="section"><a href="springboot.logback.html#Loki4j">14.3.15. Loki4j Logback</a></span></dt></dl></dd><dt><span class="section"><a href="log4j2-gelf-logstash.html">14.4. Log4j2 + Gelf + Logstash</a></span></dt><dd><dl><dt><span class="section"><a href="log4j2-gelf-logstash.html#idm49384845024">14.4.1. Maven 配置</a></span></dt><dt><span class="section"><a href="log4j2-gelf-logstash.html#idm49384843792">14.4.2. log4j2.xml 配置</a></span></dt><dt><span class="section"><a href="log4j2-gelf-logstash.html#idm49384250832">14.4.3. Java 测试代码</a></span></dt><dt><span class="section"><a href="log4j2-gelf-logstash.html#idm49384248720">14.4.4. Logstash 配置</a></span></dt><dt><span class="section"><a href="log4j2-gelf-logstash.html#idm49384246832">14.4.5. 测试结果</a></span></dt><dt><span class="section"><a href="log4j2-gelf-logstash.html#idm49384245680">14.4.6. Log4j2 更多技巧</a></span></dt></dl></dd><dt><span class="section"><a href="logging.dingtalk.html">14.5. 日志报警</a></span></dt><dd><dl><dt><span class="section"><a href="logging.dingtalk.html#idm49384229792">14.5.1. Logstash 配置</a></span></dt><dt><span class="section"><a href="logging.dingtalk.html#idm49384227136">14.5.2. 监控 SpringBootApplication 的启动和退出</a></span></dt></dl></dd><dt><span class="section"><a href="SpringBoot.ELK.html">14.6. Spring boot with ELK(Elasticsearch + Logstash + Kibana)</a></span></dt><dd><dl><dt><span class="section"><a href="SpringBoot.ELK.html#idm49384218880">14.6.1. TCP 方案</a></span></dt><dt><span class="section"><a href="SpringBoot.ELK.html#idm49384216208">14.6.2. Redis 方案</a></span></dt><dt><span class="section"><a href="SpringBoot.ELK.html#idm49384209840">14.6.3. Kafka 方案</a></span></dt><dt><span class="section"><a href="SpringBoot.ELK.html#idm49384208688">14.6.4. Other</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="Undertow.html">15. Spring boot with Undertow</a></span></dt><dd><dl><dt><span class="section"><a href="Undertow.html#idm49384205888">15.1. Maven 依赖</a></span></dt><dt><span class="section"><a href="ch15s02.html">15.2. Application</a></span></dt><dt><span class="section"><a href="ch15s03.html">15.3. 相关配置</a></span></dt></dl></dd><dt><span class="chapter"><a href="jetty.html">16. Spring boot with Jetty</a></span></dt><dt><span class="chapter"><a href="https.html">17. Spring boot with HTTP2 SSL</a></span></dt><dd><dl><dt><span class="section"><a href="https.html#idm49384194736">17.1. 生成自签名证书</a></span></dt><dt><span class="section"><a href="ch17s02.html">17.2. application.properties 配置文件</a></span></dt><dt><span class="section"><a href="ch17s03.html">17.3. 启动 Spring boot</a></span></dt><dt><span class="section"><a href="ch17s04.html">17.4. restTemplate 调用实例</a></span></dt><dt><span class="section"><a href="ch17s05.html">17.5. HTTP2</a></span></dt></dl></dd><dt><span class="chapter"><a href="ViewResolver.html">18. Spring boot with Webpage</a></span></dt><dd><dl><dt><span class="section"><a href="ViewResolver.html#idm49384175280">18.1. Maven</a></span></dt><dt><span class="section"><a href="ch18s02.html">18.2. application.properties</a></span></dt><dt><span class="section"><a href="ch18s03.html">18.3. Application</a></span></dt><dt><span class="section"><a href="ch18s04.html">18.4. IndexController</a></span></dt><dt><span class="section"><a href="ch18s05.html">18.5. src/main/webapp/WEB-INF/jsp/index.jsp</a></span></dt><dt><span class="section"><a href="ch18s06.html">18.6. 集成模板引擎</a></span></dt></dl></dd><dt><span class="chapter"><a href="velocity.html">19. Spring boot with Velocity template</a></span></dt><dd><dl><dt><span class="section"><a href="velocity.html#idm49384162800">19.1. Maven</a></span></dt><dt><span class="section"><a href="ch19s02.html">19.2. Resource</a></span></dt><dt><span class="section"><a href="ch19s03.html">19.3. Application</a></span></dt><dt><span class="section"><a href="ch19s04.html">19.4. RestController</a></span></dt><dt><span class="section"><a href="ch19s05.html">19.5. Test</a></span></dt></dl></dd><dt><span class="chapter"><a href="thymeleaf.html">20. Spring boot with Thymeleaf</a></span></dt><dd><dl><dt><span class="section"><a href="thymeleaf.html#thymeleaf.maven">20.1. Maven</a></span></dt><dt><span class="section"><a href="thymeleaf.application.properties.html">20.2. application.properties</a></span></dt><dt><span class="section"><a href="thymeleaf.controller.html">20.3. Controller</a></span></dt><dt><span class="section"><a href="thymeleaf.template.html">20.4. HTML5 Template</a></span></dt></dl></dd><dt><span class="chapter"><a href="mongodb.html">21. Spring boot with MongoDB</a></span></dt><dd><dl><dt><span class="section"><a href="mongodb.html#idm49384143280">21.1. Maven</a></span></dt><dt><span class="section"><a href="ch21s02.html">21.2. Application</a></span></dt><dt><span class="section"><a href="MongoTemplate.html">21.3. MongoTemplate</a></span></dt><dt><span class="section"><a href="Repository.html">21.4. Repository</a></span></dt></dl></dd><dt><span class="chapter"><a href="mysql.html">22. Spring boot with MySQL</a></span></dt><dd><dl><dt><span class="section"><a href="mysql.html#idm49384130704">22.1. Maven</a></span></dt><dt><span class="section"><a href="ch22s02.html">22.2. Resource</a></span></dt><dt><span class="section"><a href="ch22s03.html">22.3. Application</a></span></dt><dt><span class="section"><a href="ch22s04.html">22.4. JdbcTemplate</a></span></dt><dt><span class="section"><a href="ch22s05.html">22.5. CrudRepository</a></span></dt></dl></dd><dt><span class="chapter"><a href="oracle.html">23. Spring boot with Oracle</a></span></dt><dd><dl><dt><span class="section"><a href="oracle.html#idm49384118480">23.1. Maven</a></span></dt><dt><span class="section"><a href="ch23s02.html">23.2. application.properties</a></span></dt><dt><span class="section"><a href="ch23s03.html">23.3. Application</a></span></dt><dt><span class="section"><a href="ch23s04.html">23.4. CrudRepository</a></span></dt><dt><span class="section"><a href="ch23s05.html">23.5. JdbcTemplate</a></span></dt><dt><span class="section"><a href="ch23s06.html">23.6. Controller</a></span></dt></dl></dd><dt><span class="chapter"><a href="postgresql.html">24. Spring boot with PostgreSQL</a></span></dt><dd><dl><dt><span class="section"><a href="postgresql.html#idm49384101104">24.1. pom.xml</a></span></dt><dt><span class="section"><a href="ch24s02.html">24.2. application.properties</a></span></dt><dt><span class="section"><a href="ch24s03.html">24.3. Application</a></span></dt><dt><span class="section"><a href="ch24s04.html">24.4. CrudRepository</a></span></dt><dt><span class="section"><a href="ch24s05.html">24.5. JdbcTemplate</a></span></dt><dt><span class="section"><a href="ch24s06.html">24.6. Controller</a></span></dt><dt><span class="section"><a href="ch24s07.html">24.7. Test</a></span></dt></dl></dd><dt><span class="chapter"><a href="elasticsearch.html">25. Spring boot with Elasticsearch</a></span></dt><dd><dl><dt><span class="section"><a href="elasticsearch.html#idm49384085472">25.1. Maven</a></span></dt><dt><span class="section"><a href="ch25s02.html">25.2. Application</a></span></dt><dt><span class="section"><a href="ch25s03.html">25.3. application.properties</a></span></dt><dt><span class="section"><a href="ch25s04.html">25.4. Domain</a></span></dt><dt><span class="section"><a href="ch25s05.html">25.5. ElasticsearchRepository</a></span></dt></dl></dd><dt><span class="chapter"><a href="elasticsearch5.html">26. Spring boot with Elasticsearch TransportClient</a></span></dt><dd><dl><dt><span class="section"><a href="elasticsearch5.html#idm49384075680">26.1. Maven</a></span></dt><dt><span class="section"><a href="ch26s02.html">26.2. Application</a></span></dt><dt><span class="section"><a href="ch26s03.html">26.3. application.properties</a></span></dt><dt><span class="section"><a href="ch26s04.html">26.4. ElasticsearchConfiguration</a></span></dt><dt><span class="section"><a href="ch26s05.html">26.5. RestController</a></span></dt></dl></dd><dt><span class="chapter"><a href="hive.html">27. Spring boot with Apache Hive</a></span></dt><dd><dl><dt><span class="section"><a href="hive.html#idm49384063232">27.1. Maven</a></span></dt><dt><span class="section"><a href="ch27s02.html">27.2. application.properties</a></span></dt><dt><span class="section"><a href="ch27s03.html">27.3. Configuration</a></span></dt><dt><span class="section"><a href="ch27s04.html">27.4. CURD 操作实例</a></span></dt></dl></dd><dt><span class="chapter"><a href="phoenix.html">28. Spring boot with Phoenix</a></span></dt><dd><dl><dt><span class="section"><a href="phoenix.html#idm49384052176">28.1. Maven</a></span></dt><dt><span class="section"><a href="ch28s02.html">28.2. application.properties</a></span></dt><dt><span class="section"><a href="ch28s03.html">28.3. Configuration</a></span></dt></dl></dd><dt><span class="chapter"><a href="datasource.html">29. Spring boot with Datasource</a></span></dt><dd><dl><dt><span class="section"><a href="datasource.html#idm49384044256">29.1. Master / Slave 主从数据库数据源配置</a></span></dt><dd><dl><dt><span class="section"><a href="datasource.html#idm49384043568">29.1.1. application.properties</a></span></dt><dt><span class="section"><a href="datasource.html#idm49384041568">29.1.2. 配置主从数据源</a></span></dt><dt><span class="section"><a href="datasource.html#idm49384040336">29.1.3. 选择数据源</a></span></dt></dl></dd><dt><span class="section"><a href="ch29s02.html">29.2. 多数据源配置</a></span></dt><dt><span class="section"><a href="ch29s03.html">29.3. JPA 多数据源</a></span></dt></dl></dd><dt><span class="chapter"><a href="pool.html">30. 连接池配置</a></span></dt><dd><dl><dt><span class="section"><a href="pool.html#tomcat">30.1. org.apache.tomcat.jdbc.pool.DataSource</a></span></dt><dt><span class="section"><a href="pool.druid.html">30.2. druid</a></span></dt><dd><dl><dt><span class="section"><a href="pool.druid.html#idm49384023872">30.2.1. 加密数据库密码</a></span></dt></dl></dd><dt><span class="section"><a href="pool.c3p0.html">30.3. c3p0 - JDBC3 Connection and Statement Pooling</a></span></dt><dt><span class="section"><a href="dbcp2.html">30.4. dbcp2</a></span></dt><dt><span class="section"><a href="bonecp.html">30.5. bonecp</a></span></dt><dt><span class="section"><a href="HikariPool.html">30.6. HikariPool</a></span></dt></dl></dd><dt><span class="chapter"><a href="queue/index.html">31. Spring boot with Queue</a></span></dt><dd><dl><dt><span class="section"><a href="queue/index.html#rabbitmq">31.1. Spring boot with RabbitMQ(AMQP)</a></span></dt><dd><dl><dt><span class="section"><a href="queue/index.html#idm49383972096">31.1.1. maven</a></span></dt><dt><span class="section"><a href="queue/index.html#idm49383969712">31.1.2. RabbitMQConfig</a></span></dt><dt><span class="section"><a href="queue/index.html#idm49383968480">31.1.3. 生产者</a></span></dt><dt><span class="section"><a href="queue/index.html#idm49383967248">31.1.4. 消费者</a></span></dt></dl></dd><dt><span class="section"><a href="queue/kafka.html">31.2. Spring boot with Apache Kafka</a></span></dt><dd><dl><dt><span class="section"><a href="queue/kafka.html#idm49383963584">31.2.1. 安装 kafka</a></span></dt><dt><span class="section"><a href="queue/kafka.html#maven">31.2.2. maven</a></span></dt><dt><span class="section"><a href="queue/kafka.html#application">31.2.3. Spring boot Application</a></span></dt><dt><span class="section"><a href="queue/kafka.html#EnableKafka">31.2.4. EnableKafka</a></span></dt><dt><span class="section"><a href="queue/kafka.html#KafkaListener">31.2.5. KafkaListener</a></span></dt><dt><span class="section"><a href="queue/kafka.html#spring.boot.kafka.test">31.2.6. 测试</a></span></dt><dt><span class="section"><a href="queue/kafka.html#spring.boot.kafka.example">31.2.7. 完整的发布订阅实例</a></span></dt><dt><span class="section"><a href="queue/kafka.html#spring.cloud.kafka">31.2.8. Spring cloud with Kafka</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="scheduling.html">32. Spring boot with Scheduling</a></span></dt><dd><dl><dt><span class="section"><a href="scheduling.html#idm49383916064">32.1. Application.java</a></span></dt><dt><span class="section"><a href="ch32s02.html">32.2. Component</a></span></dt><dt><span class="section"><a href="ch32s03.html">32.3. 查看日志</a></span></dt><dt><span class="section"><a href="ch32s04.html">32.4. 计划任务控制开关</a></span></dt><dt><span class="section"><a href="scheduled.html">32.5. @Scheduled 详解</a></span></dt><dd><dl><dt><span class="section"><a href="scheduled.html#idm49383902720">32.5.1. 每3秒钟一运行一次</a></span></dt><dt><span class="section"><a href="scheduled.html#idm49383901280">32.5.2. 凌晨23点运行</a></span></dt></dl></dd><dt><span class="section"><a href="ch32s06.html">32.6. Timer 例子</a></span></dt><dt><span class="section"><a href="ch32s07.html">32.7. ScheduledExecutorService 例子</a></span></dt></dl></dd><dt><span class="chapter"><a href="springboot.swagger2.html">33. Spring boot with Swagger</a></span></dt><dd><dl><dt><span class="section"><a href="springboot.swagger2.html#idm49383894832">33.1. Swagger3</a></span></dt><dt><span class="section"><a href="ch33s02.html">33.2. Swagger2</a></span></dt><dd><dl><dt><span class="section"><a href="ch33s02.html#idm49383892768">33.2.1. Maven 文件</a></span></dt><dt><span class="section"><a href="ch33s02.html#idm49383891536">33.2.2. SpringApplication</a></span></dt><dt><span class="section"><a href="ch33s02.html#idm49383889776">33.2.3. EnableSwagger2</a></span></dt><dt><span class="section"><a href="ch33s02.html#idm49383888624">33.2.4. RestController</a></span></dt></dl></dd><dt><span class="section"><a href="ch33s03.html">33.3. @Api()</a></span></dt><dt><span class="section"><a href="ch33s04.html">33.4. @ApiOperation()</a></span></dt><dt><span class="section"><a href="ch33s05.html">33.5. @ApiResponses</a></span></dt><dt><span class="section"><a href="ch33s06.html">33.6. @ApiModel 实体类</a></span></dt></dl></dd><dt><span class="chapter"><a href="springboot.knife4j.html">34. Spring boot with knife4j</a></span></dt><dd><dl><dt><span class="section"><a href="springboot.knife4j.html#idm49383876736">34.1. maven</a></span></dt><dt><span class="section"><a href="ch34s02.html">34.2. Knife4jConfiguration</a></span></dt><dt><span class="section"><a href="ch34s03.html">34.3. application.properties</a></span></dt></dl></dd><dt><span class="chapter"><a href="lombok.html">35. Spring boot with lombok</a></span></dt><dd><dl><dt><span class="section"><a href="lombok.html#idm49383869920">35.1. @Builder</a></span></dt><dt><span class="section"><a href="ch35s02.html">35.2. @Slf4j 注解</a></span></dt></dl></dd><dt><span class="chapter"><a href="docker/index.html">36. Spring boot with Container</a></span></dt><dd><dl><dt><span class="section"><a href="docker/index.html#springboot.docker">36.1. Spring boot with Docker</a></span></dt><dd><dl><dt><span class="section"><a href="docker/index.html#idm49383862480">36.1.1. 通过 Docker 命令构建镜像</a></span></dt><dt><span class="section"><a href="docker/index.html#idm49384830352">36.1.2. 通过 Maven 构建 Docker 镜像</a></span></dt><dt><span class="section"><a href="docker/index.html#idm49384821888">36.1.3. [ERROR] No plugin found for prefix 'dockerfile' in the current project and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] available from the repositories [local (/Users/neo/.m2/repository), central (https://repo.maven.apache.org/maven2)] -&gt; [Help 1]</a></span></dt><dt><span class="section"><a href="docker/index.html#idm49384814240">36.1.4. curl: (35) LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to localhost:8888</a></span></dt></dl></dd><dt><span class="section"><a href="docker/spring-boot.docker-stack.html">36.2. Spring boot with Docker stack</a></span></dt><dd><dl><dt><span class="section"><a href="docker/spring-boot.docker-stack.html#idm49384805520">36.2.1. 编译 Docker 镜像</a></span></dt><dt><span class="section"><a href="docker/spring-boot.docker-stack.html#idm49384802832">36.2.2. </a></span></dt></dl></dd><dt><span class="section"><a href="docker/springboot.kubernetes.html">36.3. Spring boot with Kubernetes</a></span></dt><dd><dl><dt><span class="section"><a href="docker/springboot.kubernetes.html#idm49384793792">36.3.1. Kubernetes 编排脚本</a></span></dt><dt><span class="section"><a href="docker/springboot.kubernetes.html#idm49384789440">36.3.2. 部署镜像</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="spring.command.argv.html">37. Spring boot with command line</a></span></dt><dd><dl><dt><span class="section"><a href="spring.command.argv.html#idm49384784960">37.1. Maven</a></span></dt><dt><span class="section"><a href="ch37s02.html">37.2. CommandLineRunner 例子</a></span></dt><dt><span class="section"><a href="ch37s03.html">37.3. ApplicationRunner 例子</a></span></dt></dl></dd><dt><span class="chapter"><a href="actuator/index.html">38. Spring Boot Actuator</a></span></dt><dd><dl><dt><span class="section"><a href="actuator/index.html#idm49384777216">38.1. Maven 依赖</a></span></dt><dt><span class="section"><a href="actuator/ch38s02.html">38.2. 与 Spring Boot Actuator 有关的配置</a></span></dt><dd><dl><dt><span class="section"><a href="actuator/ch38s02.html#idm49384773536">38.2.1. 禁用HTTP端点</a></span></dt><dt><span class="section"><a href="actuator/ch38s02.html#idm49384771664">38.2.2. 安全配置</a></span></dt><dt><span class="section"><a href="actuator/ch38s02.html#actuator.path">38.2.3. 修改 actuator 地址</a></span></dt><dt><span class="section"><a href="actuator/ch38s02.html#idm49383858768">38.2.4. 关机</a></span></dt></dl></dd><dt><span class="section"><a href="actuator/ch38s03.html">38.3. actuator 接口</a></span></dt><dt><span class="section"><a href="actuator/actuator.health.html">38.4. 健康状态</a></span></dt><dd><dl><dt><span class="section"><a href="actuator/actuator.health.html#idm49383849520">38.4.1. 健康状态</a></span></dt></dl></dd><dt><span class="section"><a href="actuator/actuator.info.html">38.5. info 配置信息</a></span></dt><dt><span class="section"><a href="actuator/actuator.beans.html">38.6. beans 信息</a></span></dt><dt><span class="section"><a href="actuator/actuator.caches.html">38.7. caches</a></span></dt><dt><span class="section"><a href="actuator/actuator.conditions.html">38.8. conditions</a></span></dt><dt><span class="section"><a href="actuator/actuator.configprops.html">38.9. configprops 配置文件</a></span></dt><dt><span class="section"><a href="actuator/actuator.env.html">38.10. env 环境变量</a></span></dt><dt><span class="section"><a href="actuator/actuator.logfile.html">38.11. logfile 日志</a></span></dt><dt><span class="section"><a href="actuator/actuator.threaddump.html">38.12. threaddump 线程信息</a></span></dt><dt><span class="section"><a href="actuator/actuator.scheduledtasks.html">38.13. 计划任务</a></span></dt><dt><span class="section"><a href="actuator/actuator.metrics.html">38.14. metrics</a></span></dt><dt><span class="section"><a href="actuator/actuator.mappings.html">38.15. 控制器映射 URL</a></span></dt><dt><span class="section"><a href="actuator/actuator.endpoint.html">38.16. 自定义监控指标</a></span></dt></dl></dd><dt><span class="chapter"><a href="RestTemplate/index.html">39. String boot with RestTemplate</a></span></dt><dd><dl><dt><span class="section"><a href="RestTemplate/index.html#restTemplate.example">39.1. RestTemplate Example</a></span></dt><dd><dl><dt><span class="section"><a href="RestTemplate/index.html#rest.pom.xml">39.1.1. pom.xml</a></span></dt><dt><span class="section"><a href="RestTemplate/index.html#rest.web.xml">39.1.2. web.xml</a></span></dt><dt><span class="section"><a href="RestTemplate/index.html#rest.springframework.xml">39.1.3. springframework.xml</a></span></dt><dt><span class="section"><a href="RestTemplate/index.html#rest.controller">39.1.4. RestController</a></span></dt><dt><span class="section"><a href="RestTemplate/index.html#rest.pojo">39.1.5. POJO</a></span></dt><dt><span class="section"><a href="RestTemplate/index.html#idm49383808544">39.1.6. 在控制器中完整实例</a></span></dt><dt><span class="section"><a href="RestTemplate/index.html#rest.test">39.1.7. 测试</a></span></dt></dl></dd><dt><span class="section"><a href="RestTemplate/restTemplate.getForObject.html">39.2. GET 操作</a></span></dt><dd><dl><dt><span class="section"><a href="RestTemplate/restTemplate.getForObject.html#idm49383802704">39.2.1. 返回字符串</a></span></dt><dt><span class="section"><a href="RestTemplate/restTemplate.getForObject.html#idm49383801184">39.2.2. 传递 GET 参数</a></span></dt></dl></dd><dt><span class="section"><a href="RestTemplate/restTemplate.postForObject.html">39.3. POST 操作</a></span></dt><dd><dl><dt><span class="section"><a href="RestTemplate/restTemplate.postForObject.html#restTemplate.postForObject">39.3.1. postForObject</a></span></dt><dt><span class="section"><a href="RestTemplate/restTemplate.postForObject.html#restTemplate.postForEntity">39.3.2. postForEntity</a></span></dt></dl></dd><dt><span class="section"><a href="RestTemplate/restTemplate.put.html">39.4. PUT 操作</a></span></dt><dt><span class="section"><a href="RestTemplate/restTemplate.delete.html">39.5. Delete 操作</a></span></dt><dt><span class="section"><a href="RestTemplate/restTemplate.exchange.html">39.6. 上传文件</a></span></dt><dt><span class="section"><a href="RestTemplate/RestTemplate.auth.html">39.7. HTTP Auth</a></span></dt><dd><dl><dt><span class="section"><a href="RestTemplate/RestTemplate.auth.html#idm49383784816">39.7.1. Client</a></span></dt></dl></dd><dt><span class="section"><a href="RestTemplate/RestTemplate.double.auth.html">39.8. PKCS12</a></span></dt><dt><span class="section"><a href="RestTemplate/RestTemplate.timeout.html">39.9. Timeout 超时设置</a></span></dt><dd><dl><dt><span class="section"><a href="RestTemplate/RestTemplate.timeout.html#idm49383780560">39.9.1. JRE 启动参数设置超时时间</a></span></dt><dt><span class="section"><a href="RestTemplate/RestTemplate.timeout.html#idm49383779136">39.9.2. RestTemplate timeout with SimpleClientHttpRequestFactory</a></span></dt><dt><span class="section"><a href="RestTemplate/RestTemplate.timeout.html#idm49383777840">39.9.3. @Configuration 方式</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="spring.boot.test.html">40. SpringBootTest</a></span></dt><dd><dl><dt><span class="section"><a href="spring.boot.test.html#springboot.test.maven">40.1. Maven 依赖</a></span></dt><dt><span class="section"><a href="test.class.html">40.2. 测试类</a></span></dt><dd><dl><dt><span class="section"><a href="test.class.html#">40.2.1. Junit基本注解介绍</a></span></dt></dl></dd><dt><span class="section"><a href="Assert.html">40.3. </a></span></dt><dd><dl><dt><span class="section"><a href="Assert.html#Assert.assertEquals">40.3.1. Assert.assertEquals 判断相等</a></span></dt><dt><span class="section"><a href="Assert.html#Assert.assertTrue">40.3.2. Assert.assertTrue</a></span></dt></dl></dd><dt><span class="section"><a href="ch40s04.html">40.4. JPA 测试</a></span></dt><dt><span class="section"><a href="ch40s05.html">40.5. TestRestTemplate</a></span></dt><dt><span class="section"><a href="MockMvc.html">40.6. Controller单元测试</a></span></dt><dt><span class="section"><a href="WebTestClient.html">40.7. WebTestClient</a></span></dt></dl></dd><dt><span class="chapter"><a href="spring.aop.html">41. Spring boot with Aop</a></span></dt><dd><dl><dt><span class="section"><a href="spring.aop.html#Aspect">41.1. Aspect</a></span></dt><dd><dl><dt><span class="section"><a href="spring.aop.html#idm49390046496">41.1.1. Maven</a></span></dt><dt><span class="section"><a href="spring.aop.html#idm49390044256">41.1.2. Pojo 类</a></span></dt><dt><span class="section"><a href="spring.aop.html#idm49390042768">41.1.3. Service 类</a></span></dt><dt><span class="section"><a href="spring.aop.html#idm49390041072">41.1.4. Aspect 类</a></span></dt><dt><span class="section"><a href="spring.aop.html#idm49383757296">41.1.5. 控制器</a></span></dt><dt><span class="section"><a href="spring.aop.html#idm49383756640">41.1.6. Application</a></span></dt><dt><span class="section"><a href="spring.aop.html#idm49390039488">41.1.7. 测试</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="springboot.starter.html">42. Spring boot with starter</a></span></dt><dd><dl><dt><span class="section"><a href="springboot.starter.html#idm49390033936">42.1. 实现 starter</a></span></dt><dd><dl><dt><span class="section"><a href="springboot.starter.html#idm49390033056">42.1.1. Maven pom.xml 依赖包</a></span></dt><dt><span class="section"><a href="springboot.starter.html#idm49390031776">42.1.2. 配置文件处理</a></span></dt><dt><span class="section"><a href="springboot.starter.html#idm49399643056">42.1.3. 自动配置文件</a></span></dt><dt><span class="section"><a href="springboot.starter.html#idm49399640896">42.1.4. 启用 starter 的自定义注解</a></span></dt></dl></dd><dt><span class="section"><a href="ch42s02.html">42.2. 引用 starter</a></span></dt><dd><dl><dt><span class="section"><a href="ch42s02.html#idm49399637664">42.2.1. Maven pom.xml 引入依赖</a></span></dt><dt><span class="section"><a href="ch42s02.html#idm49399635344">42.2.2. 通过注解配置 starter</a></span></dt><dt><span class="section"><a href="ch42s02.html#idm49399631968">42.2.3. 测试运行结果</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="monitor/index.html">43. Spring boot with Monitor</a></span></dt><dd><dl><dt><span class="section"><a href="monitor/index.html#springboot.grafana">43.1. Spring boot with Grafana</a></span></dt><dd><dl><dt><span class="section"><a href="monitor/index.html#idm49399623344">43.1.1. Springboot 集成 InfluxDB</a></span></dt><dt><span class="section"><a href="monitor/index.html#idm49399619936">43.1.2. InfluxDB</a></span></dt></dl></dd><dt><span class="section"><a href="monitor/springboot.prometheus.html">43.2. Spring Boot with Prometheus</a></span></dt><dd><dl><dt><span class="section"><a href="monitor/springboot.prometheus.html#idm49399615408">43.2.1. Maven 依赖</a></span></dt><dt><span class="section"><a href="monitor/springboot.prometheus.html#idm49399613872">43.2.2. application.properties 配置文件</a></span></dt><dt><span class="section"><a href="monitor/springboot.prometheus.html#idm49399612000">43.2.3. 启动类</a></span></dt><dt><span class="section"><a href="monitor/springboot.prometheus.html#idm49383066208">43.2.4. 测试</a></span></dt><dt><span class="section"><a href="monitor/springboot.prometheus.html#idm49383057328">43.2.5. 控制器监控</a></span></dt><dt><span class="section"><a href="monitor/springboot.prometheus.html#idm49383055584">43.2.6. 自定义埋点监控</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="git/index.html">45. Spring boot with Git version</a></span></dt><dd><dl><dt><span class="section"><a href="git/index.html#idm49383041440">45.1. CommonRestController 公共控制器</a></span></dt><dt><span class="section"><a href="git/ch45s02.html">45.2. VersionRestController 测试控制器</a></span></dt><dt><span class="section"><a href="git/ch45s03.html">45.3. 创建 .gitattributes 文件</a></span></dt></dl></dd><dt><span class="chapter"><a href="session.html">46. Spring boot with Session share</a></span></dt><dd><dl><dt><span class="section"><a href="session.html#idm49383032928">46.1. Redis</a></span></dt><dd><dl><dt><span class="section"><a href="session.html#idm49383032336">46.1.1. Maven</a></span></dt><dt><span class="section"><a href="session.html#idm49383029376">46.1.2. application.properties</a></span></dt><dt><span class="section"><a href="session.html#idm49383027344">46.1.3. Application</a></span></dt></dl></dd><dt><span class="section"><a href="ch46s02.html">46.2. 测试 Session</a></span></dt><dt><span class="section"><a href="ch46s03.html">46.3. JDBC</a></span></dt><dt><span class="section"><a href="ch46s04.html">46.4. Springboot 2.1</a></span></dt></dl></dd><dt><span class="chapter"><a href="cache/index.html">47. Spring boot with Caching</a></span></dt><dd><dl><dt><span class="section"><a href="cache/index.html#idm49383012752">47.1. maven</a></span></dt><dd><dl><dt><span class="section"><a href="cache/index.html#idm49383011584">47.1.1. Redis</a></span></dt></dl></dd><dt><span class="section"><a href="cache/@EnableCaching.html">47.2. 启用 Cache</a></span></dt><dt><span class="section"><a href="cache/@Cacheable.html">47.3. @Cacheable 的用法</a></span></dt><dd><dl><dt><span class="section"><a href="cache/@Cacheable.html#idm49382999904">47.3.1. SpEL表达式</a></span></dt><dt><span class="section"><a href="cache/@Cacheable.html#idm49382998192">47.3.2. 排除 null 结果</a></span></dt></dl></dd><dt><span class="section"><a href="cache/@CachePut.html">47.4. @CachePut 用法</a></span></dt><dt><span class="section"><a href="cache/@CacheEvict.html">47.5. 清空缓存</a></span></dt><dt><span class="section"><a href="cache/@Caching.html">47.6. @Caching</a></span></dt><dt><span class="section"><a href="cache/解决Expire 和 TTL 过期时间.html">47.7. 解决Expire 和 TTL 过期时间</a></span></dt></dl></dd><dt><span class="chapter"><a href="email.html">48. Spring boot with Email</a></span></dt><dd><dl><dt><span class="section"><a href="email.html#idm49384762192">48.1. Maven</a></span></dt><dt><span class="section"><a href="ch48s02.html">48.2. Resource</a></span></dt><dt><span class="section"><a href="ch48s03.html">48.3. POJO</a></span></dt><dt><span class="section"><a href="ch48s04.html">48.4. RestController</a></span></dt><dt><span class="section"><a href="ch48s05.html">48.5. Test</a></span></dt></dl></dd><dt><span class="chapter"><a href="hessian.html">49. Spring boot with Hessian</a></span></dt><dd><dl><dt><span class="section"><a href="hessian.html#idm49384750784">49.1. Maven</a></span></dt><dt><span class="section"><a href="ch49s02.html">49.2. Application</a></span></dt><dt><span class="section"><a href="ch49s03.html">49.3. HessianServiceExporter</a></span></dt><dt><span class="section"><a href="ch49s04.html">49.4. Service</a></span></dt><dt><span class="section"><a href="ch49s05.html">49.5. RestController</a></span></dt></dl></dd><dt><span class="chapter"><a href="enableasync.html">50. Spring boot with Async</a></span></dt><dd><dl><dt><span class="section"><a href="enableasync.html#Callable">50.1. Callable 实现异步</a></span></dt><dt><span class="section"><a href="WebAsyncTask.html">50.2. WebAsyncTask 实现异步</a></span></dt><dt><span class="section"><a href="DeferredResult.html">50.3. DeferredResult 实现异步访问</a></span></dt><dt><span class="section"><a href="SimpleAsyncTaskExecutor.html">50.4. SimpleAsyncTaskExecutor</a></span></dt><dd><dl><dt><span class="section"><a href="SimpleAsyncTaskExecutor.html#idm49384728000">50.4.1. 配置线程池</a></span></dt></dl></dd><dt><span class="section"><a href="ThreadPoolTaskExecutor.html">50.5. ThreadPoolTaskExecutor 自定义线程池</a></span></dt><dd><dl><dt><span class="section"><a href="ThreadPoolTaskExecutor.html#简单异步执行">50.5.1. 最简单的配置</a></span></dt><dt><span class="section"><a href="ThreadPoolTaskExecutor.html#idm49384720960">50.5.2. 队列</a></span></dt></dl></dd><dt><span class="section"><a href="ch50s06.html">50.6. 定义多个线程池</a></span></dt><dt><span class="section"><a href="ch50s07.html">50.7. 自定义线程池</a></span></dt><dd><dl><dt><span class="section"><a href="ch50s07.html#idm49384711312">50.7.1. ThreadPoolExecutor</a></span></dt><dt><span class="section"><a href="ch50s07.html#idm49384709680">50.7.2. 注入自定义线程池bean</a></span></dt></dl></dd><dt><span class="section"><a href="ch50s08.html">50.8. 设置线程名称</a></span></dt><dt><span class="section"><a href="ch50s09.html">50.9. 线程池监控</a></span></dt></dl></dd><dt><span class="chapter"><a href="web3j.html">51. Springboot with Ethereum (web3j)</a></span></dt><dd><dl><dt><span class="section"><a href="web3j.html#idm49384701376">51.1. Maven</a></span></dt><dt><span class="section"><a href="web3j.springboot.application.properties.html">51.2. application.properties</a></span></dt><dt><span class="section"><a href="ch51s03.html">51.3. TestRestController</a></span></dt><dt><span class="section"><a href="ch51s04.html">51.4. 测试</a></span></dt></dl></dd><dt><span class="chapter"><a href="spring.boot.record.html">52. Java Record 新特性</a></span></dt><dd><dl><dt><span class="section"><a href="spring.boot.record.html#idm49384693616">52.1. Record 替代 POJO 类</a></span></dt><dt><span class="section"><a href="ch52s02.html">52.2. Record 作为 Properties</a></span></dt><dt><span class="section"><a href="ch52s03.html">52.3. Record 作为实体类</a></span></dt><dt><span class="section"><a href="ch52s04.html">52.4. Record 作为 Service</a></span></dt><dt><span class="section"><a href="ch52s05.html">52.5. Record 作为 Controller</a></span></dt></dl></dd></dl></div>
	
	

	


	
	
	

	

	

	

	

	

	

	



	
	










	
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="redis"></a>1. Spring boot with Redis</h2></div></div></div>
	
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="redis"></a>1.1. Spring boot with Redis</h3></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm49384007248"></a>1.1.1. maven</h4></div></div></div>
			
			<pre class="programlisting">
				
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
&lt;/dependency&gt;			
				
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm49384005936"></a>1.1.2. application.properties</h4></div></div></div>
			
			<pre class="programlisting">
				
spring.redis.database=10
spring.redis.host=localhost
spring.redis.port=6379
spring.redis.password=
spring.redis.pool.max-active=8
spring.redis.pool.max-wait=-1
spring.redis.pool.max-idle=8
spring.redis.pool.min-idle=0
spring.redis.timeout=0
				
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm49384004448"></a>1.1.3. JUnit</h4></div></div></div>
			
			<pre class="programlisting">
				
@RunWith(SpringJUnit4ClassRunner.class)
@SpringApplicationConfiguration(Application.class)
public class ApplicationTests {
	@Autowired
	private StringRedisTemplate stringRedisTemplate;
	@Test
	public void test() throws Exception {
		// 保存字符串
		stringRedisTemplate.opsForValue().set("neo", "chen");
		Assert.assertEquals("chen", stringRedisTemplate.opsForValue().get("neo"));
    }
}				
				
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm49384002800"></a>1.1.4. Controller</h4></div></div></div>
			
			<p>stringRedisTemplate模板用于存储key,value为字符串的数据</p>
			<pre class="programlisting">
				
	@Autowired
	private StringRedisTemplate stringRedisTemplate;
	
	@RequestMapping("/test")
	@ResponseBody
	public String test() {
		String message = "";
		stringRedisTemplate.opsForValue().set("hello", "world");
		message = stringRedisTemplate.opsForValue().get("hello");
		return message;
	}
				
			</pre>
			<p>等同于</p>
			<pre class="programlisting">
				
	@Autowired
	private RedisTemplate&lt;String, String&gt; redisTemplate;
				
			</pre>
			
			<div class="example"><a id="idm49383999984"></a><p class="title"><strong>例 9. RedisTemplate</strong></p><div class="example-contents">
				
				<pre class="programlisting">
					
	@Autowired
	private RedisTemplate&lt;String, String&gt; redisTemplate;
	
	public List&lt;Protocol&gt; getProtocol() {
		List&lt;Protocol&gt; protocols = new ArrayList&lt;Protocol&gt;();
		Gson gson = new Gson();
		Type type = new TypeToken&lt;List&lt;Protocol&gt;&gt;(){}.getType();
		redisTemplate.setKeySerializer(new StringRedisSerializer());
		redisTemplate.setValueSerializer(new StringRedisSerializer());
		
		String cacheKey = String.format("%s:%s", this.getClass().getName(), Thread.currentThread().getStackTrace()[1].getMethodName());
		long expireTime = 5;
		
		if(redisTemplate.hasKey(cacheKey)){
			String cacheValue = redisTemplate.opsForValue().get(cacheKey);
			System.out.println(cacheValue);
			protocols = gson.fromJson(cacheValue, type);
		}else{
			Protocol protocol = new Protocol();
			protocol.setRequest(new Date().toString());
			protocols.add(protocol);
			
			String jsonString = gson.toJson(protocols, type);
	        System.out.println( jsonString );
			
			redisTemplate.opsForValue().set(cacheKey, jsonString);
			redisTemplate.expire(cacheKey, expireTime, TimeUnit.SECONDS);
		}
		return protocols;
	}
					
				</pre>
			</div></div><br class="example-break" />
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm49383998528"></a>1.2. </h3></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm49383998016"></a>1.2.1. 获取过期时间</h4></div></div></div>
			
			<pre class="programlisting">
			
    @Autowired
    private RedisTemplate&lt;String, String&gt; redisTemplate;
    
    Long ttl = redisTemplate.getExpire(String.format("lock:%s", device));			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm49383996528"></a>1.2.2. 列表操作</h4></div></div></div>
			
			<p>ListOperations</p>
			<pre class="programlisting">
				
public class Example {

    // inject the actual template
    @Autowired
    private RedisTemplate&lt;String, String&gt; template;

    // inject the template as ListOperations
    // can also inject as Value, Set, ZSet, and HashOperations
    @Resource(name="redisTemplate")
    private ListOperations&lt;String, String&gt; listOps;

    public void addLink(String userId, URL url) {
        listOps.leftPush(userId, url.toExternalForm());
        // or use template directly
        redisTemplate.boundListOps(userId).leftPush(url.toExternalForm());
    }
}
				
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="redis.pubsub"></a>1.3. Redis Pub/Sub</h3></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm49383993216"></a>1.3.1. Redis配置类</h4></div></div></div>
			
			<pre class="programlisting">
				
package cn.netkiller.wallet.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.connection.RedisConnectionFactory;

import org.springframework.data.redis.core.StringRedisTemplate;
import org.springframework.data.redis.listener.ChannelTopic;
import org.springframework.data.redis.listener.RedisMessageListenerContainer;
import org.springframework.data.redis.listener.adapter.MessageListenerAdapter;

import cn.netkiller.wallet.redis.RedisMessageSubscriber;

@Configuration
public class RedisConfig {

	public RedisConfig() {
	}

	@Bean
	public StringRedisTemplate stringRedisTemplate(RedisConnectionFactory connectionFactory) {
		StringRedisTemplate redisTemplate = new StringRedisTemplate();
		redisTemplate.setConnectionFactory(connectionFactory);
		return redisTemplate;
	}

	@Bean
	public MessageListenerAdapter messageListener() {
		return new MessageListenerAdapter(new RedisMessageSubscriber());
	}

	@Bean
	public ChannelTopic topic() {
		return new ChannelTopic("demo");
	}

	@Bean
	public RedisMessageListenerContainer redisContainer(RedisConnectionFactory connectionFactory, MessageListenerAdapter messageListener) {
		RedisMessageListenerContainer container = new RedisMessageListenerContainer();

		container.setConnectionFactory(connectionFactory);
		container.addMessageListener(messageListener(), topic());
		container.addMessageListener(messageListener(), new ChannelTopic("test"));
		return container;
	}

}

				
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm49383992064"></a>1.3.2. 订阅和发布类</h4></div></div></div>
			
			<pre class="programlisting">
				
package cn.netkiller.wallet.redis;

import java.nio.charset.StandardCharsets;

import org.springframework.data.redis.connection.Message;
import org.springframework.data.redis.connection.MessageListener;

public class RedisMessageSubscriber implements MessageListener {
	public void onMessage(final Message message, final byte[] pattern) {
		System.out.println("Topic : " + new String(message.getChannel(), StandardCharsets.UTF_8));
		System.out.println("Message : " + message.toString());
	}
}

				
			</pre>
			<pre class="programlisting">
				
package cn.netkiller.wallet.redis;

import org.springframework.data.redis.core.StringRedisTemplate;
import org.springframework.data.redis.listener.ChannelTopic;

public class RedisMessagePublisher {

	private final StringRedisTemplate redisTemplate;

	private final ChannelTopic topic;

	public RedisMessagePublisher(StringRedisTemplate redisTemplate, ChannelTopic topic) {
		this.redisTemplate = redisTemplate;
		this.topic = topic;
	}

	public void publish(String message) {
		redisTemplate.convertAndSend(topic.getTopic(), message);
	}
}
								
				
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm49383989792"></a>1.3.3. 消息发布演示</h4></div></div></div>
			
			<pre class="programlisting">
				
	@Autowired
	private StringRedisTemplate stringRedisTemplate;
	
	@GetMapping("/pub/demo")
	public String pub() {

		RedisMessagePublisher publisher = new RedisMessagePublisher(stringRedisTemplate, new ChannelTopic("demo"));
		String message = "Message " + UUID.randomUUID();
		publisher.publish(message);
		return message;
	}

	@GetMapping("/pub/test")
	public String pub(@RequestParam String message) {

		RedisMessagePublisher publisher = new RedisMessagePublisher(stringRedisTemplate, new ChannelTopic("test"));
		publisher.publish(message);
		return message;
	}				
				
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="RedisLockRegistry"></a>1.4. Spring Redis Lock</h3></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm49383986336"></a>1.4.1. Maven 依赖</h4></div></div></div>
			
			<pre class="programlisting">
			
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-integration&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.integration&lt;/groupId&gt;
            &lt;artifactId&gt;spring-integration-redis&lt;/artifactId&gt;
        &lt;/dependency&gt;			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm49383984720"></a>1.4.2. 配置锁</h4></div></div></div>
			
			<pre class="programlisting">
			
package cn.netkiller.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.connection.RedisConnectionFactory;
import org.springframework.integration.redis.util.RedisLockRegistry;

@Configuration
public class RedisLockRegistryConfiguration {
    @Bean
    public RedisLockRegistry redisLockRegistry(RedisConnectionFactory redisConnectionFactory) {
        return new RedisLockRegistry(redisConnectionFactory, "netkiller-lock");
    }
}
			
			
			</pre>
			<p></p>
			<pre class="programlisting">
			
  @Bean(destroyMethod = "destroy")
  public RedisLockRegistry redisLockRegistry(RedisConnectionFactory redisConnectionFactory) {
    return new RedisLockRegistry(redisConnectionFactory, "neo-lock",
        TimeUnit.MINUTES.toMillis(10));
  }			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm49383982016"></a>1.4.3. 使用方法</h4></div></div></div>
			
			<pre class="programlisting">
			
@Autowired
private RedisLockRegistry redisLockRegistry;
			
		Lock lock = redisLockRegistry.obtain(device);
        if (lock.tryLock()) {
            try {
                // manipulate protected state
            } finally {
                lock.unlock();
            }
        } else {
            // perform alternative actions
        }			
			
			</pre>
			<pre class="programlisting">
			
@Autowired
private RedisLockRegistry redisLockRegistry;

Lock lock = redisLockRegistry.obtain(key);
boolean locked = false;
try {
  locked = lock.tryLock();
  if (!locked) {
    // 没有获取到锁的逻辑    
  }

  // 获取锁的逻辑
} finally {
  if (locked) {
    lock.unlock();
  }
}			
			
			</pre>
			<p>如果没有上锁，上锁后返回 true 状态。如果已经上锁阻塞等待10秒，然后再返回锁状态</p>
			<pre class="programlisting">
			
    public boolean isLock(String device) {

        Lock lock = redisLockRegistry.obtain(device);
        boolean status = false;
        try {
            status = lock.tryLock(10, TimeUnit.SECONDS);

        } catch (Exception e) {
            log.info(e.getMessage());
        }
        log.warn("status: {} &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;", status);
        return status;
    }			
			
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="redisson"></a>1.5. Sprint boot with Redisson</h3></div></div></div>
	
	<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm49383977216"></a>1.5.1. Springboot 3.x</h4></div></div></div>
		
		<pre class="screen">
		

		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm49383976064"></a>1.5.2. Springboot 2.1</h4></div></div></div>
		
		<p>注意：排除 redisson-spring-data-23，引用 redisson-spring-data-21</p>
		<pre class="screen">
		
 		&lt;dependency&gt;
            &lt;groupId&gt;org.redisson&lt;/groupId&gt;
            &lt;artifactId&gt;redisson-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;3.14.0&lt;/version&gt;
            &lt;exclusions&gt;
                &lt;exclusion&gt;
                    &lt;groupId&gt;org.redisson&lt;/groupId&gt;
                    &lt;artifactId&gt;redisson-spring-data-23&lt;/artifactId&gt;
                &lt;/exclusion&gt;
            &lt;/exclusions&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.redisson&lt;/groupId&gt;
            &lt;artifactId&gt;redisson-spring-data-21&lt;/artifactId&gt;
            &lt;version&gt;3.14.0&lt;/version&gt;
        &lt;/dependency&gt;
		
		
		</pre>
	</div>

</div>
</div>
	
 
	


	


	

	

	

	

	

	

	
	
	

	
	 
	

	

	

	

	

	

	

	

	
	
</div><div xmlns="" id="SOHUCS"></div><script xmlns="" charset="utf-8" type="text/javascript" src="https://cy-cdn.kuaizhan.com/upload/changyan.js"></script><script xmlns="" type="text/javascript">
			window.changyan.api.config({
			appid: 'cyvwjQUG3',
			conf: 'prod_ef966242df3d8b5acb1e0ee9fc01cafe'
			});
</script><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="../java/security/index.html">上一页</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="suite/index.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">8.9. java.security </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 第 9 章 Spring 开发环境</td></tr></table></div><script xmlns="">
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-11694057-1', 'auto');
			ga('send', 'pageview');

		</script><script xmlns="" async="async">
			var _hmt = _hmt || [];
			(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
			})();
</script><script xmlns="" async="async">
			(function(){
			var bp = document.createElement('script');
			var curProtocol = window.location.protocol.split(':')[0];
			if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			}
			else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			}
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(bp, s);
			})();
</script></body></html>