<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>第 13 章 Util</title><link rel="stylesheet" type="text/css" href="../../docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="home" href="../../index.html" title="Netkiller Java 手札（版）" /><link rel="up" href="../index.html" title="部分 II. JDK Development Kit" /><link rel="prev" href="../function/ch12s08.html" title="12.8. Supplier / Consumer / Predicate 应用场景" /><link rel="next" href="java.util.logging.html" title="13.2. Logging" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> | <a xmlns="" href="//netkiller.github.io/">简体中文</a> | <a xmlns="" href="http://netkiller.sourceforge.net/">繁体中文</a> | <a xmlns="" href="/journal/index.html">杂文</a>
		| <a xmlns="" href="https://github.com/netkiller">Github</a> | <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> | <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> | <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> | <a xmlns="" href="https://www.youtube.com/user/bg7nyt/videos">Youtube</a> | <a xmlns="" href="//www.netkiller.cn/home/donations.html">打赏(Donations)</a> | <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 13 章 Util</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../function/ch12s08.html">上一页</a> </td><th width="60%" align="center">部分 II. JDK Development Kit</th><td width="20%" align="right"> <a accesskey="n" href="java.util.logging.html">下一页</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td><td></td><td><a href="https://zhuanlan.zhihu.com/netkiller"><img src="/images/logo/zhihu-card-default.svg" height="25" /></a></td><td valign="middle"><a href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a></td><td></td><td></td><td></td><td></td></tr></table><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index"></a>第 13 章 Util</h2></div></div></div><div class="toc"><p><strong>目录</strong></p><dl class="toc"><dt><span class="section"><a href="index.html#java.util.Properties">13.1. Properties 处理 *.properties 文件</a></span></dt><dd><dl><dt><span class="section"><a href="index.html#id843">13.1.1. 打开 properties 文件</a></span></dt><dt><span class="section"><a href="index.html#propertyNames">13.1.2. propertyNames()</a></span></dt><dt><span class="section"><a href="index.html#id844">13.1.3. keySet()</a></span></dt><dt><span class="section"><a href="index.html#id845">13.1.4. entrySet()</a></span></dt><dt><span class="section"><a href="index.html#id846">13.1.5. 方法中返回 Properties</a></span></dt><dt><span class="section"><a href="index.html#id847">13.1.6. </a></span></dt><dt><span class="section"><a href="index.html#getResourceAsStream">13.1.7. getResourceAsStream()</a></span></dt><dt><span class="section"><a href="index.html#store">13.1.8. store</a></span></dt><dt><span class="section"><a href="index.html#id848">13.1.9. 实现国际化</a></span></dt></dl></dd><dt><span class="section"><a href="java.util.logging.html">13.2. Logging</a></span></dt><dd><dl><dt><span class="section"><a href="java.util.logging.html#id849">13.2.1. console</a></span></dt></dl></dd><dt><span class="section"><a href="java.util.Base64.html">13.3. BASE64</a></span></dt><dt><span class="section"><a href="java.util.Locale.html">13.4. Locale 国际化</a></span></dt><dt><span class="section"><a href="java.util.ResourceBundle.html">13.5. ResourceBundle</a></span></dt><dt><span class="section"><a href="Scanner.html">13.6. Scanner</a></span></dt><dt><span class="section"><a href="java.util.UUID.html">13.7. UUID</a></span></dt><dt><span class="section"><a href="Arrays.equals.html">13.8. Arrays.equals 判断两个数组是否相等</a></span></dt><dt><span class="section"><a href="java.util.Random.html">13.9. Random 随机字符串</a></span></dt><dd><dl><dt><span class="section"><a href="java.util.Random.html#id850">13.9.1. 取 0-n 范围内随机数</a></span></dt><dt><span class="section"><a href="java.util.Random.html#id851">13.9.2. 指定随机数范围</a></span></dt></dl></dd><dt><span class="section"><a href="java.util.zip.CRC32.html">13.10. CRC32</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="java.util.Properties"></a>13.1. Properties 处理 *.properties 文件</h2></div></div></div><pre class="programlisting">
		
package netkiller.test;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.FileInputStream;
import java.util.Properties;

public class PropertiesTest {

	public static void main(String[] args) {

		System.out.println("Working Directory = " + System.getProperty("user.dir"));

		Properties ps = new Properties();
		try {
			ps.load(new FileInputStream("netkiller.properties"));
		} catch (FileNotFoundException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		System.out.println(ps.getProperty("key"));
	}

}
		
		</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id843"></a>13.1.1. 打开 properties 文件</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id841"></a>13.1.1.1. 文件方式打开</h4></div></div></div><pre class="programlisting">
				
BufferedReader br = null;
Properties properties = new Properties();
br = new BufferedReader(new InputStreamReader(new  FileInputStream(new File("data.properties")), "UTF8"));
properties.load(br);				
				
				</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id842"></a>13.1.1.2. 输入流</h4></div></div></div><pre class="programlisting">
				
Properties properties = new Properties();
InputStream in = getClass().getResourceAsStream("/IcisReport.properties");
properties.load(in);
Set keyValue = properties.keySet();
for (Iterator it = keyValue.iterator(); it.hasNext();)
{
	String key = (String) it.next();
}				
				
				</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="propertyNames"></a>13.1.2. propertyNames()</h3></div></div></div><pre class="programlisting">
			
package cn.netkiller.properties;

import java.util.Enumeration;
import java.util.Map.Entry;
import java.util.Properties;

public class PropertiesTest {

	public PropertiesTest() {
		// TODO Auto-generated constructor stub
	}

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Properties properties = new Properties();

		properties.put("K1", "V1");
		properties.put("K2", "V2");

		for (Entry&lt;Object, Object&gt; x : properties.entrySet()) {
			System.out.println(x.getKey() + " " + x.getValue());
		}
		
		Enumeration&lt;?&gt; e = properties.propertyNames();
		while (e.hasMoreElements()) {
			String key = (String) e.nextElement();
			String value = properties.getProperty(key);
			System.out.println(key + ": " + value);
		}
	}

}
			
			</pre><pre class="programlisting">
			
import java.io.FileInputStream;
import java.util.Enumeration;
import java.util.Properties;

public class MainClass {
  public static void main(String args[]) throws Exception {
    Properties p = new Properties();
    p.load(new FileInputStream("test.properties"));
    Enumeration e = p.propertyNames();

    for (; e.hasMoreElements();) {
      System.out.println(e.nextElement());

    }
  }
}			
			
			</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id844"></a>13.1.3. keySet()</h3></div></div></div><pre class="programlisting">
			
package cn.netkiller.properties;

import java.util.Properties;
import java.util.Set;

public class PropertiesTest {

	public PropertiesTest() {
		// TODO Auto-generated constructor stub
	}

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Properties properties = new Properties();

		properties.put("K1", "V1");
		properties.put("K2", "V2");

		Set&lt;Object&gt; states = properties.keySet();

		for (Object name : states)
			System.out.println("The value of " + name + " is " + properties.getProperty((String) name) + ".");
	}

}

			
			</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id845"></a>13.1.4. entrySet()</h3></div></div></div><pre class="programlisting">
			
package cn.netkiller.properties;

import java.util.Map.Entry;
import java.util.Properties;

public class PropertiesTest {

	public PropertiesTest() {
		// TODO Auto-generated constructor stub
	}

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Properties properties = new Properties();

		properties.put("K1", "V1");
		properties.put("K2", "V2");

		for (Entry&lt;Object, Object&gt; x : properties.entrySet()) {
			System.out.println(x.getKey() + " " + x.getValue());
		}
	}

}
			
			</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id846"></a>13.1.5. 方法中返回 Properties</h3></div></div></div><pre class="programlisting">
			
	@RequestMapping("/host")
	public Enumeration&lt;Object&gt; host() throws IOException {
		Properties properties = PropertiesLoaderUtils.loadProperties(new ClassPathResource(String.format("/%s.properties", "host")));
		return properties.keys();
	}

	@RequestMapping("/mail")
	public Collection&lt;Object&gt; mail() throws IOException {
		Properties properties = PropertiesLoaderUtils.loadProperties(new ClassPathResource(String.format("/%s.properties", "mail")));
		return properties.values();
	}
	@RequestMapping("/nameserver")
	public Set&lt;Entry&lt;Object, Object&gt;&gt; nameserver() throws IOException {
		Properties properties = PropertiesLoaderUtils.loadProperties(new ClassPathResource(String.format("/%s.properties", "dns")));
		return properties.entrySet();
	}
	@RequestMapping("/dns")
	public Properties dns() throws IOException {
		Properties properties = PropertiesLoaderUtils.loadProperties(new ClassPathResource(String.format("/%s.properties", "dns")));
		return properties;
	}	
			
			</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id847"></a>13.1.6. </h3></div></div></div><pre class="programlisting">
			
			
			</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="getResourceAsStream"></a>13.1.7. getResourceAsStream()</h3></div></div></div><pre class="programlisting">
			
Properties prop = new Properties();
prop.load(getServletContext().getResourceAsStream("/WEB-INF/resource/sample.properties"));
			
			</pre><pre class="programlisting">
			
prop.load(Thread.currentThread().getContextClassLoader().getResourceAsStream("netkiller.properties"));
			
			</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="store"></a>13.1.8. store</h3></div></div></div><pre class="programlisting">
			
package cn.netkiller.config;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.util.Properties;

public class Config {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Properties prop = new Properties();
		OutputStream output = null;

		try {

			output = new FileOutputStream("config.properties");

			// set the properties value
			prop.setProperty("host", "localhost");
			prop.setProperty("port", "8000");
			prop.setProperty("user", "neo");
			prop.setProperty("pass", "password");

			// save properties to project root folder
			prop.store(output, null);

		} catch (IOException io) {
			io.printStackTrace();
		} finally {
			if (output != null) {
				try {
					output.close();
				} catch (IOException e) {
					e.printStackTrace();
				}
			}

		}
	}

}
			
			</pre><p>getProperty 取出key的值</p><pre class="programlisting">
			
package cn.netkiller.config;

import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

public class LoadConfig {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Properties prop = new Properties();
		InputStream input = null;

		try {

			input = new FileInputStream("config.properties");

			// load a properties file
			prop.load(input);

			// get the property value and print it out
			System.out.println(prop.getProperty("host"));
			System.out.println(prop.getProperty("port"));
			System.out.println(prop.getProperty("user"));
			System.out.println(prop.getProperty("pass"));

		} catch (IOException ex) {
			ex.printStackTrace();
		} finally {
			if (input != null) {
				try {
					input.close();
				} catch (IOException e) {
					e.printStackTrace();
				}
			}
		}

	}

}
			
			</pre><p>循环打印所有 Properties 内容</p><pre class="programlisting">
			
package test;

import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.Enumeration;
import java.util.Properties;

public class Application {

	public static void main(String[] args) {
		Application app = new Application();
		app.config();

	}

	private void config() {
		Properties prop = new Properties();
		InputStream input = null;
		try {

			String filename = "config.properties";

			prop.load(new FileInputStream(filename));

			Enumeration&lt;?&gt; e = prop.propertyNames();
			while (e.hasMoreElements()) {
				String key = (String) e.nextElement();
				String value = prop.getProperty(key);
				System.out.println(key + ": " + value);
			}

		} catch (IOException ex) {
			ex.printStackTrace();
		} finally {
			if (input != null) {
				try {
					input.close();
				} catch (IOException e) {
					e.printStackTrace();
				}
			}
		}
	}

}
			
			</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id848"></a>13.1.9. 实现国际化</h3></div></div></div><p>准备语言包文件 chinese.properties 内容如下</p><pre class="screen">
			
hello=你好世界
			
			</pre><p>english.properties</p><pre class="screen">
			
hello=Helloworld
			
			</pre><pre class="programlisting">
			 
	@GetMapping("/lang")
	public String lang(@RequestHeader String lang) throws IOException {
		System.out.println(lang);
		Properties properties = PropertiesLoaderUtils.loadProperties(new ClassPathResource(lang + ".properties"));
		String tmp = properties.getProperty("hello");
		return tmp;
	}
			 
			</pre><p>测试效果</p><pre class="screen">
			
curl -s -H lang:chinese http://localhost:8080/lang
你好世界

curl -s -H lang:english http://localhost:8080/lang
Helloworld
			
			</pre></div></div></div><div xmlns="" id="SOHUCS"></div><script xmlns="" charset="utf-8" type="text/javascript" src="https://cy-cdn.kuaizhan.com/upload/changyan.js"></script><script xmlns="" type="text/javascript">
			window.changyan.api.config({
			appid: 'cyvwjQUG3',
			conf: 'prod_ef966242df3d8b5acb1e0ee9fc01cafe'
			});
</script><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="../function/ch12s08.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="../index.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="java.util.logging.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">12.8. Supplier / Consumer / Predicate 应用场景 </td><td width="20%" align="center"><a accesskey="h" href="../../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 13.2. Logging</td></tr></table></div><script xmlns="">
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-11694057-1', 'auto');
			ga('send', 'pageview');

		</script><script xmlns="" async="async">
			var _hmt = _hmt || [];
			(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
			})();
</script><script xmlns="" async="async">
			(function(){
			var bp = document.createElement('script');
			var curProtocol = window.location.protocol.split(':')[0];
			if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			}
			else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			}
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(bp, s);
			})();
</script></body></html>