<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>23.4. pom.xml</title><link rel="stylesheet" type="text/css" href="../docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="home" href="../index.html" title="Netkiller Java 手札（版）" /><link rel="up" href="maven.html" title="第 23 章 Apache Maven" /><link rel="prev" href="maven.settings.xml.html" title="23.3. settings.xml 配置" /><link rel="next" href="maven.module.html" title="23.5. Maven Module" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> | <a xmlns="" href="//netkiller.github.io/">简体中文</a> | <a xmlns="" href="http://netkiller.sourceforge.net/">繁体中文</a> | <a xmlns="" href="/journal/index.html">杂文</a>
		| <a xmlns="" href="https://github.com/netkiller">Github</a> | <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> | <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> | <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> | <a xmlns="" href="https://www.youtube.com/user/bg7nyt/videos">Youtube</a> | <a xmlns="" href="//www.netkiller.cn/home/donations.html">打赏(Donations)</a> | <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">23.4. pom.xml</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="maven.settings.xml.html">上一页</a> </td><th width="60%" align="center">第 23 章 Apache Maven</th><td width="20%" align="right"> <a accesskey="n" href="maven.module.html">下一页</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td><td></td><td><a href="https://zhuanlan.zhihu.com/netkiller"><img src="/images/logo/zhihu-card-default.svg" height="25" /></a></td><td valign="middle"><a href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a></td><td></td><td></td><td></td><td></td></tr></table><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="pom.xml"></a>23.4. pom.xml</h2></div></div></div>
		

		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="properties"></a>23.4.1. properties</h3></div></div></div>
			
			<p>定义 properties</p>
			<pre class="screen">
			
&lt;properties&gt;
    &lt;spring.version&gt;4.0.1.RELEASE&lt;/spring.version&gt;
&lt;/properties&gt;
			
			</pre>
			<p>引用 properties</p>
			<pre class="screen">
			
  &lt;!-- Spring dependencies --&gt;
   &lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;
    &lt;version&gt;${spring.version}&lt;/version&gt;
  &lt;/dependency&gt;
			
			</pre>
			<div class="example"><a id="id1951"></a><p class="title"><strong>例 23.1. Maven properties</strong></p><div class="example-contents">
				
				<p>pom.xml 文件</p>
				<pre class="screen">
				
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;

 &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
 &lt;groupId&gt;com.javahash.web&lt;/groupId&gt;
 &lt;artifactId&gt;Spring4MVCHelloWorld&lt;/artifactId&gt;
 &lt;packaging&gt;war&lt;/packaging&gt;
 &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
 &lt;name&gt;Spring4MVCHelloWorld Maven Webapp&lt;/name&gt;
 &lt;url&gt;http://maven.apache.org&lt;/url&gt;

 &lt;properties&gt;
    &lt;spring.version&gt;4.0.1.RELEASE&lt;/spring.version&gt;
 &lt;/properties&gt;

 &lt;dependencies&gt;

    &lt;dependency&gt;
     &lt;groupId&gt;junit&lt;/groupId&gt;
     &lt;artifactId&gt;junit&lt;/artifactId&gt;
     &lt;version&gt;4.12&lt;/version&gt;
     &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;

   &lt;!-- Spring dependencies --&gt;
   &lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;
    &lt;version&gt;${spring.version}&lt;/version&gt;
  &lt;/dependency&gt;

 &lt;dependency&gt;
   &lt;groupId&gt;org.springframework&lt;/groupId&gt;
   &lt;artifactId&gt;spring-web&lt;/artifactId&gt;
   &lt;version&gt;${spring.version}&lt;/version&gt;
 &lt;/dependency&gt;

 &lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
    &lt;version&gt;${spring.version}&lt;/version&gt;
 &lt;/dependency&gt;
&lt;/dependencies&gt;

 &lt;build&gt;
 &lt;finalName&gt;Spring4MVCHelloWorld&lt;/finalName&gt;
 &lt;/build&gt;
&lt;/project&gt;
				
				</pre>
			</div></div><br class="example-break" />
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="java.version"></a>23.4.1.1. java.version</h4></div></div></div>
				
				<pre class="screen">
				
	&lt;properties&gt;
         &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
         &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;/properties&gt;
				
				</pre>
			</div>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id944"></a>23.4.2. 常用的POM属性</h3></div></div></div>
			
			<p>用户可以使用该属性引用POM文件中对应元素的值，常用的POM属性包括：</p>
			<pre class="screen">
			
${project.build.sourceDirectory}：项目的主源码目录，默认为 src/main/java
${project.build.testSourceDirectory}：项目的测试源码目录，默认为 src/test/java
${project.build.directory}：项目构件输出目录，默认为 target/
${project.outputDirectory}：项目主代码编译输出目录，默认为 target/classes/
${project.testOutputDirectory}：项目测试代码编译输出目录，默认为 target/test-classes/
${project.groupId}：项目的 groupId
${project.artifactId}：项目的 artifactId
${project.version}：项目的 version，与 project.version：项目的version，与{version}等价
${project.build.fianlName}：项目打包输出文件的名称。 默 认 为 {project.build.fianlName}：项目打包输出文件的名称。默认为 project.build.fianlName：项目打包输出文件的名称。默认为{project.artifactId}-${project.version}			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="repositories"></a>23.4.3. repositories 仓库配置</h3></div></div></div>
			
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id945"></a>23.4.3.1. 默认仓库</h4></div></div></div>
				
				<pre class="screen">
				
		&lt;repository&gt;
			&lt;id&gt;mvnrepository&lt;/id&gt;
			&lt;name&gt;mvnrepository&lt;/name&gt;
			&lt;url&gt;http://www.mvnrepository.com/&lt;/url&gt;
			&lt;layout&gt;default&lt;/layout&gt;
			&lt;releases&gt;
				&lt;enabled&gt;true&lt;/enabled&gt;
			&lt;/releases&gt;
			&lt;snapshots&gt;
				&lt;enabled&gt;false&lt;/enabled&gt;
			&lt;/snapshots&gt;
		&lt;/repository&gt;
				
				</pre>

			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="maven.aliyun.com"></a>23.4.3.2. 阿里云仓库</h4></div></div></div>
				
				<pre class="screen">
				
	&lt;repositories&gt;
		&lt;repository&gt;
			&lt;id&gt;alimaven&lt;/id&gt;
			&lt;name&gt;aliyun maven&lt;/name&gt;
			&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;
			&lt;releases&gt;
				&lt;enabled&gt;true&lt;/enabled&gt;
			&lt;/releases&gt;
			&lt;snapshots&gt;
				&lt;enabled&gt;false&lt;/enabled&gt;
			&lt;/snapshots&gt;
		&lt;/repository&gt;
	&lt;/repositories&gt;				
				
				</pre>
			</div>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="dependencies"></a>23.4.4. dependencies</h3></div></div></div>
			
			<pre class="screen">
			
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;3.8.1&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
    	&lt;groupId&gt;org.apache.struts&lt;/groupId&gt;
    	&lt;artifactId&gt;struts2-core&lt;/artifactId&gt;
    	&lt;version&gt;2.3.24.1&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="dependencyManagement"></a>23.4.5. dependencyManagement</h3></div></div></div>
			
			<p>声明父项目引用包的版本号。</p>
			<pre class="screen">
			
	&lt;dependencyManagement&gt;
		&lt;dependencies&gt;
			&lt;dependency&gt;
				&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
				&lt;artifactId&gt;spring-cloud-netflix&lt;/artifactId&gt;
				&lt;version&gt;1.3.5.RELEASE&lt;/version&gt;
				&lt;type&gt;pom&lt;/type&gt;
				&lt;scope&gt;import&lt;/scope&gt;
			&lt;/dependency&gt;
			&lt;dependency&gt;
				&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
				&lt;artifactId&gt;spring-cloud-config&lt;/artifactId&gt;
				&lt;version&gt;1.3.3.RELEASE&lt;/version&gt;
				&lt;type&gt;pom&lt;/type&gt;
				&lt;scope&gt;import&lt;/scope&gt;
			&lt;/dependency&gt;
		&lt;/dependencies&gt;
	&lt;/dependencyManagement&gt;			
			
			</pre>

		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="build"></a>23.4.6. build</h3></div></div></div>
			
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id946"></a>23.4.6.1. finalName</h4></div></div></div>
				
				<p>最终 jar 包得名字</p>
				<pre class="screen">
			
&lt;build&gt;
		&lt;finalName&gt;crawler&lt;/finalName&gt;
&lt;/build&gt;
			
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id947"></a>23.4.6.2. sourceDirectory</h4></div></div></div>
				
				<p>编译源码目录</p>
				<pre class="screen">
			
&lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;				
			
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="resources"></a>23.4.6.3. resources 文件处理</h4></div></div></div>
				
				<p>resources 用来处理 src/main/resources 目录中得内容</p>
				<pre class="screen">
			
		&lt;resources&gt;
			&lt;resource&gt;
				&lt;directory&gt;src/main/resources&lt;/directory&gt;
				&lt;targetPath&gt;${project.build.directory}/conf&lt;/targetPath&gt;
			&lt;/resource&gt;
			&lt;resource&gt;
				&lt;directory&gt;src/main/resources&lt;/directory&gt;
				&lt;excludes&gt;
					&lt;exclude&gt;development.properties&lt;/exclude&gt;
				&lt;/excludes&gt;
			&lt;/resource&gt;
			&lt;resource&gt;
				&lt;directory&gt;src/main/resources&lt;/directory&gt;
				&lt;includes&gt;
					&lt;include&gt;development.properties&lt;/include&gt;
				&lt;/includes&gt;
				&lt;targetPath&gt;resources&lt;/targetPath&gt;
			&lt;/resource&gt;
			
			&lt;resource&gt;
				&lt;directory&gt;lib&lt;/directory&gt;
				&lt;includes&gt;
					&lt;include&gt;**/*.sh&lt;/include&gt;
					&lt;include&gt;**/*.bat&lt;/include&gt;
				&lt;/includes&gt;
				&lt;targetPath&gt;${project.build.directory}/lib&lt;/targetPath&gt;
			&lt;/resource&gt;
		&lt;/resources&gt;
				
			
				</pre>
				<div class="example"><a id="id1952"></a><p class="title"><strong>例 23.2. 将本地 lib/*.jar 包添加到项目中</strong></p><div class="example-contents">
					
					<pre class="screen">
					
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;cn.netkiller&lt;/groupId&gt;
	&lt;artifactId&gt;nacos&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
	&lt;name&gt;nacos&lt;/name&gt;
	&lt;description&gt;Nacos Demo&lt;/description&gt;

	&lt;properties&gt;
		&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
	&lt;/properties&gt;
	&lt;parent&gt;
		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
		&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
		&lt;version&gt;2.6.2&lt;/version&gt;
		&lt;relativePath /&gt;
	&lt;/parent&gt;
	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;cn.netkiller&lt;/groupId&gt;
			&lt;artifactId&gt;demo&lt;/artifactId&gt;
			&lt;version&gt;1.0.0&lt;/version&gt;
			&lt;scope&gt;system&lt;/scope&gt;
			&lt;systemPath&gt;${project.basedir}/lib/demo-1.0.0.jar&lt;/systemPath&gt;
			&lt;exclusions&gt;
				&lt;exclusion&gt;
					&lt;groupId&gt;org.slf4j&lt;/groupId&gt;
					&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
				&lt;/exclusion&gt;
			&lt;/exclusions&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
	&lt;build&gt;
		&lt;resources&gt;
			&lt;resource&gt;
				&lt;directory&gt;lib&lt;/directory&gt;
				&lt;targetPath&gt;BOOT-INF/lib/&lt;/targetPath&gt;
				&lt;includes&gt;
					&lt;include&gt;**/*.jar&lt;/include&gt;
				&lt;/includes&gt;
			&lt;/resource&gt;
		&lt;/resources&gt;
	&lt;/build&gt;

&lt;/project&gt;					
					
					</pre>
				</div></div><br class="example-break" />
				<div class="example"><a id="id1953"></a><p class="title"><strong>例 23.3. 将本地 src/resources 打包到项目</strong></p><div class="example-contents">
					
					<p>将资源文件编译后复制到 WEB-INF/classes 目录中</p>
					<pre class="screen">
				
		&lt;resources&gt;
			&lt;resource&gt;
				&lt;directory&gt;src/resources&lt;/directory&gt;
			&lt;/resource&gt;
		&lt;/resources&gt;			
				
					</pre>
					<p>include / exclude</p>
					<pre class="screen">
				
&lt;resources&gt;  
    &lt;!-- Filter jdbc.properties &amp; mail.properties. NOTE: We don't filter applicationContext-infrastructure.xml,   
        let it go with spring's resource process mechanism. --&gt;  
    &lt;resource&gt;  
        &lt;directory&gt;src/main/resources&lt;/directory&gt;  
        &lt;filtering&gt;true&lt;/filtering&gt;  
        &lt;includes&gt;  
            &lt;include&gt;jdbc.properties&lt;/include&gt;  
            &lt;include&gt;mail.properties&lt;/include&gt;  
        &lt;/includes&gt;  
    &lt;/resource&gt;  
    &lt;!-- Include other files as resources files. --&gt;  
    &lt;resource&gt;  
        &lt;directory&gt;src/main/resources&lt;/directory&gt;  
        &lt;filtering&gt;false&lt;/filtering&gt;  
        &lt;excludes&gt;  
            &lt;exclude&gt;jdbc.properties&lt;/exclude&gt;  
            &lt;exclude&gt;mail.properties&lt;/exclude&gt;  
        &lt;/excludes&gt;  
    &lt;/resource&gt;  
&lt;/resources&gt;
				
					</pre>
				</div></div><br class="example-break" />
			</div>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="plugins"></a>23.4.7. plugins</h3></div></div></div>
			
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id948"></a>23.4.7.1. 跳过Unit test</h4></div></div></div>
				

				<pre class="screen">
			
&lt;project&gt;
  [...]
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
        &lt;configuration&gt;
          &lt;skip&gt;true&lt;/skip&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
  [...]
&lt;/project&gt;			
			
				</pre>

			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id949"></a>23.4.7.2. maven-shade-plugin</h4></div></div></div>
				
				<pre class="screen">
				
			&lt;plugin&gt;
				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
				&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
				&lt;version&gt;1.4&lt;/version&gt;
				&lt;executions&gt;
					&lt;execution&gt;
						&lt;phase&gt;package&lt;/phase&gt;
						&lt;goals&gt;
							&lt;goal&gt;shade&lt;/goal&gt;
						&lt;/goals&gt;
						&lt;configuration&gt;
							&lt;transformers&gt;
								&lt;transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer"&gt;
									&lt;mainClass&gt;cn.netkiller.Oracle&lt;/mainClass&gt;
								&lt;/transformer&gt;
							&lt;/transformers&gt;
						&lt;/configuration&gt;
					&lt;/execution&gt;
				&lt;/executions&gt;
			&lt;/plugin&gt;				
				
				</pre>
			</div>
		</div>
	</div><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="maven.settings.xml.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="maven.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="maven.module.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">23.3. settings.xml 配置 </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 23.5. Maven Module</td></tr></table></div><script xmlns="">
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-11694057-1', 'auto');
			ga('send', 'pageview');

		</script><script xmlns="" async="async">
			var _hmt = _hmt || [];
			(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
			})();
</script><script xmlns="" async="async">
			(function(){
			var bp = document.createElement('script');
			var curProtocol = window.location.protocol.split(':')[0];
			if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			}
			else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			}
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(bp, s);
			})();
</script></body></html>