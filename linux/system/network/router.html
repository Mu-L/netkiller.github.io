<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>11.10.Â Linux IP And Router</title><link rel="stylesheet" type="text/css" href="../../docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><meta name="keywords" content="&#10;&#9;&#9;&#9;&#9;bash,bunzip2,busybox,bzcat,bzcmp,bzdiff,bzegrep,bzexe,bzfgrep,bzgrep,bzip2,bzip2recover,bzless,bzmore,cat,chgrp,chmod,chown,chvt,cp,cpio,dash,date,dbus-cleanup-sockets,dbus-daemon,dbus-uuidgen,dd,df,dir,dmesg,dnsdomainname,domainname,dumpkeys,echo,ed,egrep,false,fgconsole,fgrep,fuser,fusermount,grep,gunzip,gzexe,gzip,hostname,ip,kbd_mode,kill,less,lessecho,lessfile,lesskey,lesspipe,ln,loadkeys,login,ls,lsmod,mkdir,mknod,mktemp,more,mount,mountpoint,mt,mt-gnu,mv,nano,nc,nc.openbsd,netcat,netstat,nisdomainname,ntfs-3g,ntfs-3g.probe,ntfs-3g.secaudit,ntfs-3g.usermap,open,openvt,pidof,ping,ping6,plymouth,ps,pwd,rbash,readlink,rm,rmdir,rnano,run-parts,sed,setfont,setupcon,sh,sh.distrib,sleep,static-sh,stty,su,sync,tailf,tar,tempfile,touch,true,ulockmgr_server,umount,uname,uncompress,unicode_start,vdir,which,ypdomainname,zcat,zcmp,zdiff,zegrep,zfgrep,zforce,zgrep,zless,zmore,znew,,/sbin/:,acpi_available,apm_available,apparmor_parser,badblocks,blkid,blockdev,bootlogd,cfdisk,crda,ctrlaltdel,debugfs,depmod,dhclient,dhclient3,dhclient-script,dmsetup,dosfsck,dosfslabel,dump,dumpe2fs,e2fsck,e2image,e2label,e2undo,ethtool,fdisk,findfs,fsck,fsck.cramfs,fsck.ext2,fsck.ext3,fsck.ext4,fsck.ext4dev,fsck.minix,fsck.msdos,fsck.nfs,fsck.vfat,fstab-decode,getty,halt,hdparm,hwclock,ifconfig,ifdown,ifquery,ifup,init,initctl,insmod,insserv,installkernel,ip,ip6tables,ip6tables-restore,ip6tables-save,ipmaddr,iptables,iptables-restore,iptables-save,iptunnel,isosize,iwconfig,iwevent,iwgetid,iwlist,iwpriv,iwspy,kbdrate,killall5,ldconfig,ldconfig.real,logsave,losetup,lsmod,MAKEDEV,mii-tool,mkdosfs,mke2fs,mkfs,mkfs.bfs,mkfs.cramfs,mkfs.ext2,mkfs.ext3,mkfs.ext4,mkfs.ext4dev,mkfs.minix,mkfs.msdos,mkfs.vfat,mkhomedir_helper,mkswap,modinfo,modprobe,mountall,mount.fuse,mount.nfs,mount.nfs4,mount.ntfs,mount.ntfs-3g,nameif,on_ac_power,pam_tally,parted,partprobe,pivot_root,plipconfig,plymouthd,pmap_dump,pmap_set,portmap,poweroff,rarp,raw,rdump,reboot,regdbdump,reload,resize2fs,restart,restore,rfkill,rmmod,route,rpc.statd,rrestore,rtacct,rtmon,runlevel,sfdisk,shadowconfig,showmount,shutdown,slattach,sm-notify,ss,start,startpar,start-stop-daemon,status,stop,sulogin,swapoff,swapon,switch_root,sysctl,tc,telinit,tune2fs,udevadm,udevd,umount.nfs,umount.nfs4,unix_chkpwd,unix_update,upstart-udev-bridge,ureadahead,wipefs,wpa_action,wpa_cli,wpa_supplicant&#10;&#9;&#9;&#9;, &#10;&#9;&#9;&#9;&#9;a2p,acyclic,addftinfo,addpart,afmtodit,animate,anytopnm,apg,apgbfm,apport-bug,apport-cli,apport-collect,apport-unpack,apropos,apt-cache,apt-cdrom,apt-config,apt-extracttemplates,apt-ftparchive,apt-get,aptitude,aptitude-create-state-bundle,aptitude-run-state-bundle,apt-key,apt-mark,apt-sortpkgs,arch,arping,asciitopgm,at,atktopbm,atq,atrm,awk,base64,basename,bashbug,batch,bc,bcomps,bconsole,bdftopcf,bdftops,bdftruncate,bioradtopgm,bmptopnm,bmptoppm,brushtopbm,bsd-mailx,bsd-write,byobu,byobu-config,byobu-export,byobu-janitor,byobu-launch,byobu-launcher,byobu-launcher-install,byobu-launcher-uninstall,byobu-reconnect-sockets,byobu-select-profile,byobu-select-session,byobu-status,byobu-status-detail,c2ph,cal,calendar,captoinfo,catchsegv,catman,cautious-launcher,ccomps,chage,chattr,chcon,check-bios-nx,check-language-support,chem,chfn,chkdupexe,chrt,chsh,circo,ckbcomp,ck-history,ck-launch-session,ck-list-sessions,cksum,clear,clear_console,cmp,cmuwmtopbm,codepage,col,colcrt,colrm,column,comm,compare,compose,composite,config_data,conjure,convert,corelist,cpan,cpan2dist,cpanp,cpanp-run-perl,cpp,cpp-4.4,createrepo,c_rehash,crontab,csplit,ctstat,curl,curlftpfs,cut,dbilogstrip,dbiprof,dbiproxy,dbmmanage,dbus-monitor,dbus-send,ddate,deallocvt,debconf,debconf-apt-progress,debconf-communicate,debconf-copydb,debconf-escape,debconf-set-selections,debconf-show,defoma,defoma-app,defoma-font,defoma-hints,defoma-id,defoma-psfont-installer,defoma-subst,defoma-user,delpart,dh_bash-completion,dh_installdefoma,dh_installxmlcatalogs,dh_pycentral,dh_pysupport,dialog,diff,diff3,diffimg,dig,dijkstra,dircolors,dirname,display,do-release-upgrade,dot,dot2gxl,dotlockfile,dotty,dpkg,dpkg-deb,dpkg-divert,dpkg-query,dpkg-split,dpkg-statoverride,dpkg-trigger,dprofpp,du,dumphint,dumpkeys,dvipdf,easy_install,easy_install-2.6,edit,editor,eject,enc2xs,encode_keychange,env,envsubst,eps2eps,epsffit,eqn,eqn2graph,ex,expand,expiry,expr,extractres,eyuvtoppm,factor,faillog,fallocate,fc-cache,fc-cat,fc-list,fc-match,fc-query,fc-scan,fdp,fiascotopnm,file,find,find2perl,findsmb,fitstopnm,fixdlsrps,fixfmps,fixmacps,fixproc,fixpsditps,fixpspps,fixscribeps,fixtpps,fixwfwps,fixwpps,fixwwps,flock,flow-capture,flow-cat,flow-dscan,flow-expire,flow-export,flow-fanout,flow-filter,flow-gen,flow-header,flow-import,flow-log2rrd,flow-mask,flow-merge,flow-nfilter,flow-print,flow-receive,flow-report,flow-rpt2rrd,flow-rptfmt,flow-send,flow-split,flow-stat,flow-tag,flow-xlate,fmt,fold,font2c,fontconfig-voodoo,fonttosfnt,fping,fping6,free,fribidi,from,fstopgm,ftp,funzip,g3topbm,gawk,gc,gdiffmk,gdk-pixbuf-query-loaders,gemtopbm,gemtopnm,gendiff,geqn,GET,getafm,getconf,getent,getkeycodes,getopt,gettext,gettext.sh,ghostscript,giftopnm,ginstall-info,gio-querymodules,git,git-receive-pack,git-shell,git-upload-archive,git-upload-pack,gmetric,gnokii,gnuplot,gnuplot-nox,gouldtoppm,gpasswd,gpg,gpgsplit,gpgv,gpg-zip,gpic,grap2graph,grn,grodvi,groff,groffer,grog,grolbp,grolj4,grops,grotty,groups,grub-bin2h,grub-editenv,grub-fstest,grub-mkelfimage,grub-mkfont,grub-mkimage,grub-mkisofs,grub-mkpasswd-pbkdf2,grub-mkrelpath,grub-mkrescue,grub-script-check,gs,gsbj,gsdj,gsdj500,gslj,gslp,gsnd,gstat,gtbl,gtk-query-immodules-2.0,gtk-update-icon-cache,gvcolor,gvimtutor,gvpack,gvpr,gxditview,gxl2dot,h2ph,h2xs,hd,head,HEAD,helpztags,hexdump,hipstopgm,host,hostid,hpftodit,htdbm,htdigest,htpasswd,i386,icontopbm,iconv,id,identify,igawk,ilbmtoppm,imgtoppm,import,includeres,indexer,indxbib,info,infobrowser,infocmp,infokey,infotocap,innochecksum,innotop,install,install-info,instmodsh,ionice,iostat,ipcmk,ipcrm,ipcs,ipmicmd,ipmilan,ipmish,ipmitool,ipmi_ui,iptables-xml,join,jpegtopnm,killall,kvm-ok,l4p-tmpl,landscape-sysinfo,last,lastb,lastlog,lcf,ldd,leaftoppm,lefty,less,lessecho,lessfile,lesskey,lesspipe,lexgrog,libnetcfg,line,link,linux32,linux64,linux-boot-prober,lispmtopgm,lkbib,lneato,lnstat,loadkeys,loadunimap,locale,localedef,locate,lockfile-check,lockfile-create,lockfile-remove,lockfile-touch,logger,logname,look,lookbib,lorder,lsattr,lsb_release,lscpu,lshw,lsof,lspci,lspgpot,lsusb,ltrace,lwp-download,lwp-dump,lwp-mirror,lwp-request,lwp-rget,lzcat,lzma,macptopbm,mail,Mail,mail-lock,mailq,mail-touchlock,mail-unlock,mailx,make,make-memtest86+-boot-floppy,make_method,man,mandb,manhole,manpath,mapscrn,mawk,mcookie,md5sum,md5sum.textutils,mdatopbm,memcached,mesg,mgrtopbm,mkfifo,mkfontdir,mkfontscale,mk_modmap,mktap,mlocate,mmroff,modifyrepo,mogrify,montage,motd+shell,mpstat,msql2mysql,mtr,mtvtoppm,munin-check,munin-cron,munindoc,mutt,mutt_dotlock,myisamchk,myisam_ftdump,myisamlog,myisampack,my_print_defaults,mysql,mysqlaccess,mysqladmin,mysqlanalyze,mysqlbinlog,mysqlbug,mysqlcheck,mysql_client_test,mysql_client_test_embedded,mysql_convert_table_format,mysqld_multi,mysqld_safe,mysqldump,mysqldumpslow,mysql_find_rows,mysql_fix_extensions,mysql_fix_privilege_tables,mysqlhotcopy,mysqlimport,mysql_install_db,mysqloptimize,mysqlrepair,mysqlreport,mysql_secure_installation,mysql_setpermission,mysqlshow,mysqlslap,mysqltest,mysqltest_embedded,mysql_tzinfo_to_sql,mysql_upgrade,mysql_waitpid,mysql_zap,mytop,namei,nano,nawk,ncal,ncat,ncftp,ncftp3,ncftpbatch,ncftpbookmarks,ncftpget,ncftpls,ncftpput,ncftpspooler,ncurses5-config,ncursesw5-config,ndiff,neato,neotoppm,neqn,net,netkit-ftp,net.samba3,net-snmp-config,netstat-nat,newaliases,newgrp,ngettext,nice,nl,nmap,nmblookup,nmblookup.samba3,nmon,nohup,nop,nroff,nslookup,nstat,nsupdate,od,oldfind,omshell,on_ac_power,openipmicmd,openipmish,openssl,openssl-vulnkey,os-prober,pager,palmtopnm,pamcut,pamdeinterlace,pamdice,pamfile,pamoil,pamstack,pamstretch,pamstretch-gen,paperconf,parsechangelog,partx,passwd,paste,patch,pathchk,pbmclean,pbmlife,pbmmake,pbmmask,pbmpage,pbmpscale,pbmreduce,pbmtext,pbmtextps,pbmto10x,pbmtoascii,pbmtoatk,pbmtobbnbg,pbmtocmuwm,pbmtoepsi,pbmtoepson,pbmtog3,pbmtogem,pbmtogo,pbmtoicon,pbmtolj,pbmtomacp,pbmtomda,pbmtomgr,pbmtonokia,pbmtopgm,pbmtopi3,pbmtoplot,pbmtoppa,pbmtopsg3,pbmtoptx,pbmtowbmp,pbmtox10bm,pbmtoxbm,pbmtoybm,pbmtozinc,pbmupc,pcimodules,pcretest,pcxtoppm,pdb,pdb2.6,pdb3,pdb3.1,pdf2dsc,pdf2ps,pdfopt,pdfroff,pear,peardev,pecl,peekfd,perl,perl5.10.1,perlbug,perldoc,perlivp,perlthanks,perror,pf2afm,pfbtopfa,pfbtops,pfc,pftp,pg,pgawk,pgmbentley,pgmcrater,pgmedge,pgmenhance,pgmhist,pgmkernel,pgmnoise,pgmnorm,pgmoil,pgmramp,pgmslice,pgmtexture,pgmtofs,pgmtolispm,pgmtopbm,pgmtoppm,pgrep,php,php5,pi1toppm,pi3topbm,pic,pic2graph,pico,piconv,pidstat,pinky,pip,pjtoppm,pkill,pl2pm,plog,pmap,pngtopnm,pnmalias,pnmarith,pnmcat,pnmcolormap,pnmcomp,pnmconvol,pnmcrop,pnmcut,pnmdepth,pnmenlarge,pnmfile,pnmflip,pnmgamma,pnmhisteq,pnmhistmap,pnmindex,pnminterp,pnminterp-gen,pnminvert,pnmmargin,pnmmontage,pnmnlfilt,pnmnoraw,pnmnorm,pnmpad,pnmpaste,pnmpsnr,pnmquant,pnmremap,pnmrotate,pnmscale,pnmscalefixed,pnmshear,pnmsmooth,pnmsplit,pnmtile,pnmtoddif,pnmtofiasco,pnmtofits,pnmtojpeg,pnmtopalm,pnmtoplainpnm,pnmtopng,pnmtops,pnmtorast,pnmtorle,pnmtosgi,pnmtosir,pnmtotiff,pnmtotiffcmyk,pnmtoxwd,pod2html,pod2latex,pod2man,pod2text,pod2usage,podchecker,podselect,poff,pon,POST,post-grohtml,ppm3d,ppmbrighten,ppmchange,ppmcie,ppmcolormask,ppmcolors,ppmdim,ppmdist,ppmdither,ppmfade,ppmflash,ppmforge,ppmhist,ppmlabel,ppmmake,ppmmix,ppmnorm,ppmntsc,ppmpat,ppmquant,ppmquantall,ppmqvga,ppmrainbow,ppmrelief,ppmshadow,ppmshift,ppmspread,ppmtoacad,ppmtobmp,ppmtoeyuv,ppmtogif,ppmtoicr,ppmtoilbm,ppmtojpeg,ppmtoleaf,ppmtolj,ppmtomap,ppmtomitsu,ppmtompeg,ppmtoneo,ppmtopcx,ppmtopgm,ppmtopi1,ppmtopict,ppmtopj,ppmtopuzz,ppmtorgb3,ppmtosixel,ppmtotga,ppmtouil,ppmtowinicon,ppmtoxpm,ppmtoyuv,ppmtoyuvsplit,ppmtv,pr,preconv,pre-grohtml,prename,print,printafm,printenv,printerbanner,printf,prove,prtstat,prune,ps2ascii,ps2epsi,ps2pdf,ps2pdf12,ps2pdf13,ps2pdf14,ps2pdfwr,ps2ps,ps2ps2,ps2txt,psbook,psed,psfaddtable,psfgettable,psfstriptable,psfxtable,psidtopgm,psmerge,psnup,psresize,psselect,pstopnm,pstops,pstree,pstree.x11,pstruct,ptar,ptardiff,ptx,pwdx,py3_compilefiles,pycentral,pyclean,pycompile,py_compilefiles,pydoc,pydoc2.6,pydoc3,pydoc3.1,pygettext,pygettext2.6,pygettext3,pygettext3.1,pyhtmlizer,python,python2,python2.6,python3,python3.1,pyversions,qrttoppm,rasttopnm,rawtopgm,rawtoppm,rcp,red,refer,rename,rename.ul,renice,replace,report-hw,reset,resolveip,resolve_stack_dump,rev,rgb3toppm,rgrep,rletopnm,rlogin,rmcp_ping,roff2dvi,roff2html,roff2pdf,roff2ps,roff2text,roff2x,routef,routel,rpcclient,rpcinfo,rpm,rpm2cpio,rpmbuild,rpmdb,rpmgraph,rpmquery,rpmsign,rpmverify,rrdcgi,rrdtool,rrdupdate,rsh,rsync,rtstat,runcon,run-mailcap,rview,rvim,s2p,sadf,sar,sar.sysstat,savelog,sbigtopgm,sccmap,scp,screen,screendump,screen-launcher,screen-profiles-status,script,scriptreplay,sdiff,search,searchd,see,select-editor,sendsms,sensible-browser,sensible-editor,sensible-pager,sensors,sensors-conf-convert,seq,service,setarch,setkeycodes,setleds,setlogcons,setmetamode,setpci,setsid,setterm,sftp,sg,sgitopnm,sha1sum,sha224sum,sha256sum,sha384sum,sha512sum,shasum,showchar,showconsolefont,showkey,shred,shuf,sirtopnm,skill,slabtop,sldtoppm,slogin,smbcacls,smbclient,smbcquotas,smbget,smbpasswd,smbspool,smbtar,smbtree,smime_keys,snice,snmpbulkget,snmpbulkwalk,snmpconf,snmpdelta,snmpdf,snmpget,snmpgetnext,snmpinform,snmpkey,snmpnetstat,snmpset,snmpstatus,snmptable,snmptest,snmptranslate,snmptrap,snmpusm,snmpvacm,snmpwalk,soelim,solterm,sort,spctoppm,spelldump,splain,split,splitfont,sputoppm,ssh,ssh-add,ssh-agent,ssh-argv0,ssh-copy-id,sshfs,ssh-keygen,ssh-keyscan,ssh-vulnkey,st4topgm,stat,strace,stream,sudo,sudoedit,sum,svn,svnadmin,svnauthz-validate,svndumpfilter,svnlook,svnmucc,svn-populate-node-origins-index,svnserve,svnsync,svnversion,tabs,tac,tail,tap2deb,tap2rpm,tapconvert,tasksel,taskset,tbl,tee,telnet,telnet.netkit,test,testparm,testparm.samba3,tfmtodit,tgatoppm,thinkjettopbm,tic,tifftopnm,time,tload,toe,top,touch,tput,tr,tracepath,tracepath6,traceroute6,traceroute6.iputils,traptoemail,tred,trial,troff,truncate,tset,tsort,tty,twistd,twopi,tzselect,ubuntu-bug,ubuntu-support-status,ucf,ucfq,ucfr,ucs2any,ul,unattended-upgrade,unattended-upgrades,unexpand,unflatten,unicode_stop,uniq,unlink,unlzma,unshare,unzip,unzipsfx,update-alternatives,updatedb,updatedb.mlocate,update-mime-database,update-mime-database.real,update-pciids,update-perl-sax-parsers,uptime,usb-devices,users,uuidgen,vi,view,vim,vim.basic,vimdiff,vim.tiny,vimtutor,vmstat,volname,w,w3m,w3mman,wall,watch,wbmptopbm,wc,webalizer,webazolver,wftopfa,wget,whatis,whereis,which,whiptail,who,whoami,winicontoppm,wpa_passphrase,w.procps,write,www-browser,X11,x86_64,x86_64-linux-gnu-cpp,x86_64-linux-gnu-cpp-4.4,xargs,xauth,xbmtopbm,ximtoppm,xpmtoppm,xsubpp,xtotroff,xvminitoppm,xwdtopnm,xxd,ybmtopbm,yes,yuvsplittoppm,yuvtoppm,zabbix_get,zdump,zeisstopnm,zipgrep,zipinfo,zsoelim,,/usr/sbin/:,a2dismod,a2dissite,a2enmod,a2ensite,aa-audit,aa-autodep,aa-complain,aa-decode,aa-enforce,aa-genprof,aa-logprof,aa-status,aa-unconfined,ab,accessdb,addgroup,add-shell,adduser,apache2,apache2ctl,apparmor_status,arp,arpd,atd,audit,autodep,bacula-console,bacula-fd,bandwidthd,bcrelay,biosdecode,brctl,bsmtp,btraceback,chat,check_forensic,checkgid,chgpasswd,chpasswd,chroot,ck-log-system-restart,ck-log-system-start,ck-log-system-stop,complain,console-kit-daemon,cpgr,cppw,cron,cytune,dbconfig-generate-include,dbconfig-load-include,defoma-reconfigure,delgroup,deluser,dmidecode,dpkg-divert,dpkg-preconfigure,dpkg-reconfigure,dpkg-statoverride,e2freefrag,enforce,ethtool,exicyclog,exigrep,exim,exim4,exim_checkaccess,exim_convert4r4,exim_dbmbuild,exim_dumpdb,exim_fixdb,exim_lock,eximstats,exim_tidydb,exinext,exipick,exiqgrep,exiqsumm,exiwhat,fancontrol,fdformat,filefrag,genprof,gmetad,gmond,gnokiid,groupadd,groupdel,groupmod,grpck,grpconv,grpunconv,grub-install,grub-mkconfig,grub-mkdevicemap,grub-probe,grub-reboot,grub-set-default,grub-setup,gss_clnt_send_err,gss_destroy_creds,htcacheclean,httxt2dbm,iconvconfig,install-info,install-sgmlcatalog,invoke-rc.d,ip6tables-apply,ipmievd,iptables-apply,irqbalance,isadump,isaset,laptop-detect,ldattach,libgraphviz4-config-update,locale-gen,login.radius,logprof,logresolve,logrotate,lsusb,make-ssl-cert,mgnokiidev,mkinitramfs,mkinitramfs-kpkg,mklost+found,munin-node,munin-node-configure,munin-run,mysqld,mysqlmanager,nagios3,nagios3stats,newusers,nfsstat,nologin,ntop,ntpd,ntpdate,ntpdate-debian,openntpd,openvpn,openvpn-vulnkey,ownership,pam-auth-update,pam_getenv,paperconfig,popcon-largest-unused,popularity-contest,pppconfig,pppd,pppdump,pppoeconf,pppoe-discovery,pppstats,pptpctrl,pptpd,pwck,pwconv,pwmconfig,pwunconv,radacct,radexample,radlogin,radstatus,ramsize,rdev,readprofile,remove-shell,rmail,rmt,rmt-dump,rmt-tar,rootflags,rotatelogs,rpcdebug,rpc.gssd,rpc.idmapd,rsmtp,rsyslogd,rtcwake,runq,safe_finger,sendmail,sensors-detect,service,setvesablank,snmpd,snmptrapd,spine,split-logfile,sshd,syslog2eximlog,tcpd,tcpdchk,tcpdmatch,tcpdump,try-from,tunelp,tzconfig,ufw,unconfined,update-alternatives,update-bootsystem-insserv,update-ca-certificates,update-catalog,update-exim4.conf,update-exim4.conf.template,update-exim4defaults,update-fonts-alias,update-fonts-dir,update-fonts-scale,update-gdkpixbuf-loaders,update-grub,update-grub2,update-gtk-immodules,update-icon-caches,update-inetd,update-info-dir,update-initramfs,update-locale,update-mime,update-pangox-aliases,update-passwd,update-python-modules,update-rc.d,update-rc.d-insserv,update-usbids,update-xmlcatalog,upgrade-from-grub-legacy,useradd,userdel,usermod,uuidd,validlocale,vcstime,vidmode,vigr,vipw,visudo,vpddecode,vsftpd,xl2tpd,zabbix_server,zic&#10;&#9;&#9;&#9;, CentOS, Piranha, NFS, &#10;&#9;&#9;&#9;&#9;arch,awk,basename,bash,cat,cgclassify,cgcreate,cgdelete,cgexec,cgget,cgset,chgrp,chmod,chown,cp,cpio,cut,dash,date,dd,df,dmesg,dnsdomainname,domainname,dumpkeys,echo,egrep,env,ex,false,fgrep,find,gawk,grep,gtar,gunzip,gzip,hostname,ipcalc,iptables-xml,kbd_mode,kill,link,ln,loadkeys,login,ls,lscgroup,lssubsys,mkdir,mknod,mktemp,more,mount,mountpoint,mv,mybash,netstat,nice,nisdomainname,ping,ping6,plymouth,ps,pwd,raw,readlink,rm,rmdir,rpm,rvi,rview,sed,setfont,sh,shell.sh,sleep,sort,stty,su,sync,tar,taskset,touch,tracepath,tracepath6,true,umount,uname,unicode_start,unicode_stop,unlink,usleep,vi,view,ypdomainname,zcat,,/sbin/:,addpart,agetty,arp,arping,audispd,auditctl,auditd,aureport,ausearch,autrace,badblocks,blkid,blockdev,cbq,cfdisk,cgclear,cgconfigparser,cgrulesengd,chkconfig,clock,consoletype,crda,ctrlaltdel,debugfs,delpart,depmod,dracut,dumpe2fs,e2fsck,e2image,e2label,e2undo,ether-wake,ethtool,fdisk,findfs,fixfiles,fsck,fsck.cramfs,fsck.ext2,fsck.ext3,fsck.ext4,fsck.ext4dev,fsfreeze,fstab-decode,fuser,genhostid,getkey,grub,grubby,grub-install,grub-md5-crypt,grub-terminfo,halt,hwclock,ifcfg,ifconfig,ifdown,ifenslave,ifrename,ifup,init,initctl,insmod,insmod.static,install-info,installkernel,ip,ip6tables,ip6tables-multi,ip6tables-restore,ip6tables-save,ipmaddr,iptables,iptables-multi,iptables-restore,iptables-save,iptunnel,iw,iwconfig,iwevent,iwgetid,iwlist,iwpriv,iwspy,killall5,ldconfig,load_policy,logsave,losetup,lsinitrd,lsmod,lspci,MAKEDEV,matchpathcon,mii-diag,mii-tool,mingetty,mke2fs,mkfs,mkfs.cramfs,mkfs.ext2,mkfs.ext3,mkfs.ext4,mkfs.ext4dev,mkhomedir_helper,mkinitrd,mkswap,modinfo,modprobe,mount.nfs,mount.nfs4,mount.tmpfs,nameif,netreport,new-kernel-pkg,nologin,pam_console_apply,pam_tally2,pam_timestamp_check,partx,pidof,pivot_root,plipconfig,plymouthd,poweroff,ppp-watch,rdisc,reboot,regdbdump,reload,resize2fs,restart,restorecon,rmmod,route,rpcbind,rpc.statd,rsyslogd,rtmon,runlevel,runuser,scsi_id,securetty,service,setfiles,setpci,setregdomain,setsysfont,sfdisk,shutdown,slattach,sln,start,start_udev,status,stop,sulogin,sushell,swapoff,swapon,switch_root,sysctl,tc,telinit,tune2fs,udevadm,udevd,umount.nfs,umount.nfs4,unix_chkpwd,unix_update,weak-modules,wipefs&#10;&#9;&#9;&#9;, &#10;&#9;&#9;&#9;&#9;a2p,ab,aclocal,aclocal-1.11,addftinfo,addr2line,airdaemon,apropos,ar,as,attr,aulast,aulastlog,ausyscall,autoconf,autoheader,autom4te,automake,automake-1.11,autoreconf,autoscan,autoupdate,awk,base64,bashbug-64,berkeley_db_svc,bunzip2,bzcat,bzcmp,bzdiff,bzgrep,bzip2,bzip2recover,bzless,bzmore,c++,c2ph,c89,c99,cal,captoinfo,catchsegv,cc,c++filt,chacl,chage,chattr,chcon,checkmodule,checkpolicy,chfn,chrt,chsh,chvt,cjpeg,cksum,clear,cloog,cmp,col,colcrt,colrm,column,comm,consolehelper,convertcfg,cpp,crontab,csplit,curl,curl-config,cut,cxpm,db_archive,db_checkpoint,db_codegen,db_deadlock,db_dump,db_dump185,db_hotbackup,db_load,db_printlog,db_recover,db_stat,db_upgrade,dbus-binding-tool,db_verify,ddate,deallocvt,diff,diff3,dir,dircolors,dirname,djpeg,dprofpp,du,env,eqn,eqn2graph,erb,ex,expand,expr,factor,faillog,fallocate,fc-cache,fc-cat,fc-list,fc-match,fc-query,fc-scan,fgconsole,file,filedaemon,find,find2perl,fipscheck,fipshmac,flock,floppy,fmt,fold,free,freetype-config,funzip,g++,gawk,gcc,gcov,gdlib-config,gem,gencat,geqn,getconf,getent,getfacl,getfattr,getkeycodes,getopt,gindxbib,glookbib,gmake,gneqn,gnroff,gpasswd,gpg,gpg2,gpg-agent,gpgconf,gpg-connect-agent,gpg-error,gpgkey2ssh,gpgparsemail,gpgsplit,gpgv,gpgv2,gpg-zip,gpic,gprof,grefer,grn,grodvi,groff,groffer,grog,grolbp,grolj4,grops,grotty,groups,gsoelim,gtbl,gtroff,gunzip,gzexe,gzip,h2ph,halt,head,hexdump,hostid,hpftodit,htdbm,htdigest,htpasswd,i386,iconv,id,idn,ifnames,igawk,indxbib,info,infocmp,infokey,infotocap,install,ionice,ipcmk,ipcrm,ipcs,ipmicmd,ipmilan,ipmish,ipmitool,ipmi_ui,irb,isosize,join,jpegtran,kbdrate,kill,killall,last,lastb,lastlog,lchfn,lchsh,ld,ldd,less,lessecho,lesskey,lesspipe.sh,libpng12-config,libpng-config,linux32,linux64,lkbib,loadunimap,locale,localedef,logger,logname,logresolve,look,lookbib,lsattr,lscpu,lua,luac,lzcat,lzcmp,lzdiff,lzegrep,lzfgrep,lzgrep,lzless,lzma,lzmadec,lzmainfo,lzmore,m4,mailq,mailq.postfix,make,man,man2html,manpath,mapscrn,mbchk,mcookie,md5sum,mesg,mini_epn,mkfifo,nagios,nagiostats,namei,neqn,net-snmp-create-v3-user,newaliases,newaliases.postfix,newgrp,new_mini_epn,nl,nm,nohup,nproc,nroff,ntpstat,objcopy,objdump,od,oldfind,open,openipmicmd,openipmish,openssl,openvt,p1.pl,passwd,paste,pathchk,pcregrep,pcretest,peekfd,perl,perl5.10.1,perlbug,perldoc,perlthanks,pfbtops,pgawk,pgrep,phar,phar.phar,php,php-cgi,pic,pic2graph,piconv,pinentry,pinentry-curses,pinky,pkg-config,pkill,pl2pm,plymouth,pmap,pod2html,pod2latex,pod2man,pod2text,pod2usage,podchecker,podselect,post-grohtml,poweroff,ppl-config,pr,pre-grohtml,printenv,printf,protoize,psed,psfaddtable,psfgettable,psfstriptable,psfxtable,pstree,pstree.x11,pstruct,ptx,pwdx,pydoc,python,python2,python2.6,ranlib,rb,rdjpgcom,rdoc,readelf,readlink,reboot,refer,rename,renice,reset,resizecons,rev,rhgb-client,ri,rmail,rmail.postfix,rmcp_ping,rpcgen,rpm2cpio,rpmdb,rpmquery,rpmsign,rpmverify,rsync,ruby,runcon,run-parts,rvim,rx,rz,s2p,sb,scp,script,scriptreplay,sdiff,secon,sedismod,sedispol,semodule_deps,semodule_expand,semodule_link,semodule_package,seq,sequel,setarch,setfacl,setfattr,setkeycodes,setleds,setmetamode,setsid,setterm,setup-nsssysinit.sh,sftp,sg,sha1sum,sha224sum,sha256sum,sha384sum,sha512sum,showconsolefont,showkey,shred,shuf,size,skill,slabtop,slogin,snice,snmpconf,snmpkey,soelim,solterm,splain,split,sprof,sqlite3,ssh,ssh-add,ssh-agent,ssh-copy-id,ssh-keygen,ssh-keyscan,stat,stdbuf,strings,strip,sudo,sudoedit,sum,sx,sxpm,system-config-network,system-config-network-cmd,sz,tabs,tac,tail,tailf,tbl,tee,telnet,test,testrb,tfmtodit,tic,time,timeout,tload,toe,top,tput,tr,troff,truncate,tset,tsort,tty,tzselect,ul,unexpand,uniq,unlzma,unprotoize,unshare,unxz,unzip,unzipsfx,uptime,urlgrabber,users,utmpdump,uuidgen,vdir,vim,vimdiff,vimtutor,vmstat,w,wall,watch,watchgnupg,wc,wget,whatis,whereis,which,whiptail,who,whoami,write,wrjpgcom,x86_64,x86_64-redhat-linux-c++,x86_64-redhat-linux-g++,x86_64-redhat-linux-gcc,xargs,xml2-config,xmlcatalog,xmllint,xmlwf,xxd,xz,xzcat,xzcmp,xzdec,xzdiff,xzegrep,xzfgrep,xzgrep,xzless,xzmore,yaf,yafcollect,yafscii,yes,yum,zcmp,zdiff,zegrep,zfgrep,zforce,zgrep,zip,zipcloak,zipgrep,zipinfo,zipnote,zipsplit,zless,zmore,znew,zsoelim,,/usr/sbin/:,addgnupghome,adduser,alternatives,anacron,apachectl,applygnupgdefaults,arpd,arping,authconfig,authconfig-tui,avcstat,build-locale-archive,cacertdir_rehash,capsh,chpasswd,chroot,clockdiff,cracklib-check,cracklib-format,cracklib-packer,cracklib-unpacker,create-cracklib-dict,crond,e2freefrag,efibootmgr,ethtool,exportfs,fdformat,filefrag,fping,fping6,genhomedircon,getcap,getenforce,getpcaps,getsebool,glibc_post_upgrade.x86_64,groupadd,groupdel,groupmems,groupmod,grpck,grpconv,grpunconv,gss_clnt_send_err,gss_destroy_creds,htcacheclean,httpd,httpd.event,httpd.worker,httxt2dbm,hwclock,iconvconfig,iconvconfig.x86_64,ipmievd,lchage,ldattach,lgroupadd,lgroupdel,lgroupmod,libgcc_post_upgrade,lid,lnewusers,lnstat,load_policy,logrotate,lokkit,lpasswd,lsof,luseradd,luserdel,lusermod,makewhatis,matchpathcon,mkdict,mklost+found,mksock,mountstats,newusers,nfsiostat,nfsstat,nrpe,nstat,ntpd,ntpdate,ntpdc,ntp-keygen,ntpq,ntptime,open_init_pty,packer,pethtool,pifconfig,ping6,pluginviewer,plymouth-set-default-theme,postalias,postcat,postconf,postdrop,postfix,postkick,postlock,postlog,postmap,postmulti,postqueue,postsuper,pwck,pwconv,pwunconv,readprofile,restorecond,rotatelogs,rpcdebug,rpc.gssd,rpc.idmapd,rpcinfo,rpc.mountd,rpc.nfsd,rpc.svcgssd,rtacct,rtcwake,run_init,saslauthd,sasldblistusers2,saslpasswd2,selinuxconlist,selinuxdefcon,selinuxenabled,semodule,sendmail,sendmail.postfix,sestatus,setcap,setenforce,setsebool,showmount,sm-notify,smtp-sink,smtp-source,snmpd,snmptrapd,ss,sshd,start-statd,suexec,system-config-network,system-config-network-cmd,system-config-network-tui,sys-unconfig,tcpdump,tcpslice,testsaslauthd,tickadj,togglesebool,tracepath,tracepath6,tunelp,tzdata-update,update-alternatives,update-pciids,useradd,userdel,userhelper,usermod,usernetctl,vigr,vipw,visudo,zdump,zic&#10;&#9;&#9;&#9;" /><link rel="home" href="../../index.html" title="Netkiller Linux ææ­" /><link rel="up" href="index.html" title="ç¬¬Â 11Â ç« Â Networking ç½ç»ç®¡ç" /><link rel="prev" href="wireless.html" title="11.9.Â Wireless - WiFi éç½®" /><link rel="next" href="linux.network.old.html" title="11.11.Â æ©æçæ¬" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> |
		<a xmlns="" href="//netkiller.github.io/">ç®ä½ä¸­æ</a> |
	    <a xmlns="" href="http://netkiller.sourceforge.net/">ç¹ä½ä¸­æ</a> |
	    <a xmlns="" href="/journal/index.html">ææ</a> |
	    <a xmlns="" href="https://github.com/netkiller">Github</a> |
	    <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">ç¥ä¹ä¸æ </a> |
   	    <a xmlns="" href="https://edu.51cto.com/lecturer/1703915.html">51CTOå­¦é¢</a> |
	    <a xmlns="" href="https://edu.csdn.net/lecturer/6423">CSDNç¨åºåç ä¿®é¢</a> |
	    <a xmlns="" href="http://my.oschina.net/neochen/">OSChina åå®¢</a> |
	    <a xmlns="" href="https://cloud.tencent.com/developer/column/2078">è¾è®¯äºç¤¾åº</a> |
	    <a xmlns="" href="https://yq.aliyun.com/u/netkiller/">é¿éäºæ ç¤¾åº</a> |
	    <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> |
	    <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> |
	    <a xmlns="" href="https://www.youtube.com/user/bg7nyt/videos">Youtube</a> |
	    <a xmlns="" href="//www.netkiller.cn/home/donations.html">æèµ(Donations)</a> |
	    <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.10.Â Linux IP And Router</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="wireless.html">ä¸ä¸é¡µ</a>Â </td><th width="60%" align="center">ç¬¬Â 11Â ç« Â Networking ç½ç»ç®¡ç</th><td width="20%" align="right">Â <a accesskey="n" href="linux.network.old.html">ä¸ä¸é¡µ</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td><td></td><td><a href="https://zhuanlan.zhihu.com/netkiller"><img src="/images/logo/zhihu-card-default.svg" height="25" /></a></td><td valign="middle"><a href="https://zhuanlan.zhihu.com/netkiller">ç¥ä¹ä¸æ </a> ï½ <a href="https://www.zhihu.com/club/1241768772601950208">å¤ç»´åº¦æ¶æ</a></td><td></td><td></td><td></td><td></td></tr></table><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="router"></a>11.10.Â Linux IP And Router</h2></div></div></div>
	
	
	
	
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="network.ipaddress"></a>11.10.1.Â IP å°åç±»å«</h3></div></div></div>
		
		<div class="literallayout"><p><br />
		<br />
ä¸¾ä¾è¯´æè¯¥ç®æ³ã<br />
ä¾ï¼ç»å®ä¸Â classÂ cÂ addressÂ :Â 192.168.5.0Â ï¼è¦æ±åå20ä¸ªå­ç½ï¼æ¯ä¸ªå­ç½5ä¸ªä¸»æºã<br />
è§£ï¼å ä¸º4Â &lt;5Â &lt;Â 8Â ï¼ç¨256ï¼8ï¼248Â ----&gt;å³æ¯ææ±çå­ç½æ©ç ï¼å¯¹åºçå­ç½æ°ä¹å°±åºæ¥äºãè¿æ¯éå¯¹Cç±»å°åã<br />
éå¯¹Bç±»å°åçåæ³ãå¯¹äºBç±»å°åï¼åå¦ä¸»æºæ°å°äºæç­äº254ï¼ä¸Cç±»å°åç®æ³ç¸åãå¯¹äºä¸»æºæ°å¤§äº254çï¼å¦éä¸»æºÂ 700å°ï¼50ä¸ªå­ç½ï¼ç¸å½å¤§äºï¼ï¼512Â &lt;Â 700&lt;Â 1024<br />
256ï¼ï¼1024/256ï¼=256ï¼4ï¼252Â ----&gt;å³æ¯ææ±çå­ç½æ©ç ï¼å¯¹åºçå­ç½æ°ä¹å°±åºæ¥äºãä¸é¢256ï¼4ä¸­ç4ï¼2ç2æ¬¡å¹ï¼æ¯æä¸»æºæ°ç¨2è¿å¶è¡¨ç¤ºæ¶è¶è¿8ä½çä½æ°ï¼å³è¶è¿2ä½ï¼æ©ç ä¸ºå©ä½çå6ä½ï¼å³å­ç½æ°ä¸º2ï¼6ï¼ï¼2ï¼62ä¸ªã<br />
		<br />
		</p></div>
		<pre class="screen">
Append :Host/Subnet Quantities Table

----------------------------------------------------------------------
Class A                   Effective  Effective
# bits        Mask         Subnets     Hosts
-------  ---------------  ---------  ---------
  2      255.192.0.0            2      4194302
  3      255.224.0.0            6      2097150
  4      255.240.0.0           14      1048574
  5      255.248.0.0           30       524286
  6      255.252.0.0           62       262142
  7      255.254.0.0          126       131070
  8      255.255.0.0          254        65536
  9      255.255.128.0        510        32766
  10     255.255.192.0       1022        16382
  11     255.255.224.0       2046         8190
  12     255.255.240.0       4094         4094
  13     255.255.248.0       8190         2046
  14     255.255.252.0      16382         1022
  15     255.255.254.0      32766          510
  16     255.255.255.0      65536          254
  17     255.255.255.128   131070          126
  18     255.255.255.192   262142           62
  19     255.255.255.224   524286           30
  20     255.255.255.240  1048574           14
  21     255.255.255.248  2097150            6
  22     255.255.255.252  4194302            2

Class B                   Effective  Effective
# bits        Mask         Subnets     Hosts
-------  ---------------  ---------  ---------
  2      255.255.192.0           2     16382
  3      255.255.224.0           6      8190
  4      255.255.240.0          14      4094
  5      255.255.248.0          30      2046
  6      255.255.252.0          62      1022
  7      255.255.254.0         126       510
  8      255.255.255.0         254       254
  9      255.255.255.128       510       126
  10     255.255.255.192      1022        62
  11     255.255.255.224      2046        30
  12     255.255.255.240      4094        14
  13     255.255.255.248      8190         6
  14     255.255.255.252     16382         2

Class C                   Effective  Effective
# bits        Mask         Subnets     Hosts
-------  ---------------  ---------  ---------
  2      255.255.255.192      2         62
  3      255.255.255.224      6         30
  4      255.255.255.240     14         14
  5      255.255.255.248     30          6
  6      255.255.255.252     62          2

*Subnet all zeroes and all ones excluded.
*Host all zeroes and all ones excluded.
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ping"></a>11.10.2.Â ping</h3></div></div></div>
		
		<pre class="screen">
			
-f: åéæ´ªæ°´è¯·æ±,æ¯ä¸ªè¯·æ±æå°ä¸ä¸ªç¹,æ¯ä¸ªååºå é¤ä¸ä¸ªç¹.å¦æç½ç»å­å¨ä¸¢å,é£ä¹ä¼åç°åºä¸é¿ä¸²ä¸æ­å¢å çç¹.

-n: éé¡¹,å ä¸ä¹åå¯ä»¥é»æ­¢pingç¨åºå»è¿è¡åådnsæ¥è¯¢
    å½æ¯æ¬¡pingå®å¾å°ååºä¹å,pingç¨åºä¼å°è¯ä¸æ¬¡åådnsæ¥è¯¢(reverse dns lookup)æ¥è·åâ64 bytes fromâåé¢çåå,å¦ææ¥è¯¢éåº¦å¾æ¢çè¯,å°±ä¼ç»äººä¼¼ä¹å»¶è¿å¾å¤§çæè§,å¶å®è¿ä¹æ¯pingæè§æ¢,ä½æ¯æ¯æ¬¡pingçååºæ¶é´å´å¹¶ä¸æ¢çåå .
			
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mtu"></a>11.10.3.Â Finding optimal MTU</h3></div></div></div>
		
		<pre class="screen">
			
$ ping -c 1 -s $((1500-28)) -M do www.debian.org
PING www.debian.org (140.112.8.139) 1472(1500) bytes of data.
1480 bytes from linux3.cc.ntu.edu.tw (140.112.8.139): icmp_seq=1 ttl=47 time=52.7 ms

--- www.debian.org ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 52.778/52.778/52.778/0.000 ms
			
		</pre>
		<p>Try 1454 instead of 1500</p>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ss"></a>11.10.4.Â ss - another utility to investigate sockets</h3></div></div></div>
		
		<pre class="screen">
			
ssæ¯Socket Statisticsçç¼©å
    sså½ä»¤å¯ä»¥ç¨æ¥è·åsocketç»è®¡ä¿¡æ¯,å®å¯ä»¥æ¾ç¤ºånetstatç±»ä¼¼çåå®¹;ä½ssçä¼å¿å¨äºå®è½å¤æ¾ç¤ºæ´å¤æ´è¯¦ç»çæå³TCPåè¿æ¥ç¶æçä¿¡æ¯,èä¸æ¯netstatæ´å¿«éæ´é«æ.
    
    å½æå¡å¨çsocketè¿æ¥æ°éåå¾éå¸¸å¤§æ¶,æ è®ºæ¯ä½¿ç¨netstatå½ä»¤è¿æ¯ç´æ¥cat /proc/net/tcp,æ§è¡éåº¦é½ä¼å¾æ¢;sså¿«çç§è¯å¨äº,å®å©ç¨å°äºTCPåè®®æ ä¸­ tcp_diag . tcp_diagæ¯ä¸ä¸ªç¨äºåæç»è®¡çæ¨¡å, ç¨netfilteræ¥è·åç¬¬Linuxåæ ¸ä¸­ç¬¬ä¸æçä¿¡æ¯,è¿å°±ç¡®ä¿äºssçå¿«æ·é«æ;å¦æä½ çç³»ç»ä¸­æ²¡ætcp_diag,ssä¹å¯ä»¥æ­£å¸¸è¿è¡,åªæ¯æçä¼åå¾ç¨æ¢.
    
    netstatå½ä»¤æ¯net-toolså·¥å·éä¸­çä¸å,èsså½ä»¤æ¯iprouteå·¥å·éä¸­çä¸å.
    yum install iproute iproute-doc


#### ssè¿æ»¤å¨

ssçè¿æ»¤å¨åä¸ºä¸¤ç§:
     state
         ç¶æ:established,syn-sent,syn-recv,fin-wait-1,fin-wait-2,time-wait,closed,close-wait,last-ack,listen,closing
         é¤äºè¿13ç§ç¶æä¹å¤,è¿æå ä¸ªèç±»çç¶æ:
             all â for all the states
             bucket â æ¾ç¤ºç¶æä¸ºmaintained as minisockets,å¦ï¼time-waitåsyn-recv
             big â åbucketç¸å
             connected â é¤äºlisten and closedçææç¶æ
             synchronized â ææå·²è¿æ¥çç¶æé¤äºsyn-sent
     addr+port
         å°ååç«¯å£å¯ä»¥ä½¿ç¨è¡¨è¾¾å¼,ç±»ä¼¼äºtcpdumpä¸­çç¨æ³,å³é®å­æ:
             dst ADDRESS_PATTERN â matches remote address and port
             src ADDRESS_PATTERN â matches local address and port
             dport RELOP PORT â compares remote port to a number
             sport RELOP PORT â compares local port to a number
             autobound â checks that socket is bound to an ephemeral port

#### ss usage

ss [ OPTIONS ] [ FILTER ]
        OPTIONS:
            -p æ¾ç¤ºæ¯ä¸ªè¿ç¨çåå­åpid
            -s ååºå½åsocketè¯¦ç»ä¿¡æ¯
            -n ä¸è§£ææå¡åç§°
            -r è§£æä¸»æºå
            -a æ¾ç¤ºææå¥æ¥å­(sockets)
            -o æ¾ç¤ºè®¡æ¶å¨ä¿¡æ¯(timer)
            -l æ¾ç¤ºçå¬ç¶æçå¥æ¥å­(sockets)
            -e æ¾ç¤ºè¯¦ç»çå¥æ¥å­(sockets)ä¿¡æ¯
            -m æ¾ç¤ºå¥æ¥å­(sockets)çåå­ä½¿ç¨æåµ
            -i æ¾ç¤º TCPåé¨ä¿¡æ¯
            -4 ä»æ¾ç¤ºIPv4çå¥æ¥å­(sockets)
            -6 ä»æ¾ç¤ºIPv6çå¥æ¥å­(sockets)
            -0 æ¾ç¤º PACKET å¥æ¥å­(sockets)
            -t ä»æ¾ç¤º TCPå¥æ¥å­(sockets)
            -u ä»æ¾ç¤º UCPå¥æ¥å­(sockets)
            -d ä»æ¾ç¤º DCCPå¥æ¥å­(sockets)
            -w ä»æ¾ç¤º RAWå¥æ¥å­(sockets)
            -x ä»æ¾ç¤º Unixå¥æ¥å­(sockets)
            -f --family=FAMILY  æ¾ç¤º FAMILYç±»åçå¥æ¥å­(sockets),FAMILYå¯é,æ¯æ unix, inet, inet6, link, netlink
            -D --diag=FILE     å°åå§TCPå¥æ¥å­(sockets)ä¿¡æ¯è½¬å¨å°æä»¶
            -F --filter=FILE   ä»æä»¶ä¸­é½å»è¿æ»¤å¨ä¿¡æ¯ FILTER := [ state TCP-STATE ] [ EXPRESSION ]

#### Recv And Send

[root@netkiller ~]# ss -anp | column -c1
State      Recv-Q Send-Q        Local Address:Port          Peer Address:Port
LISTEN     0      128               127.0.0.1:9000                     *:*      users:(("php-fpm",1481,9),("php-fpm",1482,0),("php-fpm",1483,0),("php-fpm",1484,0),("php-fpm",1485,0),("php-fpm",1486,0),("php-fpm",1487,0),("php-fpm",1488,0),("php-fpm",1489,0),("php-fpm",1490,0),("php-fpm",1491,0))
LISTEN     0      50                        *:3306                     *:*      users:(("mysqld",2680,11))
LISTEN     0      128                       *:443                      *:*      users:(("nginx",1743,8),("nginx",1744,8),("nginx",1745,8))
LISTEN     0      128              10.1.17.17:2812                     *:*      users:(("monit",2030,6))
TIME-WAIT  0      0                 127.0.0.1:43251            127.0.0.1:80
TIME-WAIT  0      0                 127.0.0.1:43248            127.0.0.1:80
ESTAB      0      0                10.1.17.17:22              10.1.17.18:51752  users:(("sshd",3122,3))
ESTAB      0      0                10.1.17.17:22              10.1.20.70:51531  users:(("sshd",19093,3))

å¤äºLISTENç¶æçsocket:
    Recv-Qè¡¨ç¤ºäºcurrent listen backlogéååç´ æ°ç®(ç­å¾ç¨æ·è°ç¨acceptçå®æ3æ¬¡æ¡æçsocket)
    Send-Qè¡¨ç¤ºäºlisten socketæå¤§è½å®¹çº³çbacklog.è¿ä¸ªæ°ç®ç±listenæ¶æå®,ä¸ä¸è½å¤§äº /proc/sys/net/ipv4/tcp_max_syn_backlog;
    
å¯¹äºéLISTEN socket:
    Recv-Qè¡¨ç¤ºäºreceive queueä¸­çå­èæ°ç®(ç­å¾æ¥æ¶çä¸ä¸ä¸ªtcpæ®µçåºå·-å°æªä»åæ ¸ç©ºé´copyå°ç¨æ·ç©ºé´çæ®µæåé¢çä¸ä¸ªåºå·)
    Send-Qè¡¨ç¤ºåéqueueä¸­å®¹çº³çå­èæ°(å·²å å¥åééåä¸­æåä¸ä¸ªåºå·-è¾åºæ®µä¸­ææ©ä¸ä¸ªæªç¡®è®¤çåºå·)


#### Sockets State
&gt;1 Listen


[root@netkiller ~]# ss -lnp | column -c1
State      Recv-Q Send-Q        Local Address:Port          Peer Address:Port
LISTEN     0      128               127.0.0.1:9000                     *:*      users:(("php-fpm",1481,9),("php-fpm",1482,0),("php-fpm",1483,0),("php-fpm",1484,0),("php-fpm",1485,0),("php-fpm",1486,0),("php-fpm",1487,0),("php-fpm",1488,0),("php-fpm",1489,0),("php-fpm",1490,0),("php-fpm",1491,0))
LISTEN     0      50                        *:3306                     *:*      users:(("mysqld",2680,11))
LISTEN     0      50                        *:3307                     *:*      users:(("mysqld",2564,11))

&gt;2 Established


[root@netkiller ~]# ss -onp state established | column -c1
Recv-Q Send-Q             Local Address:Port               Peer Address:Port
0      0                     10.1.17.17:22                   10.1.17.18:51752  timer:(keepalive,70min,0) users:(("sshd",3122,3))
0      0                     10.1.17.17:22                   10.1.20.70:51531  timer:(keepalive,69min,0) users:(("sshd",19093,3))

&gt;3 Sockets Summary


[root@netkiller ~]# ss -s
Total: 93 (kernel 150)
TCP:   106 (estab 10, closed 88, orphaned 0, synrecv 0, timewait 88/0), ports 41

Transport Total     IP        IPv6
*	  150       -         -
RAW	  0         0         0
UDP	  1         1         0
TCP	  18        18        0
INET	  19        19        0
FRAG	  0         0         0

&gt;4 Expand


1 æ¾ç¤ºææç¶æä¸ºestablishedçsshè¿æ¥
[root@netkiller ~]# ss -o state established '( dport = :ssh or sport = :ssh )'
Recv-Q Send-Q                                      Local Address:Port                                          Peer Address:Port
0      0                                              10.1.17.17:ssh                                             10.1.17.18:51752    timer:(keepalive,109min,0)
0      0                                              10.1.17.17:ssh                                             10.1.20.70:51531    timer:(keepalive,103min,0)

#### ***timer user mem rto*** 

------å¨å¦å¤ä¸ä¸ªç»ç«¯æ§è¡ ssh 10.1.2.103-----
ç¶åå¨æ¬ç»ç«¯æ§è¡å¦ä¸å½ä»¤
[root@netkiller ~]# ss -eimpn '( dport = :22 )' -o
State      Recv-Q Send-Q                                                          Local Address:Port                                                            Peer Address:Port
ESTAB      0      0                                                                   10.1.2.23:44107                                                             10.1.2.103:22     timer:(keepalive,28min,0) users:(("ssh",9545,4)) ino:21970248 sk:ffff88013c2e5900
	 mem:(r0,w0,f4096,t0) sack cubic wscale:7,8 rto:203 rtt:3.25/1.75 ato:40 cwnd:10 send 35.9Mbps rcv_rtt:33427 rcv_space:113592
	 
------å¨å¦å¤ä¸ä¸ªç»ç«¯æ§è¡ telnet 27.111.200.86 15672-----
ç¶åå¨æ¬ç»ç«¯æ§è¡å¦ä¸å½ä»¤
[root@netkiller ~]# ss -eimpn '( dport = :15672 )' -o
State      Recv-Q Send-Q                                                          Local Address:Port                                                            Peer Address:Port
ESTAB      0      2                                                                   10.1.2.23:57531                                                          27.111.200.86:15672  timer:(on,614ms,0) users:(("telnet",10163,4)) ino:21983807 sk:ffff8800378ba040
	 mem:(r0,w554,f3542,t0) sack cubic wscale:7,8 cwnd:10 rcv_space:14600

&gt; timer


-o æ¾ç¤ºè®¡æ¶å¨ä¿¡æ¯(timer),linuxå¯¹ä¸ä¸ªtcp socketæ»å±æ7ä¸ªå®æ¶å¨,éè¿4ä¸ªtimerå®ç°
    éè¿icsk_retransmit_timerå®ç°çéä¼ å®æ¶å¨,é¶çªå£æ¢æµå®æ¶å¨;
    éè¿sk_timerå®ç°çè¿æ¥å»ºç«å®æ¶å¨,ä¿æ´»å®æ¶å¨åFIN_WAIT_2å®æ¶å¨;
    éè¿icsk_delack_timerå®ç°çå»¶æ¶ackå®æ¶å¨ä»¥åTIME_WAITå®æ¶å¨.
    
timer è¿ä¸ªè¾åºæè¿°çæ¯tcp socketä¸çå®æ¶å¨
timer çè¾åºå«ä¹å°±æ¯(ç±»å,è¿ææ¶é´,éè¯æ¬¡æ°)
    off: å½åsocketæ²¡ætimer
    on: éä¼ timer
    keepaliveï¼è¿æ¥å»ºç«timer or fin_wait_2 timer or ä¿æ´»timer;å·ä½æ¯é£ä¸ªtimer,å¯ä»¥æ ¹æ®è¿æ¥çç¶ææ¥ç¡®å®.
    timewait: TIME_WAITtimer
    persistï¼é¶çªå£æ¢æµtimer 

&gt; user


ss -p è¾åºusersé¡¹éä¼åºç°ä¸ä¸ªåæ°:
    ç¬¬ä¸ä¸ªæ¯è¿ç¨å
    ç¬¬äºä¸ªä¸ºpid
    ç¬¬ä¸é¡¹è¯¥è¿ç¨æä»¶æè¿°ç¬¦çä½¿ç¨æ°é

&gt; mem


mem:(r0,w554,f3542,t0)
r  the read (inbound) buffer
w  the write (outbound) buffer
f  the "forward allocated memory" (memory available to the socket)
t  the transmit queue (stuff waiting to be sent or waiting on an ACK)

&gt; socket information


sack cubic wscale
rto
rtt
cwnd
send
rcv_space

#### Notice
&gt;1 ss process name and pid


only name

ss -tp | grep -v Recv-Q | sed -e 's/.*users:(("//' -e 's/".*$//' | sort | uniq

only  pid
[root@netkiller ~]# ss -tp | grep -v Recv-Q | sed -e 's/.*users:((.*",//' -e 's/,.*$//'  | sort | uniq

name  and pid
# ss -tp | grep -v Recv-Q | sed -e 's/.*users:(("\(.*\)",\(.*\),.*$/\1:\2/' | sort | uniq
f_e_related_dat:4695
mysqld:4289
salt-minion:4001
sshd:25161
		
			
		</pre>
	</div>

	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="netmask"></a>11.10.5.Â netmask å­ç½æ©ç </h3></div></div></div>
		
		<p>
		
å­ç½æ©ç å¿«éç®æ³
å¤§å®¶é½åºè¯¥ç¥é2çxæ¬¡æ¹å¼å§ï¼ä¸é¢æ¯2ç0æ¬¡å°10æ¬¡æ¹çè®¡ç®å¼åå«æ¯ï¼
1 2 4 8 16 32 64 128 256 512 1024ã
å®ä¾
å¦æä½ å¸ææ¯ä¸ªå­ç½ä¸­åªæ5ä¸ªipå°åå¯ä»¥ç»æºå¨ç¨ï¼é£ä¹ä½ å°±æå°éè¦åå¤ç»æ¯ä¸ªå­ç½7ä¸ªipä½åï¼å ä¸ºéè¦å ä¸ä¸¤å¤´çä¸å¯ç¨çç½ç»åå¹¿æ­ipï¼æä»¥ä½ éè¦éæ¯7å¤çæè¿çé£ä½ï¼ä¹å°±æ¯8ï¼å°±æ¯è¯´éæ¯ä¸ªå­ç½8ä¸ªipãå°è¿ä¸æ­¥ï¼ä½ å°±å¯ä»¥ç®å±è½äºã

è¿ä¸ªæ¹æ³å°±æ¯ï¼æåä¸ä½å±è½å°±æ¯256åå»ä½ æ¯ä¸ªå­ç½æéè¦çipä½ååçæ°éï¼é£ä¹è¿ä¸ªä¾å­å°±æ¯256-8=248ï¼é£ä¹ç®åºè¿ä¸ªï¼ä½ å°±å¯ä»¥ç¥éé£äºipæ¯ä¸è½ç¨çäºï¼
ä¾æ­¤ç±»æ¨ï¼0-7,8-15,16-23,24-31ï¼â¦â¦ï¼åå¨ä¸é¢ç0ã7ã8ã15ã16ã23ã24ã31â¦â¦é½æ¯ä¸è½ç¨çï¼ä½ åºè¯¥ç¨æä¸¤ä¸ªæ°å­ä¹é´çIPï¼é£ä¸ªå°±æ¯ä¸ä¸ªå­ç½å¯ç¨çIPã

åè¯éªä¸ä¸ï¼å°±æ¿200å°æºå¨åæ4ä¸ªå­ç½æ¥åä¾å­å§ã
200å°æºå¨ï¼4ä¸ªå­ç½ï¼é£ä¹å°±æ¯æ¯ä¸ªå­ç½50å°æºå¨ï¼è®¾å®ä¸º192.168.10.0ï¼Cç±»çIPï¼å¤§å­ç½æ©ç åºä¸º255.255.255.0ï¼å¯¹å§ï¼ä½æ¯æä»¬è¦åå­ç½ï¼æä»¥æç§ä¸é¢çï¼æä»¬ç¨32ä¸ªIPä¸ä¸ªå­ç½åä¸å¤ï¼åºè¯¥æ¯ä¸ªå­ç½ç¨64ä¸ªIPï¼å¶ä¸­62ä½å¯ç¨ï¼è¶³å¤äºå§ï¼ï¼ç¶åç¨æçåæ³ï¼å­ç½æ©ç åºè¯¥æ¯256-64=192ï¼é£ä¹æ»çå­ç½æ©ç åºè¯¥ä¸ºï¼255.255.255.192ãä¸ç¸ä¿¡ï¼ç®ç®ï¼0-63ï¼64-127ï¼128-191ï¼192-255ï¼è¿æ ·ä½ å°±å¯ä»¥æåä¸ªåºååå«è®¾å®å°åä¸ªå­ç½çæºå¨ä¸äºã
		
		</p>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="iptab"></a>11.10.5.1.Â iptab</h4></div></div></div>
			
			<pre class="screen">
# iptab
+----------------------------------------------+
| addrs bits pref class mask |
+----------------------------------------------+
| 1 0 /32 255.255.255.255 |
| 2 1 /31 255.255.255.254 |
| 4 2 /30 255.255.255.252 |
| 8 3 /29 255.255.255.248 |
| 16 4 /28 255.255.255.240 |
| 32 5 /27 255.255.255.224 |
| 64 6 /26 255.255.255.192 |
| 128 7 /25 255.255.255.128 |
| 256 8 /24 1C 255.255.255.0 |
| 512 9 /23 2C 255.255.254.0 |
| 1K 10 /22 4C 255.255.252.0 |
| 2K 11 /21 8C 255.255.248.0 |
| 4K 12 /20 16C
255.255.240.0 |
| 8K 13 /19 32C 255.255.224.0 |
| 16K 14 /18 64C 255.255.192.0 |
| 32K 15 /17 128C 255.255.128.0 |
| 64K 16 /16 1B 255.255.0.0 |
| 128K 17 /15 2B 255.254.0.0 |
| 256K 18 /14 4B 255.252.0.0 |
| 512K 19 /13 8B 255.248.0.0 |
| 1M 20 /12 16B 255.240.0.0 |
| 2M 21 /11 32B 255.224.0.0 |
| 4M 22 /10 64B 255.192.0.0 |
| 8M 23 /9 128B 255.128.0.0 |
| 16M 24 /8 1A 255.0.0.0 |
| 32M 25 /7 2A 254.0.0.0 |
| 64M 26 /6 4A 252.0.0.0 |
| 128M 27 /5 8A 248.0.0.0 |
| 256M 28 /4 16A 240.0.0.0 |
| 512M 29 /3 32A 224.0.0.0 |
| 1024M 30 /2 64A 192.0.0.0 |
| 2048M 31 /1 128A 128.0.0.0 |
| 4096M 32 /0 256A 0.0.0.0 |
+----------------------------------------------+
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="netmask"></a>11.10.5.2.Â netmask - a netmask generation and conversion program</h4></div></div></div>
			
			<pre class="screen">
				$ sudo apt-get install netmask
			</pre>
			<p>-s, --standard Output address/netmask pairs</p>
			<pre class="screen">
$ netmask -s 192.168.1.0/28
192.168.1.0/255.255.255.240

$ netmask -s 192.168.1.0/24
192.168.1.0/255.255.255.0

$ netmask -s 192.168.1.0/24
192.168.1.0/255.255.255.0

$ netmask -s 192.168.1.0/26
192.168.1.0/255.255.255.192

[root@netkiller src]# netmask -s 11.111.195.211/27
11.111.195.192/255.255.255.224
			</pre>
			<p>-c, --cidr Output CIDR format address lists</p>
			<pre class="screen">
$ netmask -c 192.168.1.0/255.255.255.252
192.168.1.0/30

$ netmask -c 192.168.1.0/255.255.255.192
192.168.1.0/26

$ netmask -c 192.168.1.0/255.255.255.240
192.168.1.0/28
			</pre>
			<p>-i, --cisco Output Cisco style address lists æç§é£æ ¼çåå­ç½æ©ç è®¡ç®</p>
			<pre class="screen">
$ netmask -i 192.168.1.0/255.255.255.0
192.168.1.0 0.0.0.255

$ netmask -i 192.168.1.0/255.255.255.252
192.168.1.0 0.0.0.3

$ netmask -i 192.168.1.0/24
192.168.1.0 0.0.0.255

$ netmask -i 192.168.1.0/28
192.168.1.0 0.0.0.15
			</pre>
			<p>-r, --range Output ip address ranges è¾åºå°åèå´</p>
			<p>è®¡ç®å­ç½æ©ç ä½æ°</p>
			<pre class="screen">
				[root@netkiller src]# netmask 11.111.195.211/255.255.255.224
				11.111.195.192/27
			</pre>
			<pre class="screen">
$ netmask -r 192.168.1.0/255.255.255.0
192.168.1.0-192.168.1.255 (256)

$ netmask -r 192.168.1.0/255.255.255.192
192.168.1.0-192.168.1.63 (64)

$ netmask -r 192.168.1.0/255.255.255.252
192.168.1.0-192.168.1.3 (4)

$ netmask -r 192.168.1.0/28
192.168.1.0-192.168.1.15 (16)

$ netmask -r 192.168.1.0/24
192.168.1.0-192.168.1.255 (256)
			</pre>
			<p></p>
			<pre class="screen">
$ netmask -r 192.168.1.0/255.255.255.252
192.168.1.0-192.168.1.3 (4)

$ netmask -r 192.168.1.2/255.255.255.252
192.168.1.0-192.168.1.3 (4)

$ netmask -r 192.168.1.6/255.255.255.252
192.168.1.4-192.168.1.7 (4)

$ netmask -r 192.168.1.12/255.255.255.252
192.168.1.12-192.168.1.15 (4)

$ netmask -r 192.168.1.13/255.255.255.252
192.168.1.12-192.168.1.15 (4)

$ netmask -r 192.168.1.100/255.255.255.252
192.168.1.100-192.168.1.103 (4)

$ netmask -r 192.168.1.100/255.255.255.240
192.168.1.96-192.168.1.111 (16)

$ netmask -r
192.168.1.50/255.255.255.240
192.168.1.48-192.168.1.63 (16)
			</pre>
			<p>-b, --binary Output address/netmask pairs in binary äºè¿å¶</p>
			<pre class="screen">
$ netmask -b 192.168.1.0/255.255.255.240
11000000 10101000 00000001 00000000 / 11111111 11111111 11111111 11110000

$ netmask -b 172.16.0.0/255.255.252.0
10101100 00010000 00000000 00000000 / 11111111 11111111 11111100 00000000
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="arp"></a>11.10.6.Â arp - manipulate the system ARP cache</h3></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155721712"></a>11.10.6.1.Â display hosts</h4></div></div></div>
			
			<p>display (all) hosts in alternative (BSD) style</p>
			<pre class="screen">
				[root@dev2 ~]# arp -a
				? (192.168.3.253) at 00:1D:0F:82:05:DC [ether] on eth0
				? (192.168.3.48) at 00:25:64:9A:D7:CC [ether] on eth0
				? (192.168.3.101) at 00:25:64:A3:65:93 [ether] on eth0
				nis.example.com (192.168.3.5) at 00:25:64:9A:D7:E0 [ether] on eth0
				? (192.168.3.1) at 00:0F:E2:71:8E:FB [ether] on eth0
				? (192.168.3.153) at B8:AC:6F:25:D2:2E [ether] on eth0
			</pre>
			<p>display (all) hosts in default (Linux) style</p>
			<pre class="screen">
				[root@dev2 ~]# arp -e
				Address HWtype HWaddress Flags Mask Iface
				192.168.3.48 ether 00:25:64:9A:D7:CC C eth0
				192.168.3.101 ether 00:25:64:A3:65:93 C eth0
				nis.example.com ether 00:25:64:9A:D7:E0 C eth0
				192.168.3.1 ether 00:0F:E2:71:8E:FB C eth0
				10.0.0.1 ether 00:1F:12:55:A9:02 C eth0
				192.168.3.153 ether B8:AC:6F:25:D2:2E C eth0
			</pre>
			<p>don't resolve names</p>
			<pre class="screen">
				[root@dev2 ~]# arp -a -n
				? (192.168.3.253) at 00:1D:0F:82:05:DC [ether] on eth0
				? (192.168.3.48) at 00:25:64:9A:D7:CC [ether] on eth0
				? (192.168.3.101) at 00:25:64:A3:65:93 [ether] on eth0
				? (192.168.3.5) at 00:25:64:9A:D7:E0 [ether] on eth0
				? (192.168.3.1) at 00:0F:E2:71:8E:FB [ether] on eth0
				? (192.168.3.153) at B8:AC:6F:25:D2:2E [ether] on eth0
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155720656"></a>11.10.6.2.Â delete a specified entry</h4></div></div></div>
			
			<pre class="screen">
				[root@dev2 ~]# arp -d 192.168.3.101
				[root@dev2 ~]# arp -i eth1 -d 10.0.0.1
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155715072"></a>11.10.6.3.Â /proc/net/arp</h4></div></div></div>
			
			<pre class="screen">
				[root@dev2 ~]# cat /proc/net/arp
				IP address HW type Flags HW address Mask Device
				192.168.3.48 0x1 0x2 00:25:64:9A:D7:CC * eth0
				192.168.3.101 0x1 0x2 00:1E:7A:E0:47:40 * eth0
				192.168.3.5 0x1 0x2 00:25:64:9A:D7:E0 * eth0
				192.168.3.1 0x1 0x2 00:0F:E2:71:8E:FB * eth0
				192.168.3.153 0x1 0x2 B8:AC:6F:25:D2:2E * eth0
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155713360"></a>11.10.6.4.Â /etc/ethers</h4></div></div></div>
			
			<pre class="screen">
				# Ethernet-address IP-number
				00:25:64:9A:D7:CC 192.168.3.48
			</pre>
			<p>read new entries from file or from /etc/ethers</p>
			<pre class="screen">
				# arp -f
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="iproute2"></a>11.10.7.Â iproute2</h3></div></div></div>
		
		<pre class="screen">
			add å¢å è·¯ç±
			del å é¤è·¯ç±
			via ç½å³åºå£ IPå°å
			dev ç½å³åºå£ ç©çè®¾å¤å
		</pre>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155709488"></a>11.10.7.1.Â æ¥çå¸®å©ä¿¡æ¯</h4></div></div></div>
			
			<pre class="screen">
			
[root@gitlab ~]# ip route replace help
Usage: ip route { list | flush } SELECTOR
       ip route save SELECTOR
       ip route restore
       ip route showdump
       ip route get [ ROUTE_GET_FLAGS ] ADDRESS
                            [ from ADDRESS iif STRING ]
                            [ oif STRING ] [ tos TOS ]
                            [ mark NUMBER ] [ vrf NAME ]
                            [ uid NUMBER ] [ ipproto PROTOCOL ]
                            [ sport NUMBER ] [ dport NUMBER ]
       ip route { add | del | change | append | replace } ROUTE
SELECTOR := [ root PREFIX ] [ match PREFIX ] [ exact PREFIX ]
            [ table TABLE_ID ] [ vrf NAME ] [ proto RTPROTO ]
            [ type TYPE ] [ scope SCOPE ]
ROUTE := NODE_SPEC [ INFO_SPEC ]
NODE_SPEC := [ TYPE ] PREFIX [ tos TOS ]
             [ table TABLE_ID ] [ proto RTPROTO ]
             [ scope SCOPE ] [ metric METRIC ]
             [ ttl-propagate { enabled | disabled } ]
INFO_SPEC := { NH | nhid ID } OPTIONS FLAGS [ nexthop NH ]...
NH := [ encap ENCAPTYPE ENCAPHDR ] [ via [ FAMILY ] ADDRESS ]
	    [ dev STRING ] [ weight NUMBER ] NHFLAGS
FAMILY := [ inet | inet6 | mpls | bridge | link ]
OPTIONS := FLAGS [ mtu NUMBER ] [ advmss NUMBER ] [ as [ to ] ADDRESS ]
           [ rtt TIME ] [ rttvar TIME ] [ reordering NUMBER ]
           [ window NUMBER ] [ cwnd NUMBER ] [ initcwnd NUMBER ]
           [ ssthresh NUMBER ] [ realms REALM ] [ src ADDRESS ]
           [ rto_min TIME ] [ hoplimit NUMBER ] [ initrwnd NUMBER ]
           [ features FEATURES ] [ quickack BOOL ] [ congctl NAME ]
           [ pref PREF ] [ expires TIME ] [ fastopen_no_cookie BOOL ]
TYPE := { unicast | local | broadcast | multicast | throw |
          unreachable | prohibit | blackhole | nat }
TABLE_ID := [ local | main | default | all | NUMBER ]
SCOPE := [ host | link | global | NUMBER ]
NHFLAGS := [ onlink | pervasive ]
RTPROTO := [ kernel | boot | static | NUMBER ]
PREF := [ low | medium | high ]
TIME := NUMBER[s|ms]
BOOL := [1|0]
FEATURES := ecn
ENCAPTYPE := [ mpls | ip | ip6 | seg6 | seg6local | rpl ]
ENCAPHDR := [ MPLSLABEL | SEG6HDR ]
SEG6HDR := [ mode SEGMODE ] segs ADDR1,ADDRi,ADDRn [hmac HMACKEYID] [cleanup]
SEGMODE := [ encap | inline ]
ROUTE_GET_FLAGS := [ fibmatch ]
			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155708208"></a>11.10.7.2.Â å¯ç¨/ç¦ç¨ ç½ç»æ¥å£</h4></div></div></div>
			
			<pre class="screen">
			&lt;![CDATA[
sudo ip link set eth0 down
sudo ip link set eth0 up			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155706816"></a>11.10.7.3.Â æ¥çç¶æ</h4></div></div></div>
			
			<pre class="screen">
			
[root@localhost ~]# ip link show
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq state UP mode DEFAULT group default qlen 1000
    link/ether 00:e0:70:81:a0:f5 brd ff:ff:ff:ff:ff:ff
3: wlp1s0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/ether 40:9f:38:b6:e0:31 brd ff:ff:ff:ff:ff:ff
4: br-0e0f0a52c09e: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default 
    link/ether 02:42:c4:61:cb:51 brd ff:ff:ff:ff:ff:ff
5: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default 
    link/ether 02:42:8b:b0:1d:c1 brd ff:ff:ff:ff:ff:ff
16578: br-ad3d9e94154d: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DEFAULT group default 
    link/ether 02:42:5a:e6:15:f8 brd ff:ff:ff:ff:ff:ff
16582: vethb1a595b@if16581: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-ad3d9e94154d state UP mode DEFAULT group default 
    link/ether 2a:cb:a5:0e:ff:58 brd ff:ff:ff:ff:ff:ff link-netnsid 0			
			
			</pre>
			<p> -s, -stats, -statistics
				Output more information. If the option appears twice or more, the amount of information increases. As a rule, the information is statistics or some time values.
			</p>
			<pre class="screen">
			
[root@localhost ~]# ip -s link show
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    RX: bytes  packets  errors  dropped missed  mcast   
    524494906  58478    0       0       0       0       
    TX: bytes  packets  errors  dropped carrier collsns 
    524494906  58478    0       0       0       0       
2: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq state UP mode DEFAULT group default qlen 1000
    link/ether 00:e0:70:81:a0:f5 brd ff:ff:ff:ff:ff:ff
    RX: bytes  packets  errors  dropped missed  mcast   
    1650138393 3456155  0       1419    0       369     
    TX: bytes  packets  errors  dropped carrier collsns 
    631678091  1615937  0       0       0       0       
3: wlp1s0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/ether 40:9f:38:b6:e0:31 brd ff:ff:ff:ff:ff:ff
    RX: bytes  packets  errors  dropped missed  mcast   
    0          0        0       0       0       0       
    TX: bytes  packets  errors  dropped carrier collsns 
    0          0        0       0       0       0       
4: br-0e0f0a52c09e: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default 
    link/ether 02:42:c4:61:cb:51 brd ff:ff:ff:ff:ff:ff
    RX: bytes  packets  errors  dropped missed  mcast   
    0          0        0       0       0       0       
    TX: bytes  packets  errors  dropped carrier collsns 
    10148      114      0       0       0       0       
5: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default 
    link/ether 02:42:8b:b0:1d:c1 brd ff:ff:ff:ff:ff:ff
    RX: bytes  packets  errors  dropped missed  mcast   
    560        20       0       0       0       0       
    TX: bytes  packets  errors  dropped carrier collsns 
    0          0        0       0       0       0       
16578: br-ad3d9e94154d: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DEFAULT group default 
    link/ether 02:42:5a:e6:15:f8 brd ff:ff:ff:ff:ff:ff
    RX: bytes  packets  errors  dropped missed  mcast   
    4026856    31020    0       0       0       0       
    TX: bytes  packets  errors  dropped carrier collsns 
    534479810  41161    0       0       0       0       
16582: vethb1a595b@if16581: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-ad3d9e94154d state UP mode DEFAULT group default 
    link/ether 2a:cb:a5:0e:ff:58 brd ff:ff:ff:ff:ff:ff link-netnsid 0
    RX: bytes  packets  errors  dropped missed  mcast   
    4461136    31020    0       0       0       0       
    TX: bytes  packets  errors  dropped carrier collsns 
    534480956  41176    0       0       0       0   			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155704608"></a>11.10.7.4.Â æ¥ç IP å°å</h4></div></div></div>
			
			<p>æ¥çææIPå°å</p>
			<pre class="screen">
			
[root@localhost ~]# ip addr show enp2s0
2: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq state UP group default qlen 1000
    link/ether 00:e0:70:81:a0:f5 brd ff:ff:ff:ff:ff:ff
    inet 192.168.30.13/24 brd 192.168.30.255 scope global noprefixroute enp2s0
       valid_lft forever preferred_lft forever
[root@localhost ~]# ip addr show
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq state UP group default qlen 1000
    link/ether 00:e0:70:81:a0:f5 brd ff:ff:ff:ff:ff:ff
    inet 192.168.30.13/24 brd 192.168.30.255 scope global noprefixroute enp2s0
       valid_lft forever preferred_lft forever
3: wlp1s0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000
    link/ether 40:9f:38:b6:e0:31 brd ff:ff:ff:ff:ff:ff
4: br-0e0f0a52c09e: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noqueue state DOWN group default 
    link/ether 02:42:c4:61:cb:51 brd ff:ff:ff:ff:ff:ff
5: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default 
    link/ether 02:42:8b:b0:1d:c1 brd ff:ff:ff:ff:ff:ff
16578: br-ad3d9e94154d: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default 
    link/ether 02:42:5a:e6:15:f8 brd ff:ff:ff:ff:ff:ff
    inet 192.168.49.1/24 brd 192.168.49.255 scope global br-ad3d9e94154d
       valid_lft forever preferred_lft forever
    inet6 fe80::42:5aff:fee6:15f8/64 scope link 
       valid_lft forever preferred_lft forever
16582: vethb1a595b@if16581: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-ad3d9e94154d state UP group default 
    link/ether 2a:cb:a5:0e:ff:58 brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet6 fe80::28cb:a5ff:fe0e:ff58/64 scope link 
       valid_lft forever preferred_lft forever			
			
			</pre>
			<p>æ¾ç¤ºæ´»å¨ç¶æçIPå°å</p>
			<pre class="screen">
			
[root@localhost ~]# ip addr show up
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq state UP group default qlen 1000
    link/ether 00:e0:70:81:a0:f5 brd ff:ff:ff:ff:ff:ff
    inet 192.168.30.13/24 brd 192.168.30.255 scope global noprefixroute enp2s0
       valid_lft forever preferred_lft forever
5: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default 
    link/ether 02:42:8b:b0:1d:c1 brd ff:ff:ff:ff:ff:ff
16578: br-ad3d9e94154d: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default 
    link/ether 02:42:5a:e6:15:f8 brd ff:ff:ff:ff:ff:ff
    inet 192.168.49.1/24 brd 192.168.49.255 scope global br-ad3d9e94154d
       valid_lft forever preferred_lft forever
    inet6 fe80::42:5aff:fee6:15f8/64 scope link 
       valid_lft forever preferred_lft forever			
			
			</pre>
			<p>æ¥çæå®æ¥å£çIPå°å</p>
			<pre class="screen">
			
[root@localhost ~]# ip addr show enp2s0
2: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq state UP group default qlen 1000
    link/ether 00:e0:70:81:a0:f5 brd ff:ff:ff:ff:ff:ff
    inet 192.168.30.13/24 brd 192.168.30.255 scope global noprefixroute enp2s0
       valid_lft forever preferred_lft forever			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155700944"></a>11.10.7.5.Â æ¥çè·¯ç±è¡¨</h4></div></div></div>
			
			<pre class="screen">
			
[root@localhost ~]# ip route list
default via 192.168.30.1 dev enp2s0 proto static metric 100 
192.168.30.0/24 dev enp2s0 proto kernel scope link src 192.168.30.13 metric 100 
192.168.49.0/24 dev br-ad3d9e94154d proto kernel scope link src 192.168.49.1 
192.168.49.2 via 192.168.49.1 dev br-ad3d9e94154d 			
			
			</pre>
			<pre class="screen">
			
[root@localhost ~]# ip route get default
local 0.0.0.0 dev lo src 127.0.0.1 uid 0 
    cache &lt;local&gt; 
[root@localhost ~]# ip route get 192.168.49.2
192.168.49.2 dev br-ad3d9e94154d src 192.168.49.1 uid 0 
    cache 			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155698752"></a>11.10.7.6.Â æ·»å è·¯ç±</h4></div></div></div>
			
			<p>ä¸»æºè·¯ç±</p>
			<pre class="screen">
			
[root@gitlab ~]# ip route add 192.168.49.1 via 192.168.30.13 dev enp2s0
			
			</pre>
			<p>ç½ç»è·¯ç±ï¼æå®åä¸è·³IPå°å</p>
			<pre class="screen">	
[root@gitlab ~]# ip route add 192.168.0.0/24 via 192.168.0.1
			</pre>
			<p>æå®åºå£æ¥å£</p>
			<pre class="screen">
			
[root@gitlab ~]# ip route add 192.168.49.0/24 dev enp2s0			
			
			</pre>
			<pre class="screen">
			
[root@gitlab ~]# ip route add 192.168.49.0/24 via 192.168.30.13 dev enp2s0			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155694752"></a>11.10.7.7.Â å é¤è·¯ç±</h4></div></div></div>
			
			<pre class="screen">
ip route del 192.168.0.0/24 via 192.168.0.1
			</pre>
			<p></p>
			<pre class="screen">
			
ip route del 192.168.49.0/24 via 192.168.30.5 dev enp2s0			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155692560"></a>11.10.7.8.Â åæ´è·¯ç±</h4></div></div></div>
			
			<pre class="screen">
[root@router ~]# ip route
192.168.5.0/24 dev eth0 proto kernel scope link src 192.168.5.47
192.168.3.0/24 dev eth0 proto kernel scope link src 192.168.3.47
default via 192.168.3.1 dev eth0

[root@router ~]# ip route change default via 192.168.5.1 dev eth0

[root@router ~]# ip route list
192.168.5.0/24 dev eth0 proto kernel scope link src 192.168.5.47
192.168.3.0/24 dev eth0 proto kernel scope link src 192.168.3.47
default via 192.168.5.1 dev eth0
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155690864"></a>11.10.7.9.Â æ¿æ¢å·²æçè·¯ç±</h4></div></div></div>
			
			<pre class="screen">
ip route replace
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155689648"></a>11.10.7.10.Â å¢å é»è®¤è·¯ç±</h4></div></div></div>
			
			<p>192.168.0.1 æ¯æçé»è®¤è·¯ç±å¨</p>
			<pre class="screen">
ip route add default via 192.168.0.1 dev eth0
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155687888"></a>11.10.7.11.Â cache</h4></div></div></div>
			
			<pre class="screen">
ip route flush cache
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155686624"></a>11.10.7.12.Â åªæ¥ç ipv4 å°å</h4></div></div></div>
			
			<pre class="screen">
			
[root@development ~]# ip -4 -o addr 
1: lo    inet 127.0.0.1/8 scope host lo\       valid_lft forever preferred_lft forever
2: enp2s0    inet 192.168.30.11/24 brd 192.168.30.255 scope global enp2s0\       valid_lft forever preferred_lft forever
2: enp2s0    inet 192.168.30.13/24 brd 192.168.30.255 scope global secondary noprefixroute enp2s0\       valid_lft forever preferred_lft forever
4: docker0    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0\       valid_lft forever preferred_lft forever
45: br-a32fa1ca1437    inet 172.18.0.1/16 brd 172.18.255.255 scope global br-a32fa1ca1437\       valid_lft forever preferred_lft forever
71: br-2bb2f800fb7a    inet 172.20.0.1/16 brd 172.20.255.255 scope global br-2bb2f800fb7a\       valid_lft forever preferred_lft forever
120: br-fc7ddec9d410    inet 172.21.0.1/16 brd 172.21.255.255 scope global br-fc7ddec9d410\       valid_lft forever preferred_lft forever
399: br-a82ea0e05c7b    inet 172.26.0.1/16 brd 172.26.255.255 scope global br-a82ea0e05c7b\       valid_lft forever preferred_lft forever
149: br-6d50d8b97aac    inet 172.22.0.1/16 brd 172.22.255.255 scope global br-6d50d8b97aac\       valid_lft forever preferred_lft forever
1209: br-2eeefaf97995    inet 172.28.0.1/16 brd 172.28.255.255 scope global br-2eeefaf97995\       valid_lft forever preferred_lft forever
185: br-3a54bbf16bd3    inet 172.24.0.1/16 brd 172.24.255.255 scope global br-3a54bbf16bd3\       valid_lft forever preferred_lft forever
717: br-f5d2855f7db6    inet 172.19.0.1/16 brd 172.19.255.255 scope global br-f5d2855f7db6\       valid_lft forever preferred_lft forever
206: br-33100abbf284    inet 172.25.0.1/16 brd 172.25.255.255 scope global br-33100abbf284\       valid_lft forever preferred_lft forever
734: br-92f61288b627    inet 172.23.0.1/16 brd 172.23.255.255 scope global br-92f61288b627\       valid_lft forever preferred_lft forever
482: br-469d326ed73c    inet 172.27.0.1/16 brd 172.27.255.255 scope global br-469d326ed73c\       valid_lft forever preferred_lft forever			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="table"></a>11.10.7.13.Â ç­ç¥è·¯ç±</h4></div></div></div>
			
			<pre class="screen">
		
æ¯å¦æä»¬çLINUXæ3ä¸ªç½å¡
eth0: 192.168.1.1ãããï¼å±åç½ï¼
eth1: 172.17.1.2ããã ï¼default gw=172.17.1.1ï¼å¯ä»¥ä¸INTERNETï¼
eth2: 192.168.10.2ãã ï¼è¿æ¥ç¬¬äºè·¯ç±192.168.10.1ï¼ä¹å¯ä»¥ä¸INTERNETï¼

å®ç°ä¸¤ä¸ªç®ç
1ãè®©192.168.1.66ä»ç¬¬äºè·¯ç±ä¸ç½ï¼å¶ä»äººèµ°é»è®¤è·¯ç±
2ãè®©ææäººè®¿é®192.168.1.1çFTPæ¶ï¼è½¬å°192.168.10.96ä¸

éç½®æ¹æ³ï¼
vi /etc/iproute2/rt_tables

#
# reserved values
#
255     local
254     main
253     default
100     ROUTE2

# ip route default via 172.17.1.1 dev eth1
# ip route default via 192.168.10.1 dev eth2 table ROUTE2
# ip rule add from 192.168.1.66 pref 1001 table ROUTE2
# ip rule add to 192.168.10.96 pref 1002 table ROUTE2
# echo 1 &gt;; /proc/sys/net/ipv4/ip_forward
# iptables -t nat -A POSTROUTING -j MASQUERADE
# iptables -t nat -A PREROUTING -d 192.168.1.1 -p tcp --dport 21 -j DNAT --to 192.168.10.96
# ip route flush cache	
		
			</pre>
			<pre class="screen">
		
http://phorum.study-area.org/viewtopic.php?t=10085
å¼ç¨ï¼# å°å¤ç¶²å¡ 
EXT_IF="eth0" 
      
# HiNet IP 
EXT_IP1="111.111.111.111" 
EXT_MASK1="24" 
GW1="111.111.111.1" 

# SeedNet IP 
EXT_IP2="222.222.222.222" 
EXT_MASK2="24" 
GW2="222.222.222.1" 

# ?#93;å® ip 
ip addr add $EXT_IP1/$EXT_MASK1 dev $EXT_IF 
ip addr add $EXT_IP2/$EXT_MASK2 dev $EXT_IF 

# ?#93;å® HiNet routing 
ip rule add to $EXT_IP1/$EXT_MASK1 lookup 201 
ip route add default via $GW1 dev $EXT_IF table 201 

# ?#93;å® SeedNet routing 
ip rule add to $EXT_IP2/$EXT_MASK2 lookup 202 
ip route add default via $GW2 dev $EXT_IF table 202 

# ?#93;å® Default route 
ip route replace default equalize \ 
   nexthop via $GW1 dev $EXT_IF \ 
   nexthop via $GW2 dev $EXT_IF 
    
# æ¸é¤ route cache 
ip route flush cache    


å®è¿éçip ruleä¹æ¯è¿ä¹ä½¿ç¨ç		
		
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="nexthop"></a>11.10.7.14.Â è´è½½åè¡¡</h4></div></div></div>
			
			<pre class="screen">
			ip route add default scope global nexthop dev ppp0 nexthop dev ppp1
		</pre>
			<pre class="screen">
			neo@debian:~$ sudo ip route add default scope global nexthop via 192.168.3.1 dev eth0 weight 1 \
			nexthop via 192.168.5.1 dev eth2 weight 1

			neo@debian:~$ sudo ip route
			192.168.5.0/24 dev eth1 proto kernel scope link src 192.168.5.9
			192.168.4.0/24 dev eth0 proto kernel scope link src 192.168.4.9
			192.168.3.0/24 dev eth0 proto kernel scope link src 192.168.3.9
			172.16.0.0/24 dev eth2 proto kernel scope link src 172.16.0.254
			default
			nexthop via 192.168.3.1 dev eth0 weight 1
			nexthop via 192.168.5.1 dev eth1
			weight 1

		</pre>
			<pre class="screen">
			ip route add default scope global nexthop via $P1 dev $IF1 weight 1 \
			nexthop via $P2 dev $IF2 weight 1
		</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ppp.masq"></a>11.10.7.15.Â MASQUERADE</h4></div></div></div>
			
			<pre class="screen">
iptablesâtnatâAPOSTROUTINGâd192.168.1.0/24âs0/0âoppp0âjMASQUERD
iptablesâtnatâAPOSTROUTINGâs192.168.1.0/24-jSNATâto202.103.224.58
iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -j MASQUERADE
		</pre>
			<p></p>
			<pre class="screen">
#ip route add via ppp0 dev eth0
#ip route add via 202.103.224.58 dev eth0
		</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="iptunnel"></a>11.10.7.16.Â ip tunnel</h4></div></div></div>
			
			<p>ipip æ¯IPé§éæ¨¡å</p>
			<div class="procedure"><a id="idm148155674672"></a><p class="title"><strong>è¿ç¨Â 11.1.Â ip tunnel IPé§ééç½®æ­¥éª¤</strong></p><ol class="procedure" type="1"><li class="step">
					<p>server 1</p>
					<pre class="screen">
modprobe ipip
ip tunnel add mytun mode ipip remote 220.201.35.11 local 211.100.37.167 ttl 255
ifconfig mytun 10.42.1.1
route add -net 10.42.1.0/24 dev mytun
				</pre>
				</li><li class="step">
					<p>server 2</p>
					<pre class="screen">
modprobe ipip
ip tunnel add mytun mode ipip remote 211.100.37.167 local 220.201.35.11 ttl 255
ifconfig mytun 10.42.1.2
route add -net 10.42.1.0/24 dev mytun
				</pre>
				</li><li class="step">
					<p>nat</p>
					<pre class="screen">
/sbin/iptables -t nat -A POSTROUTING -s 10.42.1.0/24 -j MASQUERADE
/sbin/iptables -t nat -A POSTROUTING -s 211.100.37.0/24 -j MASQUERADE
				</pre>
				</li></ol></div>
			<p>å é¤è·¯ç±è¡¨</p>
			<pre class="screen">
		
route del -net 10.42.1.0/24 dev mytun		
		
			</pre>
			<p>ä¿®æ¹IPé§éçIP</p>
			<pre class="screen">
		
ifconfig mytun 10.10.10.220
route add -net 10.10.10.0/24 dev mytun		
		
			</pre>
			<p>ip ä¼ªè£</p>
			<pre class="screen">
		
/sbin/iptables -t nat -A POSTROUTING -s 10.10.10.0/24 -j MASQUERADE
		
			</pre>
		</div>
	</div>
	
	
	
	
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="vlan"></a>11.10.8.Â VLAN</h3></div></div></div>
		
		<p>é¦åéç¡®ä¿å è½½äºåæ ¸æ¨¡å 802.1q</p>
		<pre class="screen">
		
[root@development ~]# lsmod | grep 8021q
[root@development ~]# modprobe 8021q
		
		</pre>
		<p>å è½½åä¼çæç®å½/proc/net/vlan </p>
		<pre class="screen">
		
[root@development ~]# cat /proc/net/vlan/config
VLAN Dev name | VLAN ID
Name-Type: VLAN_NAME_TYPE_RAW_PLUS_VID_NO_PAD		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="bridge"></a>11.10.9.Â ç½æ¡¥</h3></div></div></div>
		
		<p>Linux ç³»ç»4ä¸ªç©çç½å¡çåç§°ååå«ä¸ºeth0ï¼eth1ï¼eth2ï¼eth3ãæä»¬å°åä¸ªç½å£æ¡¥æ¥å°br0ç«¯å£ã</p>
		<p>ä½ å¯ä»¥è¿æ ·çè§£ vlan 2, vlan ip 192.168.0.1ï¼ç¶åå°4ä¸ªæ¥å£ååå°vlan2, è¿æ¶è¿4ä¸ªæ¥å£å¯ä»¥éè¿vlan 2è®¿é®å¶ä»ç¨æ·ãæåªæ¯åäºä¸ä¸ªæ¯å»ï¼è®©ä½ è½å¤çè§£ã</p>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155661648"></a>11.10.9.1.Â brctl</h4></div></div></div>
			
			<pre class="screen">
			
[root@localhost ~]# dnf -y install bridge-utils			
			
			</pre>
			<pre class="screen">
# brctl addbr br0

# brctl addif br0 eth0
# brctl addif br0 eth1
# brctl addif br0 eth2
# brctl addif br0 eth3

# ifconfig eth0 0.0.0.0
# ifconfig eth1 0.0.0.0
# ifconfig eth2 0.0.0.0
# ifconfig eth3 0.0.0.0

# ifconfig br0 192.168.0.1
		</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155659808"></a>11.10.9.2.Â bridge - show / manipulate bridge addresses and devices</h4></div></div></div>
			
			<pre class="screen">
			
[root@localhost ~]# bridge 
Usage: bridge [ OPTIONS ] OBJECT { COMMAND | help }
       bridge [ -force ] -batch filename
where	OBJECT := { link | fdb | mdb | vlan | monitor }
	OPTIONS := { -V[ersion] | -s[tatistics] | -d[etails] |
		     -o[neline] | -t[imestamp] | -n[etns] name |
		     -c[ompressvlans] -color -p[retty] -j[son] }
[root@localhost ~]# bridge link
16582: vethb1a595b@if16581: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br-ad3d9e94154d state forwarding priority 32 cost 2 
16586: veth1@veth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br0 state forwarding priority 32 cost 2 
16587: veth0@veth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br0 state forwarding priority 32 cost 2 			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155657760"></a>11.10.9.3.Â åå»ºç½æ¡¥</h4></div></div></div>
			
			<pre class="screen">
			
ip link add name br0 type bridge
ip addr add 192.168.3.1/24 dev br0
ip link set br0 up			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155656400"></a>11.10.9.4.Â vethè®¾å¤</h4></div></div></div>
			
			<pre class="screen">
			
[root@localhost ~]# ip link add name br0 type bridge
[root@localhost ~]# ip addr add 192.168.3.1/24 dev br0
[root@localhost ~]# ip link set br0 up

[root@localhost ~]# ifconfig br0
br0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.3.1  netmask 255.255.255.0  broadcast 0.0.0.0
        inet6 fe80::444c:55ff:fe96:d7dd  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether 46:4c:55:96:d7:dd  txqueuelen 1000  (Ethernet)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 6  bytes 516 (516.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0	

[root@localhost ~]# ip route
default via 192.168.30.1 dev enp2s0 proto static metric 100 
192.168.3.0/24 dev br0 proto kernel scope link src 192.168.3.1

[root@localhost ~]# ping -c 1 -I br0 192.168.3.1
PING 192.168.3.1 (192.168.3.1) from 192.168.3.1 br0: 56(84) bytes of data.
64 bytes from 192.168.3.1: icmp_seq=1 ttl=64 time=0.052 ms

--- 192.168.3.1 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.052/0.052/0.052/0.000 ms
			
			</pre>
			<pre class="screen">
			
ip link add veth0 type veth peer name veth1
ip addr add 192.168.3.11/24 dev veth0
ip addr add 192.168.3.12/24 dev veth1
ip link set veth0 up
ip link set veth1 up			
			
			</pre>
			<p>åå»ºvethè®¾å¤ï¼å¹¶éç½®IP</p>
			<pre class="screen">
			
[root@localhost ~]# ip link add veth0 type veth peer name veth1
[root@localhost ~]# ip addr add 192.168.3.11/24 dev veth0
[root@localhost ~]# ip addr add 192.168.3.12/24 dev veth1
[root@localhost ~]# ip link set veth0 up
[root@localhost ~]# ip link set veth1 up

[root@localhost ~]# ifconfig veth0
veth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.3.11  netmask 255.255.255.0  broadcast 0.0.0.0
        inet6 fe80::849:3eff:fe7f:646f  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether 0a:49:3e:7f:64:6f  txqueuelen 1000  (Ethernet)
        RX packets 7  bytes 586 (586.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 7  bytes 586 (586.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

[root@localhost ~]# ifconfig veth1
veth1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.3.12  netmask 255.255.255.0  broadcast 0.0.0.0
        inet6 fe80::a0ec:9fff:feb2:d8ff  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether a2:ec:9f:b2:d8:ff  txqueuelen 1000  (Ethernet)
        RX packets 7  bytes 586 (586.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 7  bytes 586 (586.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        
[root@localhost ~]# ip route
default via 192.168.30.1 dev enp2s0 proto static metric 100 
192.168.3.0/24 dev br0 proto kernel scope link src 192.168.3.1 
192.168.3.0/24 dev veth0 proto kernel scope link src 192.168.3.11 
192.168.3.0/24 dev veth1 proto kernel scope link src 192.168.3.12         
			
			</pre>
			<p></p>
			<pre class="screen">
			
[root@localhost ~]# ip link set dev veth0 master br0	
[root@localhost ~]# ip link set dev veth1 master br0	

[root@localhost ~]# bridge link
16582: vethb1a595b@if16581: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br-ad3d9e94154d state forwarding priority 32 cost 2 
16586: veth1@veth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br0 state forwarding priority 32 cost 2 
16587: veth0@veth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br0 state forwarding priority 32 cost 2 			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155652640"></a>11.10.9.5.Â æéä¸¤ä¸ª namespace ä¹é´ç veth</h4></div></div></div>
			
			<pre class="screen">
			
# åå»º namespace
ip netns a ns1
ip netns a ns2

# åå»ºä¸å¯¹ veth-pair veth0 veth1
ip link add veth0 type veth peer name veth1

# å° veth0 veth1 åå«å å¥ä¸¤ä¸ª ns
ip link set veth0 netns ns1
ip link set veth1 netns ns2	

# ç»ä¸¤ä¸ª veth0 veth1 éä¸ IP å¹¶å¯ç¨
ip netns exec ns1 ip addr add 192.168.3.11/24 dev veth0
ip netns exec ns1 ip link set veth0 up

ip netns exec ns2 ip addr add 192.168.3.12/24 dev veth1
ip netns exec ns2 ip link set veth1 up

# ä» veth0 ping veth1
[root@localhost ~]# ip netns exec ns1 ping -c 3 192.168.3.12
PING 192.168.3.12 (192.168.3.12) 56(84) bytes of data.
64 bytes from 192.168.3.12: icmp_seq=1 ttl=64 time=0.025 ms
64 bytes from 192.168.3.12: icmp_seq=2 ttl=64 time=0.019 ms
64 bytes from 192.168.3.12: icmp_seq=3 ttl=64 time=0.022 ms

--- 192.168.3.12 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2025ms
rtt min/avg/max/mdev = 0.019/0.022/0.025/0.002 ms
			
			</pre>
			<p></p>
			<pre class="screen">
			
[root@localhost ~]# ip netns a ns1
[root@localhost ~]# ip netns a ns2			
[root@localhost ~]# ip netns 
ns2 (id: 2)
ns1 (id: 1)			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155649408"></a>11.10.9.6.Â éè¿ç½æ¡¥è¿æ¥ veth-pair</h4></div></div></div>
			
			<pre class="screen">
			
#åå»º bridge br0			
ip link add name br0 type bridge
ip addr add 192.168.3.1/24 dev br0
ip link set br0 up

# åå»ºä¸¤å¯¹ veth-pair
ip l a veth0 type veth peer name br-veth0
ip l a veth1 type veth peer name br-veth1




# åå«å°ä¸¤å¯¹ veth-pair å å¥ä¸¤ä¸ª ns å br0
ip l s veth0 netns ns1
ip l s br-veth0 master br0
ip addr add 192.168.3.10/24 dev br-veth0
ip l s br-veth0 up

ip l s veth1 netns ns2
ip l s br-veth1 master br0
ip l s br-veth1 up

# ç»ä¸¤ä¸ª ns ä¸­ç veth éç½® IP å¹¶å¯ç¨
ip netns exec ns1 ip a a 10.1.1.2/24 dev veth0
ip netns exec ns1 ip l s veth0 up

ip netns exec ns2 ip a a 10.1.1.3/24 dev veth1
ip netns exec ns2 ip l s veth1 up

# veth0 ping veth1
[root@localhost ~]# ip netns exec ns1 ping -c 3 192.168.3.12
PING 192.168.3.12 (192.168.3.12) 56(84) bytes of data.
64 bytes from 192.168.3.12: icmp_seq=1 ttl=64 time=0.024 ms
64 bytes from 192.168.3.12: icmp_seq=2 ttl=64 time=0.017 ms
64 bytes from 192.168.3.12: icmp_seq=3 ttl=64 time=0.014 ms

--- 192.168.3.12 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2065ms
rtt min/avg/max/mdev = 0.014/0.018/0.024/0.005 ms
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idm148155648256"></a>11.10.9.7.Â æ·»å è®¾å¤å°ç½æ¡¥</h4></div></div></div>
			
			<p>æ·»å ç©çè®¾å¤</p>
			<pre class="screen">
			
ip link set dev eth0 master br0			
			
			</pre>
			<p>æ·»å èæè®¾å¤</p>
			<pre class="screen">
			
ip link set dev veth0 master br0			
			
			</pre>
			<p></p>
			<pre class="screen">
			
[root@localhost ~]# ip link set dev veth0 master br0
[root@localhost ~]# ip link set dev veth1 master br0

[root@localhost ~]# ip route
default via 192.168.30.1 dev enp2s0 proto static metric 100 
192.168.3.0/24 dev br0 proto kernel scope link src 192.168.3.1 
192.168.3.0/24 dev veth0 proto kernel scope link src 192.168.3.11 
192.168.3.0/24 dev veth1 proto kernel scope link src 192.168.3.12 

[root@localhost ~]# bridge link
16586: veth1@veth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br0 state forwarding priority 32 cost 2 
16587: veth0@veth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master br0 state forwarding priority 32 cost 2 			
			
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="zebra"></a>11.10.10.Â Zebra</h3></div></div></div>
		
		<p>http://www.zebra.org/</p>
	</div>
</div><div xmlns="" id="SOHUCS"></div><script xmlns="" charset="utf-8" type="text/javascript" src="https://cy-cdn.kuaizhan.com/upload/changyan.js"></script><script xmlns="" type="text/javascript">
window.changyan.api.config({
appid: 'cyvwjQUG3',
conf: 'prod_ef966242df3d8b5acb1e0ee9fc01cafe'
});
</script><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="wireless.html">ä¸ä¸é¡µ</a>Â </td><td width="20%" align="center"><a accesskey="u" href="index.html">ä¸ä¸çº§</a></td><td width="40%" align="right">Â <a accesskey="n" href="linux.network.old.html">ä¸ä¸é¡µ</a></td></tr><tr><td width="40%" align="left" valign="top">11.9.Â Wireless - WiFi éç½®Â </td><td width="20%" align="center"><a accesskey="h" href="../../index.html">èµ·å§é¡µ</a></td><td width="40%" align="right" valign="top">Â 11.11.Â æ©æçæ¬</td></tr></table></div><script xmlns="">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-11694057-1', 'auto');
  ga('send', 'pageview');

</script><script xmlns="" async="async">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script xmlns="" async="async">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script></body></html>