<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>第 168 章 Voice over IP(VoIP)</title><link rel="stylesheet" type="text/css" href="../docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><meta name="keywords" content="&#10;&#9;&#9;&#9;&#9;bash,bunzip2,busybox,bzcat,bzcmp,bzdiff,bzegrep,bzexe,bzfgrep,bzgrep,bzip2,bzip2recover,bzless,bzmore,cat,chgrp,chmod,chown,chvt,cp,cpio,dash,date,dbus-cleanup-sockets,dbus-daemon,dbus-uuidgen,dd,df,dir,dmesg,dnsdomainname,domainname,dumpkeys,echo,ed,egrep,false,fgconsole,fgrep,fuser,fusermount,grep,gunzip,gzexe,gzip,hostname,ip,kbd_mode,kill,less,lessecho,lessfile,lesskey,lesspipe,ln,loadkeys,login,ls,lsmod,mkdir,mknod,mktemp,more,mount,mountpoint,mt,mt-gnu,mv,nano,nc,nc.openbsd,netcat,netstat,nisdomainname,ntfs-3g,ntfs-3g.probe,ntfs-3g.secaudit,ntfs-3g.usermap,open,openvt,pidof,ping,ping6,plymouth,ps,pwd,rbash,readlink,rm,rmdir,rnano,run-parts,sed,setfont,setupcon,sh,sh.distrib,sleep,static-sh,stty,su,sync,tailf,tar,tempfile,touch,true,ulockmgr_server,umount,uname,uncompress,unicode_start,vdir,which,ypdomainname,zcat,zcmp,zdiff,zegrep,zfgrep,zforce,zgrep,zless,zmore,znew,,/sbin/:,acpi_available,apm_available,apparmor_parser,badblocks,blkid,blockdev,bootlogd,cfdisk,crda,ctrlaltdel,debugfs,depmod,dhclient,dhclient3,dhclient-script,dmsetup,dosfsck,dosfslabel,dump,dumpe2fs,e2fsck,e2image,e2label,e2undo,ethtool,fdisk,findfs,fsck,fsck.cramfs,fsck.ext2,fsck.ext3,fsck.ext4,fsck.ext4dev,fsck.minix,fsck.msdos,fsck.nfs,fsck.vfat,fstab-decode,getty,halt,hdparm,hwclock,ifconfig,ifdown,ifquery,ifup,init,initctl,insmod,insserv,installkernel,ip,ip6tables,ip6tables-restore,ip6tables-save,ipmaddr,iptables,iptables-restore,iptables-save,iptunnel,isosize,iwconfig,iwevent,iwgetid,iwlist,iwpriv,iwspy,kbdrate,killall5,ldconfig,ldconfig.real,logsave,losetup,lsmod,MAKEDEV,mii-tool,mkdosfs,mke2fs,mkfs,mkfs.bfs,mkfs.cramfs,mkfs.ext2,mkfs.ext3,mkfs.ext4,mkfs.ext4dev,mkfs.minix,mkfs.msdos,mkfs.vfat,mkhomedir_helper,mkswap,modinfo,modprobe,mountall,mount.fuse,mount.nfs,mount.nfs4,mount.ntfs,mount.ntfs-3g,nameif,on_ac_power,pam_tally,parted,partprobe,pivot_root,plipconfig,plymouthd,pmap_dump,pmap_set,portmap,poweroff,rarp,raw,rdump,reboot,regdbdump,reload,resize2fs,restart,restore,rfkill,rmmod,route,rpc.statd,rrestore,rtacct,rtmon,runlevel,sfdisk,shadowconfig,showmount,shutdown,slattach,sm-notify,ss,start,startpar,start-stop-daemon,status,stop,sulogin,swapoff,swapon,switch_root,sysctl,tc,telinit,tune2fs,udevadm,udevd,umount.nfs,umount.nfs4,unix_chkpwd,unix_update,upstart-udev-bridge,ureadahead,wipefs,wpa_action,wpa_cli,wpa_supplicant&#10;&#9;&#9;&#9;, &#10;&#9;&#9;&#9;&#9;a2p,acyclic,addftinfo,addpart,afmtodit,animate,anytopnm,apg,apgbfm,apport-bug,apport-cli,apport-collect,apport-unpack,apropos,apt-cache,apt-cdrom,apt-config,apt-extracttemplates,apt-ftparchive,apt-get,aptitude,aptitude-create-state-bundle,aptitude-run-state-bundle,apt-key,apt-mark,apt-sortpkgs,arch,arping,asciitopgm,at,atktopbm,atq,atrm,awk,base64,basename,bashbug,batch,bc,bcomps,bconsole,bdftopcf,bdftops,bdftruncate,bioradtopgm,bmptopnm,bmptoppm,brushtopbm,bsd-mailx,bsd-write,byobu,byobu-config,byobu-export,byobu-janitor,byobu-launch,byobu-launcher,byobu-launcher-install,byobu-launcher-uninstall,byobu-reconnect-sockets,byobu-select-profile,byobu-select-session,byobu-status,byobu-status-detail,c2ph,cal,calendar,captoinfo,catchsegv,catman,cautious-launcher,ccomps,chage,chattr,chcon,check-bios-nx,check-language-support,chem,chfn,chkdupexe,chrt,chsh,circo,ckbcomp,ck-history,ck-launch-session,ck-list-sessions,cksum,clear,clear_console,cmp,cmuwmtopbm,codepage,col,colcrt,colrm,column,comm,compare,compose,composite,config_data,conjure,convert,corelist,cpan,cpan2dist,cpanp,cpanp-run-perl,cpp,cpp-4.4,createrepo,c_rehash,crontab,csplit,ctstat,curl,curlftpfs,cut,dbilogstrip,dbiprof,dbiproxy,dbmmanage,dbus-monitor,dbus-send,ddate,deallocvt,debconf,debconf-apt-progress,debconf-communicate,debconf-copydb,debconf-escape,debconf-set-selections,debconf-show,defoma,defoma-app,defoma-font,defoma-hints,defoma-id,defoma-psfont-installer,defoma-subst,defoma-user,delpart,dh_bash-completion,dh_installdefoma,dh_installxmlcatalogs,dh_pycentral,dh_pysupport,dialog,diff,diff3,diffimg,dig,dijkstra,dircolors,dirname,display,do-release-upgrade,dot,dot2gxl,dotlockfile,dotty,dpkg,dpkg-deb,dpkg-divert,dpkg-query,dpkg-split,dpkg-statoverride,dpkg-trigger,dprofpp,du,dumphint,dumpkeys,dvipdf,easy_install,easy_install-2.6,edit,editor,eject,enc2xs,encode_keychange,env,envsubst,eps2eps,epsffit,eqn,eqn2graph,ex,expand,expiry,expr,extractres,eyuvtoppm,factor,faillog,fallocate,fc-cache,fc-cat,fc-list,fc-match,fc-query,fc-scan,fdp,fiascotopnm,file,find,find2perl,findsmb,fitstopnm,fixdlsrps,fixfmps,fixmacps,fixproc,fixpsditps,fixpspps,fixscribeps,fixtpps,fixwfwps,fixwpps,fixwwps,flock,flow-capture,flow-cat,flow-dscan,flow-expire,flow-export,flow-fanout,flow-filter,flow-gen,flow-header,flow-import,flow-log2rrd,flow-mask,flow-merge,flow-nfilter,flow-print,flow-receive,flow-report,flow-rpt2rrd,flow-rptfmt,flow-send,flow-split,flow-stat,flow-tag,flow-xlate,fmt,fold,font2c,fontconfig-voodoo,fonttosfnt,fping,fping6,free,fribidi,from,fstopgm,ftp,funzip,g3topbm,gawk,gc,gdiffmk,gdk-pixbuf-query-loaders,gemtopbm,gemtopnm,gendiff,geqn,GET,getafm,getconf,getent,getkeycodes,getopt,gettext,gettext.sh,ghostscript,giftopnm,ginstall-info,gio-querymodules,git,git-receive-pack,git-shell,git-upload-archive,git-upload-pack,gmetric,gnokii,gnuplot,gnuplot-nox,gouldtoppm,gpasswd,gpg,gpgsplit,gpgv,gpg-zip,gpic,grap2graph,grn,grodvi,groff,groffer,grog,grolbp,grolj4,grops,grotty,groups,grub-bin2h,grub-editenv,grub-fstest,grub-mkelfimage,grub-mkfont,grub-mkimage,grub-mkisofs,grub-mkpasswd-pbkdf2,grub-mkrelpath,grub-mkrescue,grub-script-check,gs,gsbj,gsdj,gsdj500,gslj,gslp,gsnd,gstat,gtbl,gtk-query-immodules-2.0,gtk-update-icon-cache,gvcolor,gvimtutor,gvpack,gvpr,gxditview,gxl2dot,h2ph,h2xs,hd,head,HEAD,helpztags,hexdump,hipstopgm,host,hostid,hpftodit,htdbm,htdigest,htpasswd,i386,icontopbm,iconv,id,identify,igawk,ilbmtoppm,imgtoppm,import,includeres,indexer,indxbib,info,infobrowser,infocmp,infokey,infotocap,innochecksum,innotop,install,install-info,instmodsh,ionice,iostat,ipcmk,ipcrm,ipcs,ipmicmd,ipmilan,ipmish,ipmitool,ipmi_ui,iptables-xml,join,jpegtopnm,killall,kvm-ok,l4p-tmpl,landscape-sysinfo,last,lastb,lastlog,lcf,ldd,leaftoppm,lefty,less,lessecho,lessfile,lesskey,lesspipe,lexgrog,libnetcfg,line,link,linux32,linux64,linux-boot-prober,lispmtopgm,lkbib,lneato,lnstat,loadkeys,loadunimap,locale,localedef,locate,lockfile-check,lockfile-create,lockfile-remove,lockfile-touch,logger,logname,look,lookbib,lorder,lsattr,lsb_release,lscpu,lshw,lsof,lspci,lspgpot,lsusb,ltrace,lwp-download,lwp-dump,lwp-mirror,lwp-request,lwp-rget,lzcat,lzma,macptopbm,mail,Mail,mail-lock,mailq,mail-touchlock,mail-unlock,mailx,make,make-memtest86+-boot-floppy,make_method,man,mandb,manhole,manpath,mapscrn,mawk,mcookie,md5sum,md5sum.textutils,mdatopbm,memcached,mesg,mgrtopbm,mkfifo,mkfontdir,mkfontscale,mk_modmap,mktap,mlocate,mmroff,modifyrepo,mogrify,montage,motd+shell,mpstat,msql2mysql,mtr,mtvtoppm,munin-check,munin-cron,munindoc,mutt,mutt_dotlock,myisamchk,myisam_ftdump,myisamlog,myisampack,my_print_defaults,mysql,mysqlaccess,mysqladmin,mysqlanalyze,mysqlbinlog,mysqlbug,mysqlcheck,mysql_client_test,mysql_client_test_embedded,mysql_convert_table_format,mysqld_multi,mysqld_safe,mysqldump,mysqldumpslow,mysql_find_rows,mysql_fix_extensions,mysql_fix_privilege_tables,mysqlhotcopy,mysqlimport,mysql_install_db,mysqloptimize,mysqlrepair,mysqlreport,mysql_secure_installation,mysql_setpermission,mysqlshow,mysqlslap,mysqltest,mysqltest_embedded,mysql_tzinfo_to_sql,mysql_upgrade,mysql_waitpid,mysql_zap,mytop,namei,nano,nawk,ncal,ncat,ncftp,ncftp3,ncftpbatch,ncftpbookmarks,ncftpget,ncftpls,ncftpput,ncftpspooler,ncurses5-config,ncursesw5-config,ndiff,neato,neotoppm,neqn,net,netkit-ftp,net.samba3,net-snmp-config,netstat-nat,newaliases,newgrp,ngettext,nice,nl,nmap,nmblookup,nmblookup.samba3,nmon,nohup,nop,nroff,nslookup,nstat,nsupdate,od,oldfind,omshell,on_ac_power,openipmicmd,openipmish,openssl,openssl-vulnkey,os-prober,pager,palmtopnm,pamcut,pamdeinterlace,pamdice,pamfile,pamoil,pamstack,pamstretch,pamstretch-gen,paperconf,parsechangelog,partx,passwd,paste,patch,pathchk,pbmclean,pbmlife,pbmmake,pbmmask,pbmpage,pbmpscale,pbmreduce,pbmtext,pbmtextps,pbmto10x,pbmtoascii,pbmtoatk,pbmtobbnbg,pbmtocmuwm,pbmtoepsi,pbmtoepson,pbmtog3,pbmtogem,pbmtogo,pbmtoicon,pbmtolj,pbmtomacp,pbmtomda,pbmtomgr,pbmtonokia,pbmtopgm,pbmtopi3,pbmtoplot,pbmtoppa,pbmtopsg3,pbmtoptx,pbmtowbmp,pbmtox10bm,pbmtoxbm,pbmtoybm,pbmtozinc,pbmupc,pcimodules,pcretest,pcxtoppm,pdb,pdb2.6,pdb3,pdb3.1,pdf2dsc,pdf2ps,pdfopt,pdfroff,pear,peardev,pecl,peekfd,perl,perl5.10.1,perlbug,perldoc,perlivp,perlthanks,perror,pf2afm,pfbtopfa,pfbtops,pfc,pftp,pg,pgawk,pgmbentley,pgmcrater,pgmedge,pgmenhance,pgmhist,pgmkernel,pgmnoise,pgmnorm,pgmoil,pgmramp,pgmslice,pgmtexture,pgmtofs,pgmtolispm,pgmtopbm,pgmtoppm,pgrep,php,php5,pi1toppm,pi3topbm,pic,pic2graph,pico,piconv,pidstat,pinky,pip,pjtoppm,pkill,pl2pm,plog,pmap,pngtopnm,pnmalias,pnmarith,pnmcat,pnmcolormap,pnmcomp,pnmconvol,pnmcrop,pnmcut,pnmdepth,pnmenlarge,pnmfile,pnmflip,pnmgamma,pnmhisteq,pnmhistmap,pnmindex,pnminterp,pnminterp-gen,pnminvert,pnmmargin,pnmmontage,pnmnlfilt,pnmnoraw,pnmnorm,pnmpad,pnmpaste,pnmpsnr,pnmquant,pnmremap,pnmrotate,pnmscale,pnmscalefixed,pnmshear,pnmsmooth,pnmsplit,pnmtile,pnmtoddif,pnmtofiasco,pnmtofits,pnmtojpeg,pnmtopalm,pnmtoplainpnm,pnmtopng,pnmtops,pnmtorast,pnmtorle,pnmtosgi,pnmtosir,pnmtotiff,pnmtotiffcmyk,pnmtoxwd,pod2html,pod2latex,pod2man,pod2text,pod2usage,podchecker,podselect,poff,pon,POST,post-grohtml,ppm3d,ppmbrighten,ppmchange,ppmcie,ppmcolormask,ppmcolors,ppmdim,ppmdist,ppmdither,ppmfade,ppmflash,ppmforge,ppmhist,ppmlabel,ppmmake,ppmmix,ppmnorm,ppmntsc,ppmpat,ppmquant,ppmquantall,ppmqvga,ppmrainbow,ppmrelief,ppmshadow,ppmshift,ppmspread,ppmtoacad,ppmtobmp,ppmtoeyuv,ppmtogif,ppmtoicr,ppmtoilbm,ppmtojpeg,ppmtoleaf,ppmtolj,ppmtomap,ppmtomitsu,ppmtompeg,ppmtoneo,ppmtopcx,ppmtopgm,ppmtopi1,ppmtopict,ppmtopj,ppmtopuzz,ppmtorgb3,ppmtosixel,ppmtotga,ppmtouil,ppmtowinicon,ppmtoxpm,ppmtoyuv,ppmtoyuvsplit,ppmtv,pr,preconv,pre-grohtml,prename,print,printafm,printenv,printerbanner,printf,prove,prtstat,prune,ps2ascii,ps2epsi,ps2pdf,ps2pdf12,ps2pdf13,ps2pdf14,ps2pdfwr,ps2ps,ps2ps2,ps2txt,psbook,psed,psfaddtable,psfgettable,psfstriptable,psfxtable,psidtopgm,psmerge,psnup,psresize,psselect,pstopnm,pstops,pstree,pstree.x11,pstruct,ptar,ptardiff,ptx,pwdx,py3_compilefiles,pycentral,pyclean,pycompile,py_compilefiles,pydoc,pydoc2.6,pydoc3,pydoc3.1,pygettext,pygettext2.6,pygettext3,pygettext3.1,pyhtmlizer,python,python2,python2.6,python3,python3.1,pyversions,qrttoppm,rasttopnm,rawtopgm,rawtoppm,rcp,red,refer,rename,rename.ul,renice,replace,report-hw,reset,resolveip,resolve_stack_dump,rev,rgb3toppm,rgrep,rletopnm,rlogin,rmcp_ping,roff2dvi,roff2html,roff2pdf,roff2ps,roff2text,roff2x,routef,routel,rpcclient,rpcinfo,rpm,rpm2cpio,rpmbuild,rpmdb,rpmgraph,rpmquery,rpmsign,rpmverify,rrdcgi,rrdtool,rrdupdate,rsh,rsync,rtstat,runcon,run-mailcap,rview,rvim,s2p,sadf,sar,sar.sysstat,savelog,sbigtopgm,sccmap,scp,screen,screendump,screen-launcher,screen-profiles-status,script,scriptreplay,sdiff,search,searchd,see,select-editor,sendsms,sensible-browser,sensible-editor,sensible-pager,sensors,sensors-conf-convert,seq,service,setarch,setkeycodes,setleds,setlogcons,setmetamode,setpci,setsid,setterm,sftp,sg,sgitopnm,sha1sum,sha224sum,sha256sum,sha384sum,sha512sum,shasum,showchar,showconsolefont,showkey,shred,shuf,sirtopnm,skill,slabtop,sldtoppm,slogin,smbcacls,smbclient,smbcquotas,smbget,smbpasswd,smbspool,smbtar,smbtree,smime_keys,snice,snmpbulkget,snmpbulkwalk,snmpconf,snmpdelta,snmpdf,snmpget,snmpgetnext,snmpinform,snmpkey,snmpnetstat,snmpset,snmpstatus,snmptable,snmptest,snmptranslate,snmptrap,snmpusm,snmpvacm,snmpwalk,soelim,solterm,sort,spctoppm,spelldump,splain,split,splitfont,sputoppm,ssh,ssh-add,ssh-agent,ssh-argv0,ssh-copy-id,sshfs,ssh-keygen,ssh-keyscan,ssh-vulnkey,st4topgm,stat,strace,stream,sudo,sudoedit,sum,svn,svnadmin,svnauthz-validate,svndumpfilter,svnlook,svnmucc,svn-populate-node-origins-index,svnserve,svnsync,svnversion,tabs,tac,tail,tap2deb,tap2rpm,tapconvert,tasksel,taskset,tbl,tee,telnet,telnet.netkit,test,testparm,testparm.samba3,tfmtodit,tgatoppm,thinkjettopbm,tic,tifftopnm,time,tload,toe,top,touch,tput,tr,tracepath,tracepath6,traceroute6,traceroute6.iputils,traptoemail,tred,trial,troff,truncate,tset,tsort,tty,twistd,twopi,tzselect,ubuntu-bug,ubuntu-support-status,ucf,ucfq,ucfr,ucs2any,ul,unattended-upgrade,unattended-upgrades,unexpand,unflatten,unicode_stop,uniq,unlink,unlzma,unshare,unzip,unzipsfx,update-alternatives,updatedb,updatedb.mlocate,update-mime-database,update-mime-database.real,update-pciids,update-perl-sax-parsers,uptime,usb-devices,users,uuidgen,vi,view,vim,vim.basic,vimdiff,vim.tiny,vimtutor,vmstat,volname,w,w3m,w3mman,wall,watch,wbmptopbm,wc,webalizer,webazolver,wftopfa,wget,whatis,whereis,which,whiptail,who,whoami,winicontoppm,wpa_passphrase,w.procps,write,www-browser,X11,x86_64,x86_64-linux-gnu-cpp,x86_64-linux-gnu-cpp-4.4,xargs,xauth,xbmtopbm,ximtoppm,xpmtoppm,xsubpp,xtotroff,xvminitoppm,xwdtopnm,xxd,ybmtopbm,yes,yuvsplittoppm,yuvtoppm,zabbix_get,zdump,zeisstopnm,zipgrep,zipinfo,zsoelim,,/usr/sbin/:,a2dismod,a2dissite,a2enmod,a2ensite,aa-audit,aa-autodep,aa-complain,aa-decode,aa-enforce,aa-genprof,aa-logprof,aa-status,aa-unconfined,ab,accessdb,addgroup,add-shell,adduser,apache2,apache2ctl,apparmor_status,arp,arpd,atd,audit,autodep,bacula-console,bacula-fd,bandwidthd,bcrelay,biosdecode,brctl,bsmtp,btraceback,chat,check_forensic,checkgid,chgpasswd,chpasswd,chroot,ck-log-system-restart,ck-log-system-start,ck-log-system-stop,complain,console-kit-daemon,cpgr,cppw,cron,cytune,dbconfig-generate-include,dbconfig-load-include,defoma-reconfigure,delgroup,deluser,dmidecode,dpkg-divert,dpkg-preconfigure,dpkg-reconfigure,dpkg-statoverride,e2freefrag,enforce,ethtool,exicyclog,exigrep,exim,exim4,exim_checkaccess,exim_convert4r4,exim_dbmbuild,exim_dumpdb,exim_fixdb,exim_lock,eximstats,exim_tidydb,exinext,exipick,exiqgrep,exiqsumm,exiwhat,fancontrol,fdformat,filefrag,genprof,gmetad,gmond,gnokiid,groupadd,groupdel,groupmod,grpck,grpconv,grpunconv,grub-install,grub-mkconfig,grub-mkdevicemap,grub-probe,grub-reboot,grub-set-default,grub-setup,gss_clnt_send_err,gss_destroy_creds,htcacheclean,httxt2dbm,iconvconfig,install-info,install-sgmlcatalog,invoke-rc.d,ip6tables-apply,ipmievd,iptables-apply,irqbalance,isadump,isaset,laptop-detect,ldattach,libgraphviz4-config-update,locale-gen,login.radius,logprof,logresolve,logrotate,lsusb,make-ssl-cert,mgnokiidev,mkinitramfs,mkinitramfs-kpkg,mklost+found,munin-node,munin-node-configure,munin-run,mysqld,mysqlmanager,nagios3,nagios3stats,newusers,nfsstat,nologin,ntop,ntpd,ntpdate,ntpdate-debian,openntpd,openvpn,openvpn-vulnkey,ownership,pam-auth-update,pam_getenv,paperconfig,popcon-largest-unused,popularity-contest,pppconfig,pppd,pppdump,pppoeconf,pppoe-discovery,pppstats,pptpctrl,pptpd,pwck,pwconv,pwmconfig,pwunconv,radacct,radexample,radlogin,radstatus,ramsize,rdev,readprofile,remove-shell,rmail,rmt,rmt-dump,rmt-tar,rootflags,rotatelogs,rpcdebug,rpc.gssd,rpc.idmapd,rsmtp,rsyslogd,rtcwake,runq,safe_finger,sendmail,sensors-detect,service,setvesablank,snmpd,snmptrapd,spine,split-logfile,sshd,syslog2eximlog,tcpd,tcpdchk,tcpdmatch,tcpdump,try-from,tunelp,tzconfig,ufw,unconfined,update-alternatives,update-bootsystem-insserv,update-ca-certificates,update-catalog,update-exim4.conf,update-exim4.conf.template,update-exim4defaults,update-fonts-alias,update-fonts-dir,update-fonts-scale,update-gdkpixbuf-loaders,update-grub,update-grub2,update-gtk-immodules,update-icon-caches,update-inetd,update-info-dir,update-initramfs,update-locale,update-mime,update-pangox-aliases,update-passwd,update-python-modules,update-rc.d,update-rc.d-insserv,update-usbids,update-xmlcatalog,upgrade-from-grub-legacy,useradd,userdel,usermod,uuidd,validlocale,vcstime,vidmode,vigr,vipw,visudo,vpddecode,vsftpd,xl2tpd,zabbix_server,zic&#10;&#9;&#9;&#9;, CentOS, Piranha, NFS, &#10;&#9;&#9;&#9;&#9;arch,awk,basename,bash,cat,cgclassify,cgcreate,cgdelete,cgexec,cgget,cgset,chgrp,chmod,chown,cp,cpio,cut,dash,date,dd,df,dmesg,dnsdomainname,domainname,dumpkeys,echo,egrep,env,ex,false,fgrep,find,gawk,grep,gtar,gunzip,gzip,hostname,ipcalc,iptables-xml,kbd_mode,kill,link,ln,loadkeys,login,ls,lscgroup,lssubsys,mkdir,mknod,mktemp,more,mount,mountpoint,mv,mybash,netstat,nice,nisdomainname,ping,ping6,plymouth,ps,pwd,raw,readlink,rm,rmdir,rpm,rvi,rview,sed,setfont,sh,shell.sh,sleep,sort,stty,su,sync,tar,taskset,touch,tracepath,tracepath6,true,umount,uname,unicode_start,unicode_stop,unlink,usleep,vi,view,ypdomainname,zcat,,/sbin/:,addpart,agetty,arp,arping,audispd,auditctl,auditd,aureport,ausearch,autrace,badblocks,blkid,blockdev,cbq,cfdisk,cgclear,cgconfigparser,cgrulesengd,chkconfig,clock,consoletype,crda,ctrlaltdel,debugfs,delpart,depmod,dracut,dumpe2fs,e2fsck,e2image,e2label,e2undo,ether-wake,ethtool,fdisk,findfs,fixfiles,fsck,fsck.cramfs,fsck.ext2,fsck.ext3,fsck.ext4,fsck.ext4dev,fsfreeze,fstab-decode,fuser,genhostid,getkey,grub,grubby,grub-install,grub-md5-crypt,grub-terminfo,halt,hwclock,ifcfg,ifconfig,ifdown,ifenslave,ifrename,ifup,init,initctl,insmod,insmod.static,install-info,installkernel,ip,ip6tables,ip6tables-multi,ip6tables-restore,ip6tables-save,ipmaddr,iptables,iptables-multi,iptables-restore,iptables-save,iptunnel,iw,iwconfig,iwevent,iwgetid,iwlist,iwpriv,iwspy,killall5,ldconfig,load_policy,logsave,losetup,lsinitrd,lsmod,lspci,MAKEDEV,matchpathcon,mii-diag,mii-tool,mingetty,mke2fs,mkfs,mkfs.cramfs,mkfs.ext2,mkfs.ext3,mkfs.ext4,mkfs.ext4dev,mkhomedir_helper,mkinitrd,mkswap,modinfo,modprobe,mount.nfs,mount.nfs4,mount.tmpfs,nameif,netreport,new-kernel-pkg,nologin,pam_console_apply,pam_tally2,pam_timestamp_check,partx,pidof,pivot_root,plipconfig,plymouthd,poweroff,ppp-watch,rdisc,reboot,regdbdump,reload,resize2fs,restart,restorecon,rmmod,route,rpcbind,rpc.statd,rsyslogd,rtmon,runlevel,runuser,scsi_id,securetty,service,setfiles,setpci,setregdomain,setsysfont,sfdisk,shutdown,slattach,sln,start,start_udev,status,stop,sulogin,sushell,swapoff,swapon,switch_root,sysctl,tc,telinit,tune2fs,udevadm,udevd,umount.nfs,umount.nfs4,unix_chkpwd,unix_update,weak-modules,wipefs&#10;&#9;&#9;&#9;, &#10;&#9;&#9;&#9;&#9;a2p,ab,aclocal,aclocal-1.11,addftinfo,addr2line,airdaemon,apropos,ar,as,attr,aulast,aulastlog,ausyscall,autoconf,autoheader,autom4te,automake,automake-1.11,autoreconf,autoscan,autoupdate,awk,base64,bashbug-64,berkeley_db_svc,bunzip2,bzcat,bzcmp,bzdiff,bzgrep,bzip2,bzip2recover,bzless,bzmore,c++,c2ph,c89,c99,cal,captoinfo,catchsegv,cc,c++filt,chacl,chage,chattr,chcon,checkmodule,checkpolicy,chfn,chrt,chsh,chvt,cjpeg,cksum,clear,cloog,cmp,col,colcrt,colrm,column,comm,consolehelper,convertcfg,cpp,crontab,csplit,curl,curl-config,cut,cxpm,db_archive,db_checkpoint,db_codegen,db_deadlock,db_dump,db_dump185,db_hotbackup,db_load,db_printlog,db_recover,db_stat,db_upgrade,dbus-binding-tool,db_verify,ddate,deallocvt,diff,diff3,dir,dircolors,dirname,djpeg,dprofpp,du,env,eqn,eqn2graph,erb,ex,expand,expr,factor,faillog,fallocate,fc-cache,fc-cat,fc-list,fc-match,fc-query,fc-scan,fgconsole,file,filedaemon,find,find2perl,fipscheck,fipshmac,flock,floppy,fmt,fold,free,freetype-config,funzip,g++,gawk,gcc,gcov,gdlib-config,gem,gencat,geqn,getconf,getent,getfacl,getfattr,getkeycodes,getopt,gindxbib,glookbib,gmake,gneqn,gnroff,gpasswd,gpg,gpg2,gpg-agent,gpgconf,gpg-connect-agent,gpg-error,gpgkey2ssh,gpgparsemail,gpgsplit,gpgv,gpgv2,gpg-zip,gpic,gprof,grefer,grn,grodvi,groff,groffer,grog,grolbp,grolj4,grops,grotty,groups,gsoelim,gtbl,gtroff,gunzip,gzexe,gzip,h2ph,halt,head,hexdump,hostid,hpftodit,htdbm,htdigest,htpasswd,i386,iconv,id,idn,ifnames,igawk,indxbib,info,infocmp,infokey,infotocap,install,ionice,ipcmk,ipcrm,ipcs,ipmicmd,ipmilan,ipmish,ipmitool,ipmi_ui,irb,isosize,join,jpegtran,kbdrate,kill,killall,last,lastb,lastlog,lchfn,lchsh,ld,ldd,less,lessecho,lesskey,lesspipe.sh,libpng12-config,libpng-config,linux32,linux64,lkbib,loadunimap,locale,localedef,logger,logname,logresolve,look,lookbib,lsattr,lscpu,lua,luac,lzcat,lzcmp,lzdiff,lzegrep,lzfgrep,lzgrep,lzless,lzma,lzmadec,lzmainfo,lzmore,m4,mailq,mailq.postfix,make,man,man2html,manpath,mapscrn,mbchk,mcookie,md5sum,mesg,mini_epn,mkfifo,nagios,nagiostats,namei,neqn,net-snmp-create-v3-user,newaliases,newaliases.postfix,newgrp,new_mini_epn,nl,nm,nohup,nproc,nroff,ntpstat,objcopy,objdump,od,oldfind,open,openipmicmd,openipmish,openssl,openvt,p1.pl,passwd,paste,pathchk,pcregrep,pcretest,peekfd,perl,perl5.10.1,perlbug,perldoc,perlthanks,pfbtops,pgawk,pgrep,phar,phar.phar,php,php-cgi,pic,pic2graph,piconv,pinentry,pinentry-curses,pinky,pkg-config,pkill,pl2pm,plymouth,pmap,pod2html,pod2latex,pod2man,pod2text,pod2usage,podchecker,podselect,post-grohtml,poweroff,ppl-config,pr,pre-grohtml,printenv,printf,protoize,psed,psfaddtable,psfgettable,psfstriptable,psfxtable,pstree,pstree.x11,pstruct,ptx,pwdx,pydoc,python,python2,python2.6,ranlib,rb,rdjpgcom,rdoc,readelf,readlink,reboot,refer,rename,renice,reset,resizecons,rev,rhgb-client,ri,rmail,rmail.postfix,rmcp_ping,rpcgen,rpm2cpio,rpmdb,rpmquery,rpmsign,rpmverify,rsync,ruby,runcon,run-parts,rvim,rx,rz,s2p,sb,scp,script,scriptreplay,sdiff,secon,sedismod,sedispol,semodule_deps,semodule_expand,semodule_link,semodule_package,seq,sequel,setarch,setfacl,setfattr,setkeycodes,setleds,setmetamode,setsid,setterm,setup-nsssysinit.sh,sftp,sg,sha1sum,sha224sum,sha256sum,sha384sum,sha512sum,showconsolefont,showkey,shred,shuf,size,skill,slabtop,slogin,snice,snmpconf,snmpkey,soelim,solterm,splain,split,sprof,sqlite3,ssh,ssh-add,ssh-agent,ssh-copy-id,ssh-keygen,ssh-keyscan,stat,stdbuf,strings,strip,sudo,sudoedit,sum,sx,sxpm,system-config-network,system-config-network-cmd,sz,tabs,tac,tail,tailf,tbl,tee,telnet,test,testrb,tfmtodit,tic,time,timeout,tload,toe,top,tput,tr,troff,truncate,tset,tsort,tty,tzselect,ul,unexpand,uniq,unlzma,unprotoize,unshare,unxz,unzip,unzipsfx,uptime,urlgrabber,users,utmpdump,uuidgen,vdir,vim,vimdiff,vimtutor,vmstat,w,wall,watch,watchgnupg,wc,wget,whatis,whereis,which,whiptail,who,whoami,write,wrjpgcom,x86_64,x86_64-redhat-linux-c++,x86_64-redhat-linux-g++,x86_64-redhat-linux-gcc,xargs,xml2-config,xmlcatalog,xmllint,xmlwf,xxd,xz,xzcat,xzcmp,xzdec,xzdiff,xzegrep,xzfgrep,xzgrep,xzless,xzmore,yaf,yafcollect,yafscii,yes,yum,zcmp,zdiff,zegrep,zfgrep,zforce,zgrep,zip,zipcloak,zipgrep,zipinfo,zipnote,zipsplit,zless,zmore,znew,zsoelim,,/usr/sbin/:,addgnupghome,adduser,alternatives,anacron,apachectl,applygnupgdefaults,arpd,arping,authconfig,authconfig-tui,avcstat,build-locale-archive,cacertdir_rehash,capsh,chpasswd,chroot,clockdiff,cracklib-check,cracklib-format,cracklib-packer,cracklib-unpacker,create-cracklib-dict,crond,e2freefrag,efibootmgr,ethtool,exportfs,fdformat,filefrag,fping,fping6,genhomedircon,getcap,getenforce,getpcaps,getsebool,glibc_post_upgrade.x86_64,groupadd,groupdel,groupmems,groupmod,grpck,grpconv,grpunconv,gss_clnt_send_err,gss_destroy_creds,htcacheclean,httpd,httpd.event,httpd.worker,httxt2dbm,hwclock,iconvconfig,iconvconfig.x86_64,ipmievd,lchage,ldattach,lgroupadd,lgroupdel,lgroupmod,libgcc_post_upgrade,lid,lnewusers,lnstat,load_policy,logrotate,lokkit,lpasswd,lsof,luseradd,luserdel,lusermod,makewhatis,matchpathcon,mkdict,mklost+found,mksock,mountstats,newusers,nfsiostat,nfsstat,nrpe,nstat,ntpd,ntpdate,ntpdc,ntp-keygen,ntpq,ntptime,open_init_pty,packer,pethtool,pifconfig,ping6,pluginviewer,plymouth-set-default-theme,postalias,postcat,postconf,postdrop,postfix,postkick,postlock,postlog,postmap,postmulti,postqueue,postsuper,pwck,pwconv,pwunconv,readprofile,restorecond,rotatelogs,rpcdebug,rpc.gssd,rpc.idmapd,rpcinfo,rpc.mountd,rpc.nfsd,rpc.svcgssd,rtacct,rtcwake,run_init,saslauthd,sasldblistusers2,saslpasswd2,selinuxconlist,selinuxdefcon,selinuxenabled,semodule,sendmail,sendmail.postfix,sestatus,setcap,setenforce,setsebool,showmount,sm-notify,smtp-sink,smtp-source,snmpd,snmptrapd,ss,sshd,start-statd,suexec,system-config-network,system-config-network-cmd,system-config-network-tui,sys-unconfig,tcpdump,tcpslice,testsaslauthd,tickadj,togglesebool,tracepath,tracepath6,tunelp,tzdata-update,update-alternatives,update-pciids,useradd,userdel,userhelper,usermod,usernetctl,vigr,vipw,visudo,zdump,zic&#10;&#9;&#9;&#9;" /><link rel="home" href="../index.html" title="Netkiller Linux 手札" /><link rel="up" href="../communication.html" title="部分 XVIII. 文字/语音/视频 通信" /><link rel="prev" href="../im/innd/index.html" title="167.4. News Group (innd)" /><link rel="next" href="kamailio.html" title="168.2. Kamailio" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> | <a xmlns="" href="//netkiller.github.io/">简体中文</a> | <a xmlns="" href="http://netkiller.sourceforge.net/">繁体中文</a> | <a xmlns="" href="/journal/index.html">杂文</a>
		| <a xmlns="" href="https://github.com/netkiller">Github</a> | <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> | <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> | <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> | <a xmlns="" href="https://www.youtube.com/user/bg7nyt/videos">Youtube</a> | <a xmlns="" href="//www.netkiller.cn/home/donations.html">打赏(Donations)</a> | <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 168 章 Voice over IP(VoIP)</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../im/innd/index.html">上一页</a> </td><th width="60%" align="center">部分 XVIII. 文字/语音/视频 通信</th><td width="20%" align="right"> <a accesskey="n" href="kamailio.html">下一页</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td><td></td><td><a href="https://zhuanlan.zhihu.com/netkiller"><img src="/images/logo/zhihu-card-default.svg" height="25" /></a></td><td valign="middle"><a href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a></td><td></td><td></td><td></td><td></td></tr></table><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index"></a>第 168 章 Voice over IP(VoIP)</h2></div></div></div><div class="toc"><p><strong>目录</strong></p><dl class="toc"><dt><span class="section"><a href="index.html#freeswitch">168.1. FreeSWITCH</a></span></dt><dd><dl><dt><span class="section"><a href="index.html#freeswitch.signup">168.1.1. 注册用户并创建令牌</a></span></dt><dt><span class="section"><a href="index.html#freeswitch.dnf">168.1.2. Rocky Linux / AlmiLinux 安装</a></span></dt><dt><span class="section"><a href="index.html#freeswitch.firewall">168.1.3. 防火墙端口</a></span></dt><dt><span class="section"><a href="index.html#freeswitch.etc">168.1.4. 配置 freeswitch</a></span></dt><dt><span class="section"><a href="index.html#freeswitch.mysql">168.1.5. MySQL 模块配置</a></span></dt><dt><span class="section"><a href="index.html#freeswitch.number">168.1.6. 测试号码</a></span></dt><dt><span class="section"><a href="index.html#freeswitch.fs_cli">168.1.7. fs_cli</a></span></dt><dt><span class="section"><a href="index.html#freeswitch.lang">168.1.8. 中文语音包</a></span></dt><dt><span class="section"><a href="index.html#fusionPBX">168.1.9. fusionPBX</a></span></dt><dt><span class="section"><a href="index.html#freeswitch.devel">168.1.10. 开发</a></span></dt></dl></dd><dt><span class="section"><a href="kamailio.html">168.2. Kamailio</a></span></dt><dd><dl><dt><span class="section"><a href="kamailio.html#kamailio.docker">168.2.1. Docker 安装 Kamailio</a></span></dt><dt><span class="section"><a href="kamailio.html#kamailio.rpm">168.2.2. RPM 包安装 kamailio</a></span></dt><dt><span class="section"><a href="kamailio.html#kamailio.cfg">168.2.3. 配置 kamailio</a></span></dt><dt><span class="section"><a href="kamailio.html#kamctl">168.2.4. 管理 Kamailio</a></span></dt></dl></dd><dt><span class="section"><a href="yate.html">168.3. Yate - Yet Another Telephony Engine (includes SIP to H.323 translation)</a></span></dt><dd><dl><dt><span class="section"><a href="yate.html#yate.server">168.3.1. Yate Server</a></span></dt><dt><span class="section"><a href="yate.html#yate.conf.sample">168.3.2. 配置文件样本</a></span></dt><dt><span class="section"><a href="yate.html#regfile.conf">168.3.3. 添加用户</a></span></dt><dt><span class="section"><a href="yate.html#regexroute.conf">168.3.4. regexroute.conf</a></span></dt><dt><span class="section"><a href="yate.html#yate.test">168.3.5. 测试</a></span></dt><dt><span class="section"><a href="yate.html#yate.sbc">168.3.6. SBC(SIP Session Border Controller) 会话边界控制器</a></span></dt><dt><span class="section"><a href="yate.html#yate.route">168.3.7. 配置路由</a></span></dt><dt><span class="section"><a href="yate.html#yate.conference">168.3.8. 配置会议室</a></span></dt><dt><span class="section"><a href="yate.html#yate.client">168.3.9. Yate Client</a></span></dt></dl></dd><dt><span class="section"><a href="gatekeeper.html">168.4. Gnu Gatekeeper</a></span></dt><dd><dl><dt><span class="section"><a href="gatekeeper.html#gatekeeper.install">168.4.1. Gnu Gatekeeper Install</a></span></dt><dt><span class="section"><a href="gatekeeper.html#gatekeeper.configure">168.4.2. Gnu Gatekeeper Configure</a></span></dt><dt><span class="section"><a href="gatekeeper.html#gatekeeper.test">168.4.3. Gnu Gatekeeper Test</a></span></dt></dl></dd><dt><span class="section"><a href="opensips.html">168.5. OpenSIPS</a></span></dt><dd><dl><dt><span class="section"><a href="opensips.html#opensips.install">168.5.1. 安装 OpenSIPS</a></span></dt><dt><span class="section"><a href="opensips.html#opensips.database">168.5.2. 数据库部署</a></span></dt><dt><span class="section"><a href="opensips.html#opensips.test">168.5.3. 测试 opensips</a></span></dt></dl></dd><dt><span class="section"><a href="asterisk.html">168.6. Asterisk (OpenSource Linux PBX that supports both SIP and H.323)
	</a></span></dt><dd><dl><dt><span class="section"><a href="asterisk.html#id2973">168.6.1. Redhat/CentOS/RockyLinux/AlmiLinux</a></span></dt><dt><span class="section"><a href="asterisk.html#id2974">168.6.2. 源码安装 asterisk-22</a></span></dt><dt><span class="section"><a href="asterisk.html#id2975">168.6.3. Ubuntu</a></span></dt><dt><span class="section"><a href="asterisk.html#asterisk.raspberry">168.6.4. RasPBX – Asterisk for Raspberry Pi</a></span></dt><dt><span class="section"><a href="asterisk.html#id2976">168.6.5. 配置文件</a></span></dt><dt><span class="section"><a href="asterisk.html#id2977">168.6.6. 拨号规则设置</a></span></dt><dt><span class="section"><a href="asterisk.html#id2978">168.6.7. pjsip</a></span></dt><dt><span class="section"><a href="asterisk.html#id2981">168.6.8. 配置例子</a></span></dt></dl></dd><dt><span class="section"><a href="vocal.html">168.7. VOCAL (includes a SIP to H.323 translator)</a></span></dt><dt><span class="section"><a href="rtp.html">168.8. RTP</a></span></dt><dd><dl><dt><span class="section"><a href="rtp.html#RTPProxy">168.8.1. RTPProxy</a></span></dt><dt><span class="section"><a href="rtp.html#rtpengine">168.8.2. rtpengine</a></span></dt></dl></dd><dt><span class="section"><a href="ch168s09.html">168.9. sngrep - SIP Messages flow viewer</a></span></dt><dd><dl><dt><span class="section"><a href="ch168s09.html#id2982">168.9.1. Rocky Linux 安装 sngrep</a></span></dt><dt><span class="section"><a href="ch168s09.html#id2983">168.9.2. MacOS</a></span></dt><dt><span class="section"><a href="ch168s09.html#id2984">168.9.3. debian 安装sngrep</a></span></dt><dt><span class="section"><a href="ch168s09.html#id2985">168.9.4. 命令行参数</a></span></dt><dt><span class="section"><a href="ch168s09.html#id2986">168.9.5. UI 快捷鍵</a></span></dt></dl></dd><dt><span class="section"><a href="voip.endpoints.html">168.10. 电话</a></span></dt><dd><dl><dt><span class="section"><a href="voip.endpoints.html#Linksys.gateway">168.10.1. Linksys/PAP2T-5.1.6(LS) 登录 freeSWITCH 和 asterisk 失败</a></span></dt><dt><span class="section"><a href="voip.endpoints.html#endpoint.hardphone">168.10.2. Avaya</a></span></dt><dt><span class="section"><a href="voip.endpoints.html#endpoint.yealink">168.10.3. 电脑软件正常登录，手机APP正常登录，Yealink 电话无法登录</a></span></dt><dt><span class="section"><a href="voip.endpoints.html#endpoint.softphone">168.10.4. 软电话</a></span></dt></dl></dd><dt><span class="section"><a href="ch168s11.html">168.11. FAQ</a></span></dt><dd><dl><dt><span class="section"><a href="ch168s11.html#id2990">168.11.1. SIP ALG</a></span></dt></dl></dd></dl></div>
	
	<p>安装环境 ubuntu 13.10</p>
	
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="freeswitch"></a>168.1. FreeSWITCH</h2></div></div></div>
	
	<a class="ulink" href="https://www.freeswitch.org/" target="_top">https://www.freeswitch.org/</a>

	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="freeswitch.signup"></a>168.1.1. 注册用户并创建令牌</h3></div></div></div>
		
		<p>
			前往
			<a class="ulink" href="https://signalwire.com" target="_top">https://signalwire.com</a>
			注册账号
		</p>

		<p>点击自己头像，选择“Personal Access Tokens” 进入个人访问令牌页面，然后点击“+ Add New”
			创建令牌。
		</p>
		<p>Token Name 处输入令牌名称，然后点击 “Generate Token” 生成令牌。</p>
		<p>PERSONAL ACCESS TOKEN 下面一串字符，就是令牌，请复制出来并保存好。</p>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="freeswitch.dnf"></a>168.1.2. Rocky Linux / AlmiLinux 安装</h3></div></div></div>
		
		<pre class="screen">
		
echo "netkiller" &gt; /etc/yum/vars/signalwireusername
echo "pat_hbpgtYbJHMMS5Wcy868dW1o2" &gt; /etc/yum/vars/signalwiretoken
dnf install -y https://$(&lt; /etc/yum/vars/signalwireusername):$(&lt; /etc/yum/vars/signalwiretoken)@freeswitch.signalwire.com/repo/yum/centos-release/freeswitch-release-repo-0-1.noarch.rpm epel-release
		
		</pre>
		<p>查看相关包</p>
		<pre class="screen">
		
[root@netkiller ~]# dnf search freeswitch
FreeSWITCH Packages for Enterprise Linux 9 - x86_64                                                                                                    174 kB/s | 752 kB     00:04    
FreeSWITCH Packages for Enterprise Linux 9 - x86_64 - Debug                                                                                            168 kB/s | 752 kB     00:04    
FreeSWITCH Packages for Enterprise Linux 9 - x86_64 - Source                                                                                           174 kB/s | 752 kB     00:04    
========================================================================= Name &amp; Summary Matched: freeswitch ==========================================================================
freeswitch.src : FreeSWITCH open source telephony platform
freeswitch.x86_64 : FreeSWITCH open source telephony platform
freeswitch-application-abstraction.x86_64 : FreeSWITCH mod_abstraction
freeswitch-application-avmd.x86_64 : FreeSWITCH voicemail detector
freeswitch-application-blacklist.x86_64 : FreeSWITCH blacklist module
freeswitch-application-callcenter.x86_64 : FreeSWITCH mod_callcenter Call Queuing Application
freeswitch-application-cidlookup.x86_64 : FreeSWITCH mod_cidlookup
freeswitch-application-conference.x86_64 : FreeSWITCH mod_conference
freeswitch-application-curl.x86_64 : FreeSWITCH mod_curl
freeswitch-application-db.x86_64 : FreeSWITCH mod_db
freeswitch-application-directory.x86_64 : FreeSWITCH mod_directory
freeswitch-application-distributor.x86_64 : FreeSWITCH mod_distributor
freeswitch-application-easyroute.x86_64 : FreeSWITCH mod_easyroute
freeswitch-application-enum.x86_64 : FreeSWITCH mod_enum
freeswitch-application-esf.x86_64 : FreeSWITCH mod_esf
freeswitch-application-expr.x86_64 : FreeSWITCH mod_expr
freeswitch-application-fifo.x86_64 : FreeSWITCH mod_fifo
freeswitch-application-fsk.x86_64 : FreeSWITCH mod_fsk
freeswitch-application-fsv.x86_64 : FreeSWITCH mod_fsv
freeswitch-application-hash.x86_64 : FreeSWITCH mod_hash
freeswitch-application-httapi.x86_64 : FreeSWITCH mod_httapi
freeswitch-application-http-cache.x86_64 : FreeSWITCH mod_http_cache
freeswitch-application-lcr.x86_64 : FreeSWITCH mod_lcr
freeswitch-application-limit.x86_64 : FreeSWITCH mod_limit
freeswitch-application-memcache.x86_64 : FreeSWITCH mod_memcache
freeswitch-application-mongo.x86_64 : FreeSWITCH mod_mongo
freeswitch-application-nibblebill.x86_64 : FreeSWITCH mod_nibblebill
freeswitch-application-rad_auth.x86_64 : FreeSWITCH mod_rad_auth
freeswitch-application-redis.x86_64 : FreeSWITCH mod_redis
freeswitch-application-rss.x86_64 : FreeSWITCH mod_rss
freeswitch-application-signalwire.x86_64 : FreeSWITCH mod_signalwire
freeswitch-application-sms.x86_64 : FreeSWITCH mod_sms
freeswitch-application-snapshot.x86_64 : FreeSWITCH mod_snapshot
freeswitch-application-snom.x86_64 : FreeSWITCH mod_snom
freeswitch-application-soundtouch.x86_64 : FreeSWITCH mod_soundtouch
freeswitch-application-spy.x86_64 : FreeSWITCH mod_spy
freeswitch-application-stress.x86_64 : FreeSWITCH mod_stress
freeswitch-application-translate.x86_64 : FreeSWITCH mod_translate
freeswitch-application-valet_parking.x86_64 : FreeSWITCH mod_valet_parking
freeswitch-application-video_filter.x86_64 : FreeSWITCH video filter bugs
freeswitch-application-voicemail.x86_64 : FreeSWITCH mod_voicemail
freeswitch-application-voicemail-ivr.x86_64 : FreeSWITCH mod_voicemail_ivr
freeswitch-asrtts-flite.x86_64 : FreeSWITCH mod_flite
freeswitch-asrtts-pocketsphinx.x86_64 : FreeSWITCH mod_pocketsphinx
freeswitch-asrtts-tts-commandline.x86_64 : FreeSWITCH mod_tts_commandline
freeswitch-asrtts-unimrcp.x86_64 : FreeSWITCH mod_unimrcp
freeswitch-codec-bv.x86_64 : BroadVoice16 and BroadVoice32 WideBand Codec support for FreeSWITCH open source telephony platform
freeswitch-codec-codec2.x86_64 : Codec2 Narrow Band Codec support for FreeSWITCH open source telephony platform
freeswitch-codec-h26x.x86_64 : H.263/H.264 Video Codec support for FreeSWITCH open source telephony platform
freeswitch-codec-ilbc.x86_64 : iLCB Codec support for FreeSWITCH open source telephony platform
freeswitch-codec-isac.x86_64 : iSAC Codec support for FreeSWITCH open source telephony platform
freeswitch-codec-mp4v.x86_64 : MP4V Video Codec support for FreeSWITCH open source telephony platform
freeswitch-codec-opus.x86_64 : Opus Codec support for FreeSWITCH open source telephony platform
freeswitch-codec-passthru-amr.x86_64 : Pass-through AMR Codec support for FreeSWITCH open source telephony platform
freeswitch-codec-passthru-amrwb.x86_64 : Pass-through AMR WideBand Codec support for FreeSWITCH open source telephony platform
freeswitch-codec-passthru-g723_1.x86_64 : Pass-through g723.1 Codec support for FreeSWITCH open source telephony platform
freeswitch-codec-passthru-g729.x86_64 : Pass-through g729 Codec support for FreeSWITCH open source telephony platform
freeswitch-codec-silk.x86_64 : Silk Codec support for FreeSWITCH open source telephony platform
freeswitch-codec-siren.x86_64 : Siren Codec support for FreeSWITCH open source telephony platform
freeswitch-codec-theora.x86_64 : Theora Video Codec support for FreeSWITCH open source telephony platform
freeswitch-config-vanilla.x86_64 : Basic vanilla config set for the FreeSWITCH Open Source telephone platform.
freeswitch-database-mariadb.x86_64 : MariaDB native support for FreeSWITCH
freeswitch-database-pgsql.x86_64 : PostgreSQL native support for FreeSWITCH
freeswitch-debuginfo.x86_64 : Debug information for package freeswitch
freeswitch-devel.x86_64 : Development package for FreeSWITCH open source telephony platform
freeswitch-endpoint-dingaling.x86_64 : Generic XMPP support for FreeSWITCH open source telephony platform
freeswitch-endpoint-portaudio.x86_64 : PortAudio endpoint support for FreeSWITCH open source telephony platform
freeswitch-endpoint-rtc.x86_64 : Verto endpoint support for FreeSWITCH open source telephony platform
freeswitch-endpoint-rtmp.x86_64 : RTPM Endpoint support for FreeSWITCH open source telephony platform
freeswitch-endpoint-skinny.x86_64 : Skinny/SCCP endpoint support for FreeSWITCH open source telephony platform
freeswitch-endpoint-verto.x86_64 : Verto endpoint support for FreeSWITCH open source telephony platform
freeswitch-event-cdr-mongodb.x86_64 : MongoDB CDR Logger for the FreeSWITCH open source telephony platform
freeswitch-event-cdr-pg-csv.x86_64 : PostgreSQL CDR Logger for the FreeSWITCH open source telephony platform
freeswitch-event-cdr-sqlite.x86_64 : SQLite CDR Logger for the FreeSWITCH open source telephony platform
freeswitch-event-erlang-event.x86_64 : Erlang Event Module for the FreeSWITCH open source telephony platform
freeswitch-event-format-cdr.x86_64 : JSON and XML Logger for the FreeSWITCH open source telephony platform
freeswitch-event-json-cdr.x86_64 : JSON CDR Logger for the FreeSWITCH open source telephony platform
freeswitch-event-multicast.x86_64 : Multicast Event System for the FreeSWITCH open source telephony platform
freeswitch-event-radius-cdr.x86_64 : RADIUS Logger for the FreeSWITCH open source telephony platform
freeswitch-event-rayo.x86_64 : Rayo (XMPP 3PCC) server for the FreeSWITCH open source telephony platform
freeswitch-event-snmp.x86_64 : SNMP stats reporter for the FreeSWITCH open source telephony platform
freeswitch-format-local-stream.x86_64 : Local File Streamer for the FreeSWITCH open source telephony platform
freeswitch-format-mod-shout.x86_64 : Implements Media Steaming from arbitrary shell commands for the FreeSWITCH open source telephony platform
freeswitch-format-native-file.x86_64 : Native Media File support for the FreeSWITCH open source telephony platform
freeswitch-format-portaudio-stream.x86_64 : PortAudio Media Steam support for the FreeSWITCH open source telephony platform
freeswitch-format-shell-stream.x86_64 : Implements Media Steaming from arbitrary shell commands for the FreeSWITCH open source telephony platform
freeswitch-format-ssml.x86_64 : Adds Speech Synthesis Markup Language (SSML) parser format for the FreeSWITCH open source telephony platform
freeswitch-format-tone-stream.x86_64 : Implements TGML Tone Generation for the FreeSWITCH open source telephony platform
freeswitch-freetdm.x86_64 : Provides a unified interface to hardware TDM cards and ss7 stacks for FreeSWITCH
freeswitch-kazoo.x86_64 : Kazoo Module for the FreeSWITCH open source telephony platform
freeswitch-lang-de.x86_64 : Provides german language dependend modules and speech config for the FreeSWITCH Open Source telephone platform.
freeswitch-lang-en.x86_64 : Provides english language dependent modules and speech config for the FreeSWITCH Open Source telephone platform.
freeswitch-lang-es.x86_64 : Provides Spanish language dependend modules and speech config for the FreeSWITCH Open Source telephone platform.
freeswitch-lang-fr.x86_64 : Provides french language dependend modules and speech config for the FreeSWITCH Open Source telephone platform.
freeswitch-lang-he.x86_64 : Provides hebrew language dependend modules and speech config for the FreeSWITCH Open Source telephone platform.
freeswitch-lang-pt.x86_64 : Provides Portuguese language dependend modules and speech config for the FreeSWITCH Open Source telephone platform.
freeswitch-lang-ru.x86_64 : Provides russian language dependent modules and speech config for the FreeSWITCH Open Source telephone platform.
freeswitch-lang-sv.x86_64 : Provides Swedish language dependend modules and speech config for the FreeSWITCH Open Source telephone platform.
freeswitch-lua.x86_64 : Lua support for the FreeSWITCH open source telephony platform
freeswitch-perl.x86_64 : Perl support for the FreeSWITCH open source telephony platform
freeswitch-python.x86_64 : Python support for the FreeSWITCH open source telephony platform
freeswitch-release-repo.noarch : FreeSWITCH Packages for Enterprise Linux repository configuration
freeswitch-sounds-en-ca-june.noarch : FreeSWITCH fr-CA June prompts
freeswitch-sounds-en-ca-june-16000.noarch : FreeSWITCH 16kHz fr CA June prompts
freeswitch-sounds-en-ca-june-32000.noarch : FreeSWITCH 32kHz fr CA June prompts
freeswitch-sounds-en-ca-june-48000.noarch : FreeSWITCH 48kHz fr CA June prompts
freeswitch-sounds-en-ca-june-8000.noarch : FreeSWITCH 8kHz fr CA June prompts
freeswitch-sounds-en-ca-june-all.noarch : FreeSWITCH fr CA June prompts
freeswitch-sounds-en-us-allison.noarch : FreeSWITCH en-us Allison prompts
freeswitch-sounds-en-us-allison-16000.noarch : FreeSWITCH 16kHz en-us Allison prompts
freeswitch-sounds-en-us-allison-32000.noarch : FreeSWITCH 32kHz en-us Allison prompts
freeswitch-sounds-en-us-allison-48000.noarch : FreeSWITCH 48kHz en-us Allison prompts
freeswitch-sounds-en-us-allison-8000.noarch : FreeSWITCH 8kHz en-us Allison prompts
freeswitch-sounds-en-us-allison-all.noarch : FreeSWITCH en-us Allison prompts
freeswitch-sounds-en-us-callie.noarch : FreeSWITCH en-us Callie prompts
freeswitch-sounds-en-us-callie-16000.noarch : FreeSWITCH 16kHz en-us Callie prompts
freeswitch-sounds-en-us-callie-32000.noarch : FreeSWITCH 32kHz en-us Callie prompts
freeswitch-sounds-en-us-callie-48000.noarch : FreeSWITCH 48kHz en-us Callie prompts
freeswitch-sounds-en-us-callie-8000.noarch : FreeSWITCH 8kHz en-us Callie prompts
freeswitch-sounds-en-us-callie-all.noarch : FreeSWITCH en-us Callie prompts
freeswitch-sounds-fr-ca-june.noarch : FreeSWITCH fr-CA June prompts
freeswitch-sounds-fr-ca-june-16000.noarch : FreeSWITCH 16kHz fr CA June prompts
freeswitch-sounds-fr-ca-june-32000.noarch : FreeSWITCH 32kHz fr CA June prompts
freeswitch-sounds-fr-ca-june-48000.noarch : FreeSWITCH 48kHz fr CA June prompts
freeswitch-sounds-fr-ca-june-8000.noarch : FreeSWITCH 8kHz fr CA June prompts
freeswitch-sounds-fr-ca-june-all.noarch : FreeSWITCH fr CA June prompts
freeswitch-sounds-music.noarch : FreeSWITCH Music on Hold soundfiles
freeswitch-sounds-music-16000.noarch : FreeSWITCH 16kHz Music On Hold soundfiles
freeswitch-sounds-music-32000.noarch : FreeSWITCH 32kHz Music On Hold soundfiles
freeswitch-sounds-music-48000.noarch : FreeSWITCH 48kHz Music On Hold soundfiles
freeswitch-sounds-music-8000.noarch : FreeSWITCH 8kHz Music On Hold soundfiles
freeswitch-sounds-pt-BR-karina.noarch : FreeSWITCH pt-BR Karina prompts
freeswitch-sounds-pt-BR-karina-16000.noarch : FreeSWITCH 16kHz fr BR Karina prompts
freeswitch-sounds-pt-BR-karina-32000.noarch : FreeSWITCH 32kHz fr BR Karina prompts
freeswitch-sounds-pt-BR-karina-48000.noarch : FreeSWITCH 48kHz fr BR Karina prompts
freeswitch-sounds-pt-BR-karina-8000.noarch : FreeSWITCH 8kHz fr BR Karina prompts
freeswitch-sounds-pt-BR-karina-all.noarch : FreeSWITCH fr BR Karina prompts
freeswitch-sounds-ru-RU-elena.noarch : FreeSWITCH ru-RU Elena prompts
freeswitch-sounds-ru-RU-elena-16000.noarch : FreeSWITCH 16kHz ru-RU Elena prompts
freeswitch-sounds-ru-RU-elena-32000.noarch : FreeSWITCH 32kHz ru-RU Elena prompts
freeswitch-sounds-ru-RU-elena-48000.noarch : FreeSWITCH 48kHz ru-RU Elena prompts
freeswitch-sounds-ru-RU-elena-8000.noarch : FreeSWITCH 8kHz ru-RU Elena prompts
freeswitch-sounds-ru-RU-elena-all.noarch : FreeSWITCH ru-RU Elena prompts
freeswitch-sounds-sv-se-jakob.noarch : FreeSWITCH sv-se Jakob prompts
freeswitch-sounds-sv-se-jakob-16000.noarch : FreeSWITCH 16kHz sv-se jakob prompts
freeswitch-sounds-sv-se-jakob-32000.noarch : FreeSWITCH 32kHz sv-se jakob prompts
freeswitch-sounds-sv-se-jakob-48000.noarch : FreeSWITCH 48kHz sv-se jakob prompts
freeswitch-sounds-sv-se-jakob-8000.noarch : FreeSWITCH 8kHz sv-se jakob prompts
freeswitch-sounds-sv-se-jakob-all.noarch : FreeSWITCH sv-se jakob prompts
freeswitch-timer-posix.x86_64 : Provides posix timer for the FreeSWITCH Open Source telephone platform.
freeswitch-xml-cdr.x86_64 : Provides XML CDR interface for the FreeSWITCH Open Source telephone platform.
freeswitch-xml-curl.x86_64 : Provides XML Curl interface for the FreeSWITCH Open Source telephone platform.
============================================================================== Name Matched: freeswitch ===============================================================================
freeswitch-format-opusfile.x86_64 : Plays Opus encoded files
freeswitch-logger-graylog2.x86_64 : GELF logger for Graylog2 and Logstash
============================================================================= Summary Matched: freeswitch =============================================================================
perl-ESL.x86_64 : The Perl ESL module allows for native interaction with FreeSWITCH over the event socket interface.
python-ESL.x86_64 : The Python ESL module allows for native interaction with FreeSWITCH over the event socket interface.		
		
		</pre>
		<p>查看版本信息</p>
		<pre class="screen">
		
[root@netkiller ~]# dnf info freeswitch
Last metadata expiration check: 0:03:19 ago on Sat 05 Apr 2025 07:50:56 AM CST.
Available Packages
Name         : freeswitch
Version      : 1.10.11.release.18
Release      : 1.el7
Architecture : src
Size         : 59 M
Source       : None
Repository   : freeswitch
Summary      : FreeSWITCH open source telephony platform
URL          : http://www.freeswitch.org/
License      : MPL1.1
Description  : FreeSWITCH is an open source telephony platform designed to facilitate the creation of voice
             : and chat driven products scaling from a soft-phone up to a soft-switch.  It can be used as a
             : simple switching engine, a media gateway or a media server to host IVR applications using
             : simple scripts or XML to control the callflow.
             : 
             : We support various communication technologies such as SIP, H.323 and GoogleTalk making
             : it easy to interface with other open source PBX systems such as sipX, OpenPBX, Bayonne, YATE or Asterisk.
             : 
             : We also support both wide and narrow band codecs making it an ideal solution to bridge legacy
             : devices to the future. The voice channels and the conference bridge module all can operate
             : at 8, 16 or 32 kilohertz and can bridge channels of different rates.
             : 
             : FreeSWITCH runs on several operating systems including Windows, Max OS X, Linux, BSD and Solaris
             : on both 32 and 64 bit platforms.
             : 
             : Our developers are heavily involved in open source and have donated code and other resources to
             : other telephony projects including sipXecs, OpenSER, Asterisk, CodeWeaver and OpenPBX.

Name         : freeswitch
Version      : 1.10.11.release.18
Release      : 1.el7
Architecture : src
Size         : 59 M
Source       : None
Repository   : freeswitch-debuginfo
Summary      : FreeSWITCH open source telephony platform
URL          : http://www.freeswitch.org/
License      : MPL1.1
Description  : FreeSWITCH is an open source telephony platform designed to facilitate the creation of voice
             : and chat driven products scaling from a soft-phone up to a soft-switch.  It can be used as a
             : simple switching engine, a media gateway or a media server to host IVR applications using
             : simple scripts or XML to control the callflow.
             : 
             : We support various communication technologies such as SIP, H.323 and GoogleTalk making
             : it easy to interface with other open source PBX systems such as sipX, OpenPBX, Bayonne, YATE or Asterisk.
             : 
             : We also support both wide and narrow band codecs making it an ideal solution to bridge legacy
             : devices to the future. The voice channels and the conference bridge module all can operate
             : at 8, 16 or 32 kilohertz and can bridge channels of different rates.
             : 
             : FreeSWITCH runs on several operating systems including Windows, Max OS X, Linux, BSD and Solaris
             : on both 32 and 64 bit platforms.
             : 
             : Our developers are heavily involved in open source and have donated code and other resources to
             : other telephony projects including sipXecs, OpenSER, Asterisk, CodeWeaver and OpenPBX.

Name         : freeswitch
Version      : 1.10.11.release.18
Release      : 1.el7
Architecture : src
Size         : 59 M
Source       : None
Repository   : freeswitch-source
Summary      : FreeSWITCH open source telephony platform
URL          : http://www.freeswitch.org/
License      : MPL1.1
Description  : FreeSWITCH is an open source telephony platform designed to facilitate the creation of voice
             : and chat driven products scaling from a soft-phone up to a soft-switch.  It can be used as a
             : simple switching engine, a media gateway or a media server to host IVR applications using
             : simple scripts or XML to control the callflow.
             : 
             : We support various communication technologies such as SIP, H.323 and GoogleTalk making
             : it easy to interface with other open source PBX systems such as sipX, OpenPBX, Bayonne, YATE or Asterisk.
             : 
             : We also support both wide and narrow band codecs making it an ideal solution to bridge legacy
             : devices to the future. The voice channels and the conference bridge module all can operate
             : at 8, 16 or 32 kilohertz and can bridge channels of different rates.
             : 
             : FreeSWITCH runs on several operating systems including Windows, Max OS X, Linux, BSD and Solaris
             : on both 32 and 64 bit platforms.
             : 
             : Our developers are heavily involved in open source and have donated code and other resources to
             : other telephony projects including sipXecs, OpenSER, Asterisk, CodeWeaver and OpenPBX.

Name         : freeswitch
Version      : 1.10.11.release.18
Release      : 1.el7
Architecture : x86_64
Size         : 3.2 M
Source       : freeswitch-1.10.11.release.18-1.el7.src.rpm
Repository   : freeswitch
Summary      : FreeSWITCH open source telephony platform
URL          : http://www.freeswitch.org/
License      : MPL1.1
Description  : FreeSWITCH is an open source telephony platform designed to facilitate the creation of voice
             : and chat driven products scaling from a soft-phone up to a soft-switch.  It can be used as a
             : simple switching engine, a media gateway or a media server to host IVR applications using
             : simple scripts or XML to control the callflow.
             : 
             : We support various communication technologies such as SIP, H.323 and GoogleTalk making
             : it easy to interface with other open source PBX systems such as sipX, OpenPBX, Bayonne, YATE or Asterisk.
             : 
             : We also support both wide and narrow band codecs making it an ideal solution to bridge legacy
             : devices to the future. The voice channels and the conference bridge module all can operate
             : at 8, 16 or 32 kilohertz and can bridge channels of different rates.
             : 
             : FreeSWITCH runs on several operating systems including Windows, Max OS X, Linux, BSD and Solaris
             : on both 32 and 64 bit platforms.
             : 
             : Our developers are heavily involved in open source and have donated code and other resources to
             : other telephony projects including sipXecs, OpenSER, Asterisk, CodeWeaver and OpenPBX.

Name         : freeswitch
Version      : 1.10.11.release.18
Release      : 1.el7
Architecture : x86_64
Size         : 3.2 M
Source       : freeswitch-1.10.11.release.18-1.el7.src.rpm
Repository   : freeswitch-debuginfo
Summary      : FreeSWITCH open source telephony platform
URL          : http://www.freeswitch.org/
License      : MPL1.1
Description  : FreeSWITCH is an open source telephony platform designed to facilitate the creation of voice
             : and chat driven products scaling from a soft-phone up to a soft-switch.  It can be used as a
             : simple switching engine, a media gateway or a media server to host IVR applications using
             : simple scripts or XML to control the callflow.
             : 
             : We support various communication technologies such as SIP, H.323 and GoogleTalk making
             : it easy to interface with other open source PBX systems such as sipX, OpenPBX, Bayonne, YATE or Asterisk.
             : 
             : We also support both wide and narrow band codecs making it an ideal solution to bridge legacy
             : devices to the future. The voice channels and the conference bridge module all can operate
             : at 8, 16 or 32 kilohertz and can bridge channels of different rates.
             : 
             : FreeSWITCH runs on several operating systems including Windows, Max OS X, Linux, BSD and Solaris
             : on both 32 and 64 bit platforms.
             : 
             : Our developers are heavily involved in open source and have donated code and other resources to
             : other telephony projects including sipXecs, OpenSER, Asterisk, CodeWeaver and OpenPBX.

Name         : freeswitch
Version      : 1.10.11.release.18
Release      : 1.el7
Architecture : x86_64
Size         : 3.2 M
Source       : freeswitch-1.10.11.release.18-1.el7.src.rpm
Repository   : freeswitch-source
Summary      : FreeSWITCH open source telephony platform
URL          : http://www.freeswitch.org/
License      : MPL1.1
Description  : FreeSWITCH is an open source telephony platform designed to facilitate the creation of voice
             : and chat driven products scaling from a soft-phone up to a soft-switch.  It can be used as a
             : simple switching engine, a media gateway or a media server to host IVR applications using
             : simple scripts or XML to control the callflow.
             : 
             : We support various communication technologies such as SIP, H.323 and GoogleTalk making
             : it easy to interface with other open source PBX systems such as sipX, OpenPBX, Bayonne, YATE or Asterisk.
             : 
             : We also support both wide and narrow band codecs making it an ideal solution to bridge legacy
             : devices to the future. The voice channels and the conference bridge module all can operate
             : at 8, 16 or 32 kilohertz and can bridge channels of different rates.
             : 
             : FreeSWITCH runs on several operating systems including Windows, Max OS X, Linux, BSD and Solaris
             : on both 32 and 64 bit platforms.
             : 
             : Our developers are heavily involved in open source and have donated code and other resources to
             : other telephony projects including sipXecs, OpenSER, Asterisk, CodeWeaver and OpenPBX.		
		
		</pre>
		<p>安装 freeswitch</p>
		<p>
			安装 compat-openssl10
			<a class="ulink" href="https://pkgs.org/download/compat-openssl10" target="_top">https://pkgs.org/download/compat-openssl10</a>
		</p>
		<pre class="screen">
		
[root@netkiller ~]# dnf install -y https://pkgs.sysadmins.ws/el8/extras/x86_64/compat-openssl10-1.0.2o-3.el8.x86_64.rpm
[root@netkiller ~]# dnf install -y https://repo.almalinux.org/almalinux/9/CRB/x86_64/os/Packages/libmemcached-awesome-1.1.0-12.el9.x86_64.rpm
[root@netkiller ~]# dnf install -y https://cdn.amazonlinux.com/2/core/2.0/x86_64/6b0225ccc542f3834c95733dcf321ab9f1e77e6ca6817469771a8af7c49efe6c/../../../../../blobstore/9696af59b58e65548eb6c3256ef10b139190dee9c3efd8a28602db3497a80441/ldns-1.6.16-10.amzn2.x86_64.rpm
[root@netkiller ~]# dnf install -y freeswitch-config-vanilla freeswitch-lang-en freeswitch-sounds-en-us-* freeswitch-sounds-music-* freeswitch-codec-opus freeswitch-lua
		
		</pre>
		<p>启动 freeswitch</p>
		<pre class="screen">
		
[root@netkiller ~]# systemctl enable freeswitch
[root@netkiller ~]# systemctl start freeswitch
[root@netkiller ~]# systemctl status freeswitch
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="freeswitch.firewall"></a>168.1.3. 防火墙端口</h3></div></div></div>
		
		<pre class="screen">
		
FireWall Ports  Network Protocol    Application Protocol    Description

1719    UDP H.323 Gatekeeper RAS port
1720    TCP H.323 Call Signaling

3478    UDP STUN service    Used for NAT traversal
3479    UDP STUN service    Used for NAT traversal

5002    TCP MLP protocol server
5003    UDP Neighborhood service

5060    UDP &amp; TCP   SIP UAS Used for SIP signaling (Standard SIP Port, for default Internal Profile)
5070    UDP &amp; TCP   SIP UAS Used for SIP signaling (For default "NAT" Profile)
5080    UDP &amp; TCP   SIP UAS Used for SIP signaling (For default "External" Profile)

8021    TCP ESL Used for mod_event_socket *

16384-32768 UDP RTP/ RTCP multimedia streaming  Used for audio/video data in SIP and other protocols

5066    TCP Websocket   Used for WebRTC
7443    TCP Websocket   Used for WebRTC		
		
		</pre>
		<p>fail2ban 自动拦截恶意注册</p>
		<pre class="screen">
		
firewall-cmd --zone=public --add-port=1719/udp  --permanent
firewall-cmd --zone=public --add-port=1720/tcp  --permanent
firewall-cmd --zone=public --add-port=3478-3479/udp  --permanent
firewall-cmd --zone=public --add-port=5002/tcp  --permanent
firewall-cmd --zone=public --add-port=5003/udp  --permanent
firewall-cmd --zone=public --add-port=5060/udp  --permanent
firewall-cmd --zone=public --add-port=5060/tcp  --permanent
firewall-cmd --zone=public --add-port=5070/udp  --permanent
firewall-cmd --zone=public --add-port=5080/udp  --permanent
firewall-cmd --zone=public --add-port=5006/tcp  --permanent
firewall-cmd --zone=public --add-port=5007/tcp  --permanent
firewall-cmd --zone=public --add-port=5008/tcp  --permanent
firewall-cmd --zone=public --add-port=8021/tcp  --permanent
firewall-cmd --zone=public --add-port=16384-32768/udp  --permanent
firewall-cmd --zone=public --add-port=5066/tcp  --permanent
firewall-cmd --zone=public --add-port=7443/tcp  --permanent
		
		
		</pre>
		<p>重启防火墙</p>
		<pre class="screen">
		
firewall-cmd --reload		
		
		</pre>
		<p>查看已开放的端口</p>
		<pre class="screen">
		
firewall-cmd --list-ports
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="freeswitch.etc"></a>168.1.4. 配置 freeswitch</h3></div></div></div>
		
		<pre class="screen">
		
cp /etc/freeswitch/vars.xml{,.backup}
cp /etc/freeswitch/sip_profiles/internal.xml{,.backup}
cp /etc/freeswitch/sip_profiles/external.xml{,.backup}
cp /etc/freeswitch/dialplan/default.xml{,.backup}
cp /etc/freeswitch/dialplan/public.xml{,.backup}
		
		</pre>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="vars.xml"></a>168.1.4.1. 基本配置 /etc/freeswitch/vars.xml </h4></div></div></div>
			
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="id2926"></a>默认密码</h5></div></div></div>
				

				<pre class="screen">
			
[root@netkiller ~]# cp /etc/freeswitch/vars.xml{,.backup}
			
				</pre>
				<p>随机产生密码</p>
				<pre class="screen">
			
[root@netkiller ~]# randpasswd | cut -c -10
NLYPx9JjSx			
			
				</pre>
				<p>修改默认密码，将 1234 改为</p>
				<pre class="screen">
			
  &lt;X-PRE-PROCESS cmd="set" data="default_password=1234"/&gt;
改为   
  &lt;X-PRE-PROCESS cmd="set" data="default_password=NLYPx9JjSx"/&gt;
			
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="id2927"></a>领域</h5></div></div></div>
				
				<p>配置领域</p>
				<pre class="screen">
			
&lt;X-PRE-PROCESS cmd="set" data="domain=sip.netkiller.cn"/&gt;			
			
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="id2928"></a>公网IP地址</h5></div></div></div>
				
				<p>配置公网IP地址</p>
				<p>适用场景，公网IP直接在Linux eth0 网卡上配置。</p>
				<pre class="screen">
			
&lt;X-PRE-PROCESS cmd="stun-set" data="external_rtp_ip=stun:stun.freeswitch.org"/&gt;
改为
&lt;X-PRE-PROCESS cmd="stun-set" data="external_rtp_ip=host:sip.netkiller.cn"/&gt;
或
&lt;X-PRE-PROCESS cmd="stun-set" data="external_rtp_ip=IP地址"/&gt;
			
				</pre>
			</div>

			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="id2932"></a>NAT 配置</h5></div></div></div>
				
				<p>前面的基本配置，是物理服务器网卡直接配置公网IP地址，很多云主机采用弹性IP机制，将公网IP映射到云主机上。这种模式就需要用到
					NAT
				</p>
				<p>配置方法还是修改 /etc/freeswitch/vars.xml 文件</p>
				<div class="section"><div class="titlepage"><div><div><h6 class="title"><a id="id2929"></a>方案一</h6></div></div></div>
					
					<pre class="screen">
					
&lt;X-PRE-PROCESS cmd="stun-set" data="external_rtp_ip=autonat:你的公网IP地址"/&gt;
					
					</pre>
					<p></p>
					<pre class="screen">
					
  &lt;X-PRE-PROCESS cmd="stun-set" data="external_rtp_ip=autonat:121.37.25.251"/&gt;
  &lt;X-PRE-PROCESS cmd="stun-set" data="external_sip_ip=autonat:121.37.25.251"/&gt;	
					
					</pre>
				</div>
				<div class="section"><div class="titlepage"><div><div><h6 class="title"><a id="id2930"></a>方案二</h6></div></div></div>
					
					<pre class="screen">
					
&lt;X-PRE-PROCESS cmd="stun-set" data="external_rtp_ip=host:你的域名"/&gt;
					
					</pre>
					<p></p>
					<pre class="screen">
					
  &lt;X-PRE-PROCESS cmd="stun-set" data="external_rtp_ip=host:sip.netkiller.cn"/&gt;
  &lt;X-PRE-PROCESS cmd="stun-set" data="external_sip_ip=host:sip.netkiller.cn"/&gt;
					
					</pre>
				</div>
				<div class="section"><div class="titlepage"><div><div><h6 class="title"><a id="id2931"></a>方案二</h6></div></div></div>
					
					<pre class="screen">
					
&lt;X-PRE-PROCESS cmd="stun-set" data="external_rtp_ip=host:$${domain}"/&gt;
					
					</pre>
					<p></p>
					<pre class="screen">
					
  &lt;X-PRE-PROCESS cmd="stun-set" data="external_rtp_ip=host:$${domain}"/&gt;
  &lt;X-PRE-PROCESS cmd="stun-set" data="external_sip_ip=host:$${domain}"/&gt;
					
					</pre>
				</div>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="id2933"></a>编码</h5></div></div></div>
				
				<pre class="screen">
			
  &lt;X-PRE-PROCESS cmd="set" data="global_codec_prefs=OPUS,G722,PCMU,PCMA,H264,VP8"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="outbound_codec_prefs=OPUS,G722,PCMU,PCMA,H264,VP8"/&gt;
			
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="id2934"></a>控制台日志级别</h5></div></div></div>
				
				<pre class="screen">
			
&lt;X-PRE-PROCESS cmd="set" data="console_loglevel=4"/&gt;
或
&lt;X-PRE-PROCESS cmd="set" data="console_loglevel=info"/&gt;
			
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="id2935"></a>TLS</h5></div></div></div>
				
				<pre class="screen">
				
[root@netkiller freeswitch]# gentls_cert -h
/usr/bin/gentls_cert &lt;setup|create_server|create_client|clean&gt; [options]

  * commands:

    setup  - Setup new CA
    remove - Remove CA

    create_server - Create new certificate (overwriting existing!)
    create_client - Create a new client certificate (overwrites existing!)

  * options:

   -cn       Set common name
   -alt      Set alternative name (use prefix 'DNS:' or 'URI:')
   -org      Set organization name
   -out      Filename for new certificate (create only)
   -days     Certificate expires in X days (default: 365)				
				
				</pre>
				<p>用法举例</p>
				<pre class="screen">
				
[root@netkiller freeswitch]# gentls_cert setup -cn pbx.freeswitch.org -alt DNS:pbx.freeswitch.org -org freeswitch.org
Creating new CA...
..+.....+......+++++++++++++++++++++++++++++++++++++++*....+...+...+..........+.....+......+...+.+.........+..+......+...+..........+.....+.+++++++++++++++++++++++++++++++++++++++*.+..+.......+.....+......+.......+........+.........+............+....+...............+....................+.+...+.....+......+.++++++
...+...+.+......+..+.+......+........+...+..........+........+.+......+...+.....+++++++++++++++++++++++++++++++++++++++*..+.......+...+...+..............+.+...+..+++++++++++++++++++++++++++++++++++++++*.......+..+.+..+..................+.+...++++++
-----
DONE			
				
				</pre>
				<p>下面是我的证书</p>
				<pre class="screen">
				
[root@netkiller freeswitch]# gentls_cert setup -cn sip.netkiller.cn -alt DNS:sip.netkiller.cn -org netkiller.cn
Creating new CA...
..........+............+++++++++++++++++++++++++++++++++++++++*....+.........+.......+.....+.+.........+.....+.+...+++++++++++++++++++++++++++++++++++++++*....+.....+............+...+.+...+......+.....+..........+......+........+...+..........+............+...+.....+.......+......+............+..+......+.+.....+.+..+......+.+.........+..+...+.+...........+.........+.+.....+.........+...+..........+.....+.+.....+....+........+.............+......+........+.+......+.....+......+........................+..........+...+.....+......+.......+...+.........+...+...+.....+......+.+.....+...+....+..+.+..+.......+...........+.............+.........+......+..+....+...+......+.....+.......+........+......+...+...+.......+...+..+...+.......+......+.........+..+..........+.....+...+..........+...........+.+......+..+.+.....................+......+........+....+........+.........+.+...+.........+...........+..........+.....+.........+.+....................+.+...+..+.+..............+.........+.........+.+..............+.+..+....+........+......+.+...+.....+.+......+.........+..+.......+...+..++++++
.+.......+.....+.......+..+.............+..+.+.........+...+..+++++++++++++++++++++++++++++++++++++++*......+......+..+...+.........+++++++++++++++++++++++++++++++++++++++*...+.......+........+....+.....+...+...+.+.....+......+..........+...+..+.......+.....+...+...+....+............+.....+...+......+.+.....+....+..+....+..........................+.......+...+..+.+......+...+..+.............+...............+..+....+.....+.+.........+..+...+....+........+...+....+...+..............+...+.+........................+............+........+......+.+......+.....+....+.....+..........+....................+...+.+..+.........+......+...+.+...+........+.......+......+.....++++++
-----
DONE
[root@netkiller freeswitch]# find /etc/freeswitch/tls/CA
/etc/freeswitch/tls/CA
/etc/freeswitch/tls/CA/config.tpl
/etc/freeswitch/tls/CA/cacert.pem
/etc/freeswitch/tls/CA/cakey.pem	

[root@netkiller freeswitch]#  openssl x509 -noout -inform pem -text -in /etc/freeswitch/tls/CA/cacert.pem
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            4b:5a:19:ce:0c:2f:65:ea:13:3b:4b:41:0f:23:62:dc:b1:1c:b2:21
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: CN=sip.netkiller.cn, O=netkiller.cn
        Validity
            Not Before: Apr 24 03:00:09 2025 GMT
            Not After : Apr 23 03:00:09 2031 GMT
        Subject: CN=sip.netkiller.cn, O=netkiller.cn
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                Public-Key: (2048 bit)
                Modulus:
                    00:b7:98:fc:18:95:98:86:25:80:be:b9:e4:34:52:
                    09:b5:17:ce:73:60:5a:0b:87:91:6c:6b:44:97:4c:
                    2c:7b:15:de:80:5a:0f:a2:b7:67:ab:8e:57:4f:3b:
                    b5:e8:8a:d9:da:02:dc:d5:f0:28:9f:bc:0a:a6:c2:
                    c9:64:a8:aa:a9:f1:ae:38:b1:8e:83:2b:50:80:c3:
                    5c:7f:8b:17:8c:fa:ee:b8:ac:33:dd:4f:f6:43:7f:
                    1f:5d:ed:0f:45:cb:e8:3d:b7:36:18:77:49:59:10:
                    6b:8c:d1:c3:bf:34:68:55:45:5f:24:ac:12:18:c9:
                    bf:52:6b:f6:37:5b:b8:d2:05:7a:db:b2:1b:e3:a3:
                    8d:92:9e:b7:f3:01:27:a2:1a:a7:07:21:4c:0e:d5:
                    2a:cb:0e:ff:ea:56:06:e4:29:be:26:97:60:bb:6c:
                    ac:ac:8c:8f:d2:52:38:94:d2:5c:0e:8c:cc:d2:c4:
                    eb:26:0b:22:78:f5:d5:70:9b:d7:fa:b5:60:87:aa:
                    ff:92:73:02:ad:b0:c7:41:8d:86:90:cd:ae:91:e1:
                    61:15:52:eb:37:e9:6b:8b:40:eb:31:36:93:d6:e1:
                    ff:8d:e6:9a:d9:84:8a:14:7a:50:57:b2:75:be:8c:
                    a6:b0:8e:24:cb:1a:ff:42:b7:c2:4f:05:23:0d:c3:
                    9c:45
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            X509v3 Subject Key Identifier: 
                CE:04:C9:83:F9:1B:36:BE:27:25:53:77:62:15:60:E8:55:35:83:72
            X509v3 Authority Key Identifier: 
                CE:04:C9:83:F9:1B:36:BE:27:25:53:77:62:15:60:E8:55:35:83:72
            X509v3 Basic Constraints: 
                CA:TRUE
    Signature Algorithm: sha256WithRSAEncryption
    Signature Value:
        ac:0d:15:4b:92:d3:09:3a:f3:3a:19:68:1f:bf:e4:ef:bb:89:
        71:75:77:97:ae:c7:df:a1:5d:16:12:32:8a:f2:03:43:dc:78:
        22:60:12:dc:4e:b5:aa:70:78:28:d4:bf:38:6c:0b:6c:f5:9f:
        2c:3d:90:bf:a6:1d:52:24:5e:21:38:69:bb:a5:de:ee:31:45:
        e7:cf:bd:86:7e:4e:ff:a5:97:9a:43:9b:4f:7e:f6:98:ae:5e:
        aa:73:6b:14:ee:5a:73:ba:c8:02:f2:11:70:b3:5d:ad:4d:dc:
        75:08:05:45:de:46:2c:21:fb:6c:ae:e6:7f:48:0f:ed:49:5f:
        c1:1e:53:7c:c0:4e:11:20:52:78:2f:0a:fe:8b:ae:df:bf:5d:
        0e:97:a7:9c:3a:1d:6c:28:9d:f5:6b:cb:13:eb:b0:32:61:ce:
        50:b8:49:f4:4d:1b:25:83:31:9f:3b:09:6a:74:35:2c:09:6d:
        a3:80:a5:01:db:70:5c:71:b6:94:15:35:01:f4:e0:b9:6e:f8:
        b3:d2:2c:e9:0f:68:16:7f:e6:b9:a7:2f:08:3b:e4:dc:b9:4c:
        50:f4:94:65:97:d0:4a:89:8d:23:63:a7:26:52:04:80:28:ec:
        57:13:f8:e6:e9:09:e3:81:f8:67:5f:36:2a:fc:55:74:7e:c5:
        0b:4c:a3:d3
				
				</pre>
				<p>删除证书</p>
				<pre class="screen">
				
[root@netkiller freeswitch]# gentls_cert remove
Are you sure you want to delete the CA? [YES to delete]
YES
Removing CA
DONE			
				
				</pre>
				
				<p>删除证书</p>
				<pre class="screen">
				
[root@netkiller freeswitch]# gentls_cert remove
Are you sure you want to delete the CA? [YES to delete]
YES
Removing CA
DONE			
				
				</pre>
				
		
			</div>
			<div class="section"><div class="titlepage"></div>
				<p>样本参考</p>
				<div class="example"><a id="id3161"></a><p class="title"><strong>例 168.1. /etc/freeswitch/vars.xml</strong></p><div class="example-contents">
					
					<p>这是我的配置仅供参考</p>
					<pre class="screen">
				
[root@netkiller ~]# xmlstarlet ed -d '//comment()' /etc/freeswitch/vars.xml
&lt;?xml version="1.0"?&gt;
&lt;include&gt;
  &lt;X-PRE-PROCESS cmd="set" data="default_password=******"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="sound_prefix=$${sounds_dir}/en/us/callie"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="domain=sip.netkiller.com"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="domain_name=$${domain}"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="hold_music=local_stream://moh"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="use_profile=external"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="rtp_sdes_suites=AEAD_AES_256_GCM_8|AEAD_AES_128_GCM_8|AES_CM_256_HMAC_SHA1_80|AES_CM_192_HMAC_SHA1_80|AES_CM_128_HMAC_SHA1_80|AES_CM_256_HMAC_SHA1_32|AES_CM_192_HMAC_SHA1_32|AES_CM_128_HMAC_SHA1_32|AES_CM_128_NULL_AUTH"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="global_codec_prefs=OPUS,G722,PCMU,PCMA,H264,VP8"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="outbound_codec_prefs=OPUS,G722,PCMU,PCMA,H264,VP8"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="xmpp_client_profile=xmppc"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="xmpp_server_profile=xmpps"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="bind_server_ip=auto"/&gt;
  &lt;X-PRE-PROCESS cmd="stun-set" data="external_rtp_ip=autonat:121.37.215.251"/&gt;
  &lt;X-PRE-PROCESS cmd="stun-set" data="external_sip_ip=autonat:121.37.215.251"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="unroll_loops=true"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="outbound_caller_name=FreeSWITCH"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="outbound_caller_id=0000000000"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="call_debug=false"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="console_loglevel=info"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="default_areacode=918"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="default_country=US"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="presence_privacy=false"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="au-ring=%(400,200,383,417);%(400,2000,383,417)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="be-ring=%(1000,3000,425)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="ca-ring=%(2000,4000,440,480)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="cn-ring=%(1000,4000,450)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="cy-ring=%(1500,3000,425)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="cz-ring=%(1000,4000,425)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="de-ring=%(1000,4000,425)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="dk-ring=%(1000,4000,425)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="dz-ring=%(1500,3500,425)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="eg-ring=%(2000,1000,475,375)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="es-ring=%(1500,3000,425)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="fi-ring=%(1000,4000,425)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="fr-ring=%(1500,3500,440)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="hk-ring=%(400,200,440,480);%(400,3000,440,480)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="hu-ring=%(1250,3750,425)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="il-ring=%(1000,3000,400)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="in-ring=%(400,200,425,375);%(400,2000,425,375)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="jp-ring=%(1000,2000,420,380)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="ko-ring=%(1000,2000,440,480)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="pk-ring=%(1000,2000,400)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="pl-ring=%(1000,4000,425)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="ro-ring=%(1850,4150,475,425)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="rs-ring=%(1000,4000,425)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="ru-ring=%(800,3200,425)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="sa-ring=%(1200,4600,425)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="tr-ring=%(2000,4000,450)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="uk-ring=%(400,200,400,450);%(400,2000,400,450)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="us-ring=%(2000,4000,440,480)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="bong-ring=v=-7;%(100,0,941.0,1477.0);v=-7;&amp;gt;=2;+=.1;%(1400,0,350,440)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="beep=%(1000,0,640)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="sit=%(274,0,913.8);%(274,0,1370.6);%(380,0,1776.7)"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="df_us_ssn=(?!219099999|078051120)(?!666|000|9\d{2})\d{3}(?!00)\d{2}(?!0{4})\d{4}"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="df_luhn=?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\d{3})\d{11}"/&gt;
  &lt;XX-PRE-PROCESS cmd="set" data="digits_dialed_filter=(($${df_luhn})|($${df_us_ssn}))"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="default_provider=example.com"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="default_provider_username=joeuser"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="default_provider_password=password"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="default_provider_from_domain=example.com"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="default_provider_register=false"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="default_provider_contact=5000"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="sip_tls_version=tlsv1,tlsv1.1,tlsv1.2"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="sip_tls_ciphers=ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="internal_auth_calls=true"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="internal_sip_port=5060"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="internal_tls_port=5061"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="internal_ssl_enable=false"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="external_auth_calls=false"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="external_sip_port=5080"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="external_tls_port=5081"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="external_ssl_enable=false"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="rtp_video_max_bandwidth_in=3mb"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="rtp_video_max_bandwidth_out=3mb"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="suppress_cng=true"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="rtp_liberal_dtmf=true"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="video_mute_png=$${images_dir}/default-mute.png"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="video_no_avatar_png=$${images_dir}/default-avatar.png"/&gt;
&lt;/include&gt;
				
					</pre>
				</div></div><br class="example-break" />
			</div>
		</div>

		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sip_profiles"></a>168.1.4.2. 配置 sip_profiles</h4></div></div></div>
			
			<p>通常在 /etc/freeswitch/vars.xml 中配置，在 internal.xml 和 external.xml
				中通过变量引用
			</p>
			<pre class="screen">
			
[root@netkiller ~]# cp /etc/freeswitch/sip_profiles/internal.xml{,.backup}
[root@netkiller ~]# cp /etc/freeswitch/sip_profiles/external.xml{,.backup}
[root@netkiller ~]# cp /etc/freeswitch/sip_profiles/internal-ipv6.xml{,.backup}
[root@netkiller ~]# cp /etc/freeswitch/sip_profiles/external-ipv6.xml{,.backup}
			
			</pre>
			<p>NAT 配置 172.16.0.10 替换成公网 IP 地址</p>
			<pre class="screen">
			
[root@netkiller ~]# vim /etc/freeswitch/sip_profiles/internal.xml
    &lt;param name="ext-rtp-ip" value="$${external_rtp_ip}"/&gt;
    &lt;param name="ext-sip-ip" value="$${external_sip_ip}"/&gt;
改为
	&lt;param name="ext-rtp-ip" value="autonat:172.16.0.10"/&gt;
	&lt;param name="ext-sip-ip" value="autonat:172.16.0.10"/&gt;		
	
			
			</pre>
			<p></p>
			<pre class="screen">
			
[root@netkiller ~]# vim /etc/freeswitch/sip_profiles/external.xml
    &lt;param name="ext-rtp-ip" value="$${external_rtp_ip}"/&gt;
    &lt;param name="ext-sip-ip" value="$${external_sip_ip}"/&gt;
改为
	&lt;param name="ext-rtp-ip" value="autonat:172.16.0.10"/&gt;
	&lt;param name="ext-sip-ip" value="autonat:172.16.0.10"/&gt;    			
			
			</pre>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="id2937"></a>旁路模式</h5></div></div></div>
				
				<p>配置 inbound-bypass-media 可以开启旁路模式，在此模式 下FreeSWITCH 只负责 SIP
					信令交换，两个 endpoint 话机 RIP 语音通信是点对点方式。这样比较节省流量，但是国内网络复杂，层层 NAT
					常常出现局域网正常，部署到广域网就会失败，现象是拨通之后没有语音。</p>
				<pre class="screen">
				
[root@netkiller ~]# grep -r 'inbound-bypass-media' /etc/freeswitch/sip_profiles/internal.xml
    &lt;!--&lt;param name="inbound-bypass-media" value="true"/&gt;--&gt;	
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="id2938"></a>启用 100rel</h5></div></div></div>
				
				<pre class="screen">
				
[root@netkiller ~]# grep 100rel /etc/freeswitch/sip_profiles/internal.xml
        There are known issues (asserts and segfaults) when 100rel is enabled.
        It is not recommended to enable 100rel at this time.
    &lt;!--&lt;param name="enable-100rel" value="true"/&gt;--&gt;

[root@netkiller ~]# vim /etc/freeswitch/sip_profiles/internal.xml

[root@netkiller ~]# systemctl restart  freeswitch

[root@netkiller ~]# grep 100rel /etc/freeswitch/sip_profiles/internal.xml
        There are known issues (asserts and segfaults) when 100rel is enabled.
        It is not recommended to enable 100rel at this time.
    &lt;param name="enable-100rel" value="true"/&gt;				
				
				</pre>
			</div>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="switch.conf.xml"></a>168.1.4.3. switch.conf.xml</h4></div></div></div>
			
			<pre class="screen">
			
[root@netkiller ~]# cp /etc/freeswitch/autoload_configs/switch.conf.xml{,.backup}
[root@netkiller ~]# xmlstarlet ed -d '//comment()' /etc/freeswitch/autoload_configs/switch.conf.xml
			
			</pre>
			<p>配置交换机名称</p>
			<pre class="screen">
			
    &lt;param name="switchname" value="netkiller"/&gt;			
			
			</pre>
			<p>RTP 端口范围</p>
			<pre class="screen">
			
    &lt;!-- RTP port range --&gt;
    &lt;!-- &lt;param name="rtp-start-port" value="16384"/&gt; --&gt;
    &lt;!-- &lt;param name="rtp-end-port" value="32768"/&gt; --&gt;			
			
			</pre>
			<p>日志级别</p>
			<pre class="screen">
			
&lt;param name="loglevel" value="debug"/&gt;
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="event_socket.conf.xml"></a>168.1.4.4. fs_cli Socket Client 配置</h4></div></div></div>
			
			<p>默认是 :: 表示 ipv6 localhost，如果需要远程访问可以改为 listen-ip 0.0.0.0</p>
			<pre class="screen">
			
[root@netkiller ~]# cat /etc/freeswitch/autoload_configs/event_socket.conf.xml
&lt;configuration name="event_socket.conf" description="Socket Client"&gt;
  &lt;settings&gt;
    &lt;param name="nat-map" value="false"/&gt;
    &lt;param name="listen-ip" value="::"/&gt;
    &lt;param name="listen-port" value="8021"/&gt;
    &lt;param name="password" value="ClueCon"/&gt;
    &lt;!--&lt;param name="apply-inbound-acl" value="loopback.auto"/&gt;--&gt;
    &lt;!--&lt;param name="stop-on-bind-error" value="true"/&gt;--&gt;
  &lt;/settings&gt;
&lt;/configuration&gt;			
			
			</pre>
			<pre class="screen">
			
[root@netkiller ~]# cat /etc/freeswitch/autoload_configs/event_socket.conf.xml 
&lt;configuration name="event_socket.conf" description="Socket Client"&gt;
  &lt;settings&gt;
    &lt;param name="nat-map" value="false"/&gt;
    &lt;param name="listen-ip" value="127.0.0.1"/&gt;
    &lt;param name="listen-port" value="8021"/&gt;
    &lt;param name="password" value="netkiller"/&gt;
    &lt;!--&lt;param name="apply-inbound-acl" value="loopback.auto"/&gt;--&gt;
    &lt;!--&lt;param name="stop-on-bind-error" value="true"/&gt;--&gt;
  &lt;/settings&gt;
&lt;/configuration&gt;
			
			</pre>
			<pre class="screen">
			
[root@netkiller ~]# fs_cli -p netkiller			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="freeswitch.gateway"></a>168.1.4.5. 网关配置</h4></div></div></div>
			
			<p>参考 /etc/freeswitch/sip_profiles/external/example.xml 文件</p>
			<pre class="screen">
			
[root@netkiller ~]# cat /etc/freeswitch/sip_profiles/external/example.xml
&lt;include&gt;
  &lt;!--&lt;gateway name="asterlink.com"&gt;--&gt;
  &lt;!--/// account username *required* ///--&gt;
  &lt;!--&lt;param name="username" value="cluecon"/&gt;--&gt;
  &lt;!--/// auth realm: *optional* same as gateway name, if blank ///--&gt;
  &lt;!--&lt;param name="realm" value="asterlink.com"/&gt;--&gt;
  &lt;!--/// username to use in from: *optional* same as  username, if blank ///--&gt;
  &lt;!--&lt;param name="from-user" value="cluecon"/&gt;--&gt;
  &lt;!--/// domain to use in from: *optional* same as  realm, if blank ///--&gt;
  &lt;!--&lt;param name="from-domain" value="asterlink.com"/&gt;--&gt;
  &lt;!--/// account password *required* ///--&gt;
  &lt;!--&lt;param name="password" value="2007"/&gt;--&gt;
  &lt;!--/// extension for inbound calls: *optional* same as username, if blank ///--&gt;
  &lt;!--&lt;param name="extension" value="cluecon"/&gt;--&gt;
  &lt;!--/// proxy host: *optional* same as realm, if blank ///--&gt;
  &lt;!--&lt;param name="proxy" value="asterlink.com"/&gt;--&gt;
  &lt;!--/// send register to this proxy: *optional* same as proxy, if blank ///--&gt;
  &lt;!--&lt;param name="register-proxy" value="mysbc.com"/&gt;--&gt;
  &lt;!--/// expire in seconds: *optional* 3600, if blank ///--&gt;
  &lt;!--&lt;param name="expire-seconds" value="60"/&gt;--&gt;
  &lt;!--/// do not register ///--&gt;
  &lt;!--&lt;param name="register" value="false"/&gt;--&gt;
  &lt;!-- which transport to use for register --&gt;
  &lt;!--&lt;param name="register-transport" value="udp"/&gt;--&gt;
  &lt;!--How many seconds before a retry when a failure or timeout occurs --&gt;
  &lt;!--&lt;param name="retry-seconds" value="30"/&gt;--&gt;
  &lt;!--Use the callerid of an inbound call in the from field on outbound calls via this gateway --&gt;
  &lt;!--&lt;param name="caller-id-in-from" value="false"/&gt;--&gt;
  &lt;!--extra sip params to send in the contact--&gt;
  &lt;!--&lt;param name="contact-params" value=""/&gt;--&gt;
  &lt;!-- Put the extension in the contact --&gt;
  &lt;!--&lt;param name="extension-in-contact" value="true"/&gt;--&gt;
  &lt;!--send an options ping every x seconds, failure will unregister and/or mark it down--&gt;
  &lt;!--&lt;param name="ping" value="25"/&gt;--&gt;
  &lt;!--&lt;param name="cid-type" value="rpid"/&gt;--&gt;
  &lt;!--rfc5626 : Abilitazione rfc5626 ///--&gt;
  &lt;!--&lt;param name="rfc-5626" value="true"/&gt;--&gt;
  &lt;!--rfc5626 : extra sip params to send in the contact--&gt;
  &lt;!--&lt;param name="reg-id" value="1"/&gt;--&gt;
  &lt;!--&lt;/gateway&gt;--&gt;
&lt;/include&gt;
			
			</pre>
			<p>配置网关</p>
			<pre class="screen">
			
[root@netkiller ~]# cat &gt; /etc/freeswitch/sip_profiles/external/hamsoverip.xml &lt;&lt;EOF
&lt;include&gt;
	&lt;gateway name="hamsoverip.com"&gt;
		&lt;param name="username" value="300177"/&gt;
		&lt;param name="realm" value="pbx-ap.hamsoverip.com:5160"/&gt;
		&lt;param name="password" value="178aee323ef95"/&gt;
		&lt;param name="register" value="true"/&gt;
		&lt;param name="register-transport" value="udp"/&gt;
	&lt;/gateway&gt;
&lt;/include&gt;
EOF
			 
			</pre>
			<p>配置拨号规则</p>
			<pre class="screen">
			
[root@netkiller ~]# cat &gt; /etc/freeswitch/dialplan/default/hamsoverip.com.xml &lt;&lt;"EOF"
&lt;include&gt;
	&lt;extension name="hamsoverip.com"&gt;
		&lt;condition field="destination_number" expression="^300(\d+)$"&gt;
			&lt;action application="bridge" data="sofia/gateway/hamsoverip.com/300$1"/&gt;
		&lt;/condition&gt;
	&lt;/extension&gt;
&lt;/include&gt;
EOF
			
			</pre>
			<p>再举一个例子, 0 作为外拨号码</p>
			<pre class="screen">
			
cat &gt; /etc/freeswitch/sip_profiles/external/netkiller.xml &lt;&lt;EOF
&lt;include&gt;
	&lt;gateway name="netkiller.cn"&gt;
		&lt;param name="username" value="6000"/&gt;
		&lt;param name="realm" value="sip.netkiller.cn:5060"/&gt;
		&lt;param name="password" value="6000"/&gt;
		&lt;param name="register" value="true"/&gt;
		&lt;param name="register-transport" value="udp"/&gt;
	&lt;/gateway&gt;
&lt;/include&gt;
EOF

cat &gt; /etc/freeswitch/dialplan/default/netkiller.cn.xml &lt;&lt;"EOF"
&lt;include&gt;
	&lt;extension name="netkiller.cn"&gt;
		&lt;condition field="destination_number" expression="^0(\d+)$"&gt;
			&lt;action application="bridge" data="sofia/gateway/netkiller.cn/$1"/&gt;
		&lt;/condition&gt;
	&lt;/extension&gt;
&lt;/include&gt;
EOF
	
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="freeswitch.destination_number"></a>168.1.4.6. 新增号段</h4></div></div></div>
			
			<p></p>
			<pre class="screen">
			
[root@netkiller ~]# cp /etc/freeswitch/dialplan/default.xml{,.backup}			
			
			</pre>
			<pre class="screen">
			
[root@netkiller ~]# vim /etc/freeswitch/dialplan/default.xml			
    &lt;extension name="Local_Extension"&gt;
      &lt;condition field="destination_number" expression="^(10[01][0-9])$"&gt;
        &lt;action application="export" data="dialed_extension=$1"/&gt;
        &lt;!-- bind_meta_app can have these args &lt;key&gt; [a|b|ab] [a|b|o|s] &lt;app&gt; --&gt;
        &lt;action application="bind_meta_app" data="1 b s execute_extension::dx XML features"/&gt;
        &lt;action application="bind_meta_app" data="2 b s record_session::$${recordings_dir}/${caller_id_number}.${strftime(%Y-%m-%d-%H-%M-%S)}.wav"/&gt;
        &lt;action application="bind_meta_app" data="3 b s execute_extension::cf XML features"/&gt;
        &lt;action application="bind_meta_app" data="4 b s execute_extension::att_xfer XML features"/&gt;
        &lt;action application="set" data="ringback=${us-ring}"/&gt;
        &lt;action application="set" data="transfer_ringback=$${hold_music}"/&gt;
        &lt;action application="set" data="call_timeout=30"/&gt;
        &lt;!-- &lt;action application="set" data="sip_exclude_contact=${network_addr}"/&gt; --&gt;
        &lt;action application="set" data="hangup_after_bridge=true"/&gt;
        &lt;!--&lt;action application="set" data="continue_on_fail=NORMAL_TEMPORARY_FAILURE,USER_BUSY,NO_ANSWER,TIMEOUT,NO_ROUTE_DESTINATION"/&gt; --&gt;
        &lt;action application="set" data="continue_on_fail=true"/&gt;
        &lt;action application="hash" data="insert/${domain_name}-call_return/${dialed_extension}/${caller_id_number}"/&gt;
        &lt;action application="hash" data="insert/${domain_name}-last_dial_ext/${dialed_extension}/${uuid}"/&gt;
        &lt;action application="set" data="called_party_callgroup=${user_data(${dialed_extension}@${domain_name} var callgroup)}"/&gt;
        &lt;action application="hash" data="insert/${domain_name}-last_dial_ext/${called_party_callgroup}/${uuid}"/&gt;
        &lt;action application="hash" data="insert/${domain_name}-last_dial_ext/global/${uuid}"/&gt;
        &lt;!--&lt;action application="export" data="nolocal:rtp_secure_media=${user_data(${dialed_extension}@${domain_name} var rtp_secure_media)}"/&gt;--&gt;
        &lt;action application="hash" data="insert/${domain_name}-last_dial/${called_party_callgroup}/${uuid}"/&gt;
        &lt;action application="bridge" data="user/${dialed_extension}@${domain_name}"/&gt;
        &lt;action application="answer"/&gt;
        &lt;action application="sleep" data="1000"/&gt;
        &lt;action application="bridge" data="loopback/app=voicemail:default ${domain_name} ${dialed_extension}"/&gt;
      &lt;/condition&gt;
    &lt;/extension&gt;
			
			</pre>
			<p>默认拨号规则是 1000~1019</p>
			<pre class="screen">
			
&lt;condition field="destination_number" expression="^(10[01][0-9])$"&gt;			
			
			</pre>
			<p>改为 1000~1099</p>
			<pre class="screen">
			
&lt;condition field="destination_number" expression="^(10[0-9][0-9])$"&gt;			
			
			</pre>
			<p>分机号段为 1000~1999，2000</p>
			<pre class="screen">
			
&lt;condition field="destination_number" expression="^(1[0-9][0-9][0-9]|2000)$"&gt;			
			
			</pre>
			<p>30000~39999 | 1000~1019</p>
			<pre class="screen">
			
  &lt;condition field="destination_number" expression="^(3\d{4}|10[01][0-9])$"&gt;
			
			</pre>
			<p>长度 3 或 4 位数 100~199, 1000~1999</p>
			<pre class="screen">
			
&lt;condition field="destination_number" expression="^(1\d{2,3})$"&gt;			
			
			</pre>
			<div class="example"><a id="id3162"></a><p class="title"><strong>例 168.2. 拨号规则，配置两个号段 100~199，1000~1999</strong></p><div class="example-contents">
				
				<p>拨出规则</p>
				<pre class="screen">
				
[root@netkiller ~]# vim /etc/freeswitch/dialplan/default.xml				
    &lt;extension name="Local_Extension"&gt;
      &lt;!-- &lt;condition field="destination_number" expression="^(10[01][0-9])$"&gt; --&gt;
      &lt;condition field="destination_number" expression="^(1\d{2,3})$"&gt;
        &lt;action application="export" data="dialed_extension=$1"/&gt;
        &lt;!-- bind_meta_app can have these args &lt;key&gt; [a|b|ab] [a|b|o|s] &lt;app&gt; --&gt;
        &lt;action application="bind_meta_app" data="1 b s execute_extension::dx XML features"/&gt;
        &lt;action application="bind_meta_app" data="2 b s record_session::$${recordings_dir}/${caller_id_number}.${strftime(%Y-%m-%d-%H-%M-%S)}.wav"/&gt;
        &lt;action application="bind_meta_app" data="3 b s execute_extension::cf XML features"/&gt;
        &lt;action application="bind_meta_app" data="4 b s execute_extension::att_xfer XML features"/&gt;
        &lt;action application="set" data="ringback=${us-ring}"/&gt;
        &lt;action application="set" data="transfer_ringback=$${hold_music}"/&gt;
        &lt;action application="set" data="call_timeout=30"/&gt;
        &lt;!-- &lt;action application="set" data="sip_exclude_contact=${network_addr}"/&gt; --&gt;
        &lt;action application="set" data="hangup_after_bridge=true"/&gt;
        &lt;!--&lt;action application="set" data="continue_on_fail=NORMAL_TEMPORARY_FAILURE,USER_BUSY,NO_ANSWER,TIMEOUT,NO_ROUTE_DESTINATION"/&gt; --&gt;
        &lt;action application="set" data="continue_on_fail=true"/&gt;
        &lt;action application="hash" data="insert/${domain_name}-call_return/${dialed_extension}/${caller_id_number}"/&gt;
        &lt;action application="hash" data="insert/${domain_name}-last_dial_ext/${dialed_extension}/${uuid}"/&gt;
        &lt;action application="set" data="called_party_callgroup=${user_data(${dialed_extension}@${domain_name} var callgroup)}"/&gt;
        &lt;action application="hash" data="insert/${domain_name}-last_dial_ext/${called_party_callgroup}/${uuid}"/&gt;
        &lt;action application="hash" data="insert/${domain_name}-last_dial_ext/global/${uuid}"/&gt;
        &lt;!--&lt;action application="export" data="nolocal:rtp_secure_media=${user_data(${dialed_extension}@${domain_name} var rtp_secure_media)}"/&gt;--&gt;
        &lt;action application="hash" data="insert/${domain_name}-last_dial/${called_party_callgroup}/${uuid}"/&gt;
        &lt;action application="bridge" data="user/${dialed_extension}@${domain_name}"/&gt;
        &lt;action application="answer"/&gt;
        &lt;action application="sleep" data="1000"/&gt;
        &lt;action application="bridge" data="loopback/app=voicemail:default ${domain_name} ${dialed_extension}"/&gt;
      &lt;/condition&gt;
    &lt;/extension&gt;				
				
				</pre>
				<p>拨入规则</p>
				<pre class="screen">
				
[root@netkiller ~]# cp /etc/freeswitch/dialplan/public.xml{,.backup}

    &lt;extension name="public_extensions"&gt;
      &lt;!-- &lt;condition field="destination_number" expression="^(10[01][0-9])$"&gt; --&gt;
      &lt;condition field="destination_number" expression="^(1\d{2,3})$"&gt;
        &lt;action application="transfer" data="$1 XML default"/&gt;
      &lt;/condition&gt;
    &lt;/extension&gt;
				
				</pre>

			</div></div><br class="example-break" />
			<p>更推荐的方式，是增加配置文件，不修改 public.xml 文件</p>
			<pre class="screen">
			
[root@netkiller freeswitch]# cat dialplan/public/hoip.xml 
&lt;include&gt;

    &lt;extension name="public_extensions"&gt;
      &lt;condition field="destination_number" expression="^(1\d{2,3})$"&gt;
        &lt;action application="transfer" data="$1 XML default"/&gt;
      &lt;/condition&gt;
    &lt;/extension&gt;

&lt;/include&gt;			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="logfile.conf.xml "></a>168.1.4.7. logfile.conf.xml</h4></div></div></div>
			
			<pre class="screen">
			
[root@netkiller ~]# cat /etc/freeswitch/autoload_configs/logfile.conf.xml 
&lt;configuration name="logfile.conf" description="File Logging"&gt;
  &lt;settings&gt;
   &lt;!-- true to auto rotate on HUP, false to open/close --&gt;
   &lt;param name="rotate-on-hup" value="true"/&gt;
  &lt;/settings&gt;
  &lt;profiles&gt;
    &lt;profile name="default"&gt;
      &lt;settings&gt;
        &lt;!-- File to log to --&gt;
        &lt;!--&lt;param name="logfile" value="/var/log/freeswitch.log"/&gt;--&gt;
        &lt;!-- At this length in bytes rotate the log file (0 for never) --&gt;
        &lt;param name="rollover" value="1048576000"/&gt;
                &lt;!-- Maximum number of log files to keep before wrapping --&gt;
                &lt;!-- If this parameter is enabled, the log filenames will not include a date stamp --&gt;
                &lt;param name="maximum-rotate" value="32"/&gt;
        &lt;!-- Prefix all log lines by the session's uuid  --&gt;
        &lt;param name="uuid" value="true" /&gt;
      &lt;/settings&gt;
      &lt;mappings&gt;
        &lt;!-- 
             name can be a file name, function name or 'all' 
             value is one or more of debug,info,notice,warning,err,crit,alert,all
             Please see comments in console.conf.xml for more information
        --&gt;
        &lt;map name="all" value="console,debug,info,notice,warning,err,crit,alert"/&gt;
      &lt;/mappings&gt;
    &lt;/profile&gt;
  &lt;/profiles&gt;
&lt;/configuration&gt;			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="freeswitch.h246"></a>168.1.4.8. 视频通话</h4></div></div></div>
			
			<p>新增一项 proxy_media 配置</p>
			<pre class="screen">
		
echo '&lt;X-PRE-PROCESS cmd="set" data="proxy_media=true"/&gt;' &gt;&gt; /etc/freeswitch/vars.xml

[root@netkiller ~]# echo '&lt;X-PRE-PROCESS cmd="set" data="proxy_media=true"/&gt;' &gt;&gt; /etc/freeswitch/vars.xml
[root@netkiller ~]# grep  'proxy_media' /etc/freeswitch/vars.xml
&lt;X-PRE-PROCESS cmd="set" data="proxy_media=true"/&gt;
		
			</pre>
			<p>去掉 inbound-proxy-media 注释</p>
			<pre class="screen">
		
[root@netkiller ~]# egrep "inbound-proxy-media|inbound-late-negotiation" /etc/freeswitch/sip_profiles/internal.xml
    &lt;!--&lt;param name="inbound-proxy-media" value="true"/&gt;--&gt;
    &lt;param name="inbound-late-negotiation" value="true"/&gt;
    
&lt;!--&lt;param name="inbound-proxy-media" value="true"/&gt;--&gt;
修改
&lt;param name="inbound-proxy-media" value="true"/&gt;
    
[root@netkiller ~]# egrep "inbound-proxy-media|inbound-late-negotiation" /etc/freeswitch/sip_profiles/internal.xml
    &lt;param name="inbound-proxy-media" value="true"/&gt;
    &lt;param name="inbound-late-negotiation" value="true"/&gt;    
		
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="freeswitch.voicemail"></a>168.1.4.9. 语音邮箱(voicemail)</h4></div></div></div>
			
			<p>确认 voicemail 模块是否启用</p>
			<pre class="screen">
		
[root@netkiller ~]# grep voicemail /etc/freeswitch/autoload_configs/modules.conf.xml 
    &lt;load module="mod_voicemail"/&gt;		
		
			</pre>
			<p>语音信箱存储目录</p>
			<pre class="screen">
		
[root@netkiller ~]# ls /var/lib/freeswitch/storage/voicemail/default/sip.netkiller.com/
1000  1001  1002  1003  1004  1005  1006  1007  1009  1010  1011  1012  1013		
		
			</pre>
			<p>拨打4000，根据提示输入user id和密码，就可以收听到留言了。</p>

		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id2939"></a>168.1.4.10. 多租户（多领域）配置</h4></div></div></div>
			
			<pre class="screen">
			
[root@netkiller ~]# cat /etc/freeswitch/directory/default/1000.xml			
&lt;include&gt;
     &lt;domain name="sip.netkiller.cn"&gt;
         &lt;user id="1000"&gt;
             &lt;params&gt;
                 &lt;param name="password" value="1234"/&gt;
             &lt;/params&gt;
         &lt;/user&gt;
         &lt;user id="1001"&gt;
             &lt;params&gt;
                 &lt;param name="password" value="1234"/&gt;
             &lt;/params&gt;
         &lt;/user&gt;
     &lt;/domain&gt;
 
     &lt;domain name="voip.netkiller.cn"&gt;
         &lt;user id="1000"&gt;
             &lt;params&gt;
                 &lt;param name="password" value="1234"/&gt;                                                                                                                                        
             &lt;/params&gt;
         &lt;/user&gt;
         &lt;user id="1001"&gt;
             &lt;params&gt;
                 &lt;param name="password" value="1234"/&gt;
             &lt;/params&gt;
         &lt;/user&gt;
     &lt;/domain&gt;
 &lt;/include&gt;			
			
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="freeswitch.mysql"></a>168.1.5. MySQL 模块配置</h3></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id2940"></a>168.1.5.1. 安装 mariadb</h4></div></div></div>
			
			<pre class="screen">
			
yum install -y mariadb mariadb-server
service mariadb start
systemctl enable mariadb
mysql_secure_installation 			
			
			</pre>
		</div>

		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id2941"></a>168.1.5.2. 安装模块</h4></div></div></div>
			
			<pre class="screen">
			
[root@netkiller ~]# dnf install -y freeswitch-database-mariadb			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id2942"></a>168.1.5.3. 启用 mysql 支持</h4></div></div></div>
			
			<pre class="screen">
			
[root@netkiller ~]# cat /etc/freeswitch/autoload_configs/pre_load_modules.conf.xml
&lt;configuration name="pre_load_modules.conf" description="Modules"&gt;
  &lt;modules&gt;
    &lt;!-- Databases --&gt;
    &lt;!-- &lt;load module="mod_mariadb"/&gt; --&gt;
    &lt;load module="mod_pgsql"/&gt;
  &lt;/modules&gt;
&lt;/configuration&gt;		
			
			</pre>
			<p>注释 mod_pgsql 启用 mod_mariadb</p>
			<pre class="screen">
			
    &lt;load module="mod_mariadb"/&gt;
    &lt;!-- &lt;load module="mod_pgsql"/&gt; --&gt;
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id2943"></a>168.1.5.4. db.conf.xml</h4></div></div></div>
			
			<pre class="screen">
			
[root@netkiller ~]# cat /etc/freeswitch/autoload_configs/db.conf.xml 
&lt;configuration name="db.conf" description="LIMIT DB Configuration"&gt;
  &lt;settings&gt;
    &lt;!--&lt;param name="odbc-dsn" value="dsn:user:pass"/&gt;--&gt;
  &lt;/settings&gt;
&lt;/configuration&gt;			
			
			</pre>
			<p></p>
			<pre class="screen">
			
&lt;configuration name="db.conf" description="LIMIT DB Configuration"&gt;
  &lt;settings&gt;
    &lt;param name="core-db-dsn" value="mariadb://Server=192.168.0.11;Port=3307;Database=freeswitch;Uid=root;Pwd=123456;" /&gt;
  &lt;/settings&gt;
&lt;/configuration&gt;
			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id2944"></a>168.1.5.5. switch.conf.xml</h4></div></div></div>
			
			<p>修改下面文件中的 core-db-dsn</p>
			<pre class="screen">
			
[root@netkiller ~]# vim /etc/freeswitch/autoload_configs/switch.conf.xml		
			
			</pre>

			<pre class="screen">
			
[root@netkiller ~]# cat /etc/freeswitch/autoload_configs/switch.conf.xml | grep dsn
    &lt;!-- &lt;param name="core-db-dsn" value="pgsql://hostaddr=127.0.0.1 dbname=freeswitch user=freeswitch password='' options='-c client_min_messages=NOTICE'" /&gt; --&gt;
    &lt;!-- &lt;param name="core-db-dsn" value="postgresql://freeswitch:@127.0.0.1/freeswitch?options=-c%20client_min_messages%3DNOTICE" /&gt; --&gt;
    &lt;param name="core-db-dsn" value="mariadb://Server=localhost;Database=freeswitch;Uid=freeswitch;Pwd=pass;" /&gt;
    &lt;!-- &lt;param name="core-db-dsn" value="dsn:username:password" /&gt; --&gt;			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id2945"></a>168.1.5.6. 修改 sip_profile 配置文件</h4></div></div></div>
			
			<p>数据源格式</p>
			<pre class="screen">
			
mariadb://Server=localhost;Database=freeswitch;Uid=freeswitch;Pwd=pass;		
			
			</pre>
			<p>修改下面文件中的 odbc-dsn</p>
			<pre class="screen">
			
[root@netkiller ~]# vim /etc/freeswitch/autoload_configs/switch.conf.xml
[root@netkiller ~]# vim /etc/freeswitch/autoload_configs/db.conf.xml
[root@netkiller ~]# vim /etc/freeswitch/sip_profiles/internal.xml
[root@netkiller ~]# vim /etc/freeswitch/sip_profiles/internal-ipv6.xml
			
			</pre>

		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id2946"></a>168.1.5.7. 检查配置</h4></div></div></div>
			
			<p>用下面命令检查是否遗漏</p>
			<pre class="screen">
			
[root@netkiller ~]# grep -r 'odbc-dsn' /etc/freeswitch/*/*.xml
[root@netkiller ~]# grep -r 'core-db-dsn' /etc/freeswitch/*/*.xml
			
			</pre>
		</div>
	</div>

	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="freeswitch.number"></a>168.1.6. 测试号码</h3></div></div></div>
		
		<p>freeswitch提供了测试号码</p>
		<pre class="screen">
		
号码		说明
9664	保持音乐
9196	echo，回音测试
9195	echo，回音测试，延迟5秒
9197	milliwatte extension，铃音生成
9198	TGML 铃音生成示例
5000	示例IVR4000听取语音信箱
33xx	电话会议，48K(其中xx可为00-99，下同)
32xx	电话会议，32K
31xx	电话会议，16K
30xx	电话会议，8K
2000-2002	呼叫组
1000-1019	默认分机号
		
		</pre>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id2947"></a>168.1.6.1. 测试分机号</h4></div></div></div>
			
			<p>1000-1019 测试账号位置</p>
			<pre class="screen">
			
[root@netkiller ~]# ls /etc/freeswitch/directory/default/
1000.xml  1002.xml  1004.xml  1006.xml  1008.xml  1010.xml  1012.xml  1014.xml  1016.xml  1018.xml  brian.xml    example.com.xml
1001.xml  1003.xml  1005.xml  1007.xml  1009.xml  1011.xml  1013.xml  1015.xml  1017.xml  1019.xml  default.xml  skinny-example.xml			
			
			</pre>
			<p>用户配置文件</p>
			<pre class="screen">
			
[root@netkiller ~]# cat /etc/freeswitch/directory/default/1000.xml 
&lt;include&gt;
  &lt;user id="1000"&gt;
    &lt;params&gt;
      &lt;param name="password" value="$${default_password}"/&gt;
      &lt;param name="vm-password" value="1000"/&gt;
    &lt;/params&gt;
    &lt;variables&gt;
      &lt;variable name="toll_allow" value="domestic,international,local"/&gt;
      &lt;variable name="accountcode" value="1000"/&gt;
      &lt;variable name="user_context" value="default"/&gt;
      &lt;variable name="effective_caller_id_name" value="Extension 1000"/&gt;
      &lt;variable name="effective_caller_id_number" value="1000"/&gt;
      &lt;variable name="outbound_caller_id_name" value="$${outbound_caller_name}"/&gt;
      &lt;variable name="outbound_caller_id_number" value="$${outbound_caller_id}"/&gt;
      &lt;variable name="callgroup" value="techsupport"/&gt;
    &lt;/variables&gt;
  &lt;/user&gt;
&lt;/include&gt;
			
			</pre>
			<p>账号密码在 /etc/freeswitch/vars.xml 配置文件中</p>
			<pre class="screen">
			
&lt;X-PRE-PROCESS cmd="set" data="default_password=eFyS2wcZo1zKZ3KG"/&gt;
			
			</pre>
			<p>用下面方法查看密码</p>
			<pre class="screen">
			
[root@netkiller ~]# cat /etc/freeswitch/vars.xml | grep default_password
       YOU SHOULD CHANGE THIS default_password value if you don't want to be subject to any
  &lt;X-PRE-PROCESS cmd="set" data="default_password=eFo1zKZyS2wcZ3KG"/&gt;		
			
			</pre>
		</div>

	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="freeswitch.fs_cli"></a>168.1.7. fs_cli</h3></div></div></div>
		
		<p>进入 fs_cli</p>
		<pre class="screen">
		
[root@netkiller ~]# fs_cli 
.=======================================================.
|            _____ ____     ____ _     ___              |
|           |  ___/ ___|   / ___| |   |_ _|             |
|           | |_  \___ \  | |   | |    | |              |
|           |  _|  ___) | | |___| |___ | |              |
|           |_|   |____/   \____|_____|___|             |
|                                                       |
.=======================================================.
| Anthony Minessale II, Ken Rice,                       |
| Michael Jerris, Travis Cross                          |
| FreeSWITCH (http://www.freeswitch.org)                |
| Paypal Donations Appreciated: paypal@freeswitch.org   |
| Brought to you by ClueCon http://www.cluecon.com/     |
.=======================================================.

.=======================================================================================================.
|       _                            _    ____ _             ____                                       |
|      / \   _ __  _ __  _   _  __ _| |  / ___| |_   _  ___ / ___|___  _ __                             |
|     / _ \ | '_ \| '_ \| | | |/ _` | | | |   | | | | |/ _ \ |   / _ \| '_ \                            |
|    / ___ \| | | | | | | |_| | (_| | | | |___| | |_| |  __/ |__| (_) | | | |                           |
|   /_/   \_\_| |_|_| |_|\__,_|\__,_|_|  \____|_|\__,_|\___|\____\___/|_| |_|                           |
|                                                                                                       |
|    ____ _____ ____    ____             __                                                             |
|   |  _ \_   _/ ___|  / ___|___  _ __  / _| ___ _ __ ___ _ __   ___ ___                                |
|   | |_) || || |     | |   / _ \| '_ \| |_ / _ \ '__/ _ \ '_ \ / __/ _ \                               |
|   |  _ &lt; | || |___  | |__| (_) | | | |  _|  __/ | |  __/ | | | (_|  __/                               |
|   |_| \_\|_| \____|  \____\___/|_| |_|_|  \___|_|  \___|_| |_|\___\___|                               |
|                                                                                                       |
|     ____ _             ____                                                                           |
|    / ___| |_   _  ___ / ___|___  _ __         ___ ___  _ __ ___                                       |
|   | |   | | | | |/ _ \ |   / _ \| '_ \       / __/ _ \| '_ ` _ \                                      |
|   | |___| | |_| |  __/ |__| (_) | | | |  _  | (_| (_) | | | | | |                                     |
|    \____|_|\__,_|\___|\____\___/|_| |_| (_)  \___\___/|_| |_| |_|                                     |
|                                                                                                       |
.=======================================================================================================.

Type /help &lt;enter&gt; to see a list of commands		
		
		</pre>
		<p>输入密码，并进入客户端</p>
		<pre class="screen">
		
fs_cli -H 127.0.0.1 -P 8021 -p password	
		
		</pre>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id2948"></a>168.1.7.1. 退出 fs_cli</h4></div></div></div>
			
			<pre class="screen">
			
/exit
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="fa_cli.log"></a>168.1.7.2. 日志</h4></div></div></div>
			

			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="console.loglevel"></a>loglevel</h5></div></div></div>
				
				<p>console loglevel （0~7）</p>
				<pre class="screen">
			
console loglevel 3			
			
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h5 class="title"><a id="nolog"></a>关闭日志</h5></div></div></div>
				
				<pre class="screen">
			
freeswitch@-ERR switchname Command not found!&gt; /nolog
+OK no longer logging			
			
				</pre>
			</div>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sofia.profile"></a>168.1.7.3. profile</h4></div></div></div>
			
			<pre class="screen">
			
打开sip详细日志
sofia profile internal siptrace on

关闭sip详细日志
sofia profile internal siptrace off			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sofia.status"></a>168.1.7.4. sofia status</h4></div></div></div>
			
			<pre class="screen">
			
[root@netkiller ~]# fs_cli -x "sofia status"
                     Name          Type                                       Data      State
=================================================================================================
            external-ipv6       profile                   sip:mod_sofia@[::1]:5080      RUNNING (0)
          sip.netkiller.cn         alias                                   internal      ALIASED
                 external       profile           sip:mod_sofia@192.168.0.230:5080      RUNNING (0)
    external::example.com       gateway                    sip:joeuser@example.com      NOREG
     external::hamsoverip       gateway      sip:300177@pbx-ap.hamsoverip.com:5160      REGED
            internal-ipv6       profile                   sip:mod_sofia@[::1]:5060      RUNNING (0)
                 internal       profile           sip:mod_sofia@192.168.0.230:5060      RUNNING (0)
=================================================================================================
4 profiles 1 alias			
			
			</pre>

		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sofia.profile.internal.siptrace"></a>168.1.7.5. sip 抓包</h4></div></div></div>
			
			<pre class="screen">
			
sofia profile internal siptrace on
sofia profile external siptrace on	
			
			</pre>

		</div>

		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sofia.status.profile.internal"></a>168.1.7.6. internal 状态查看</h4></div></div></div>
			
			<pre class="screen">
			
freeswitch@-ERR switchname Command not found!&gt; sofia status profile internal
=================================================================================================
Name                    internal
Domain Name             N/A
Auto-NAT                true
DBName                  sofia_reg_internal
Pres Hosts              sip.netkiller.com,192.168.0.230
Dialplan                XML
Context                 public
Challenge Realm         auto_from
RTP-IP                  192.168.0.230
Ext-RTP-IP              121.37.215.251
SIP-IP                  192.168.0.230
Ext-SIP-IP              121.37.215.251
URL                     sip:mod_sofia@192.168.0.230:5060
BIND-URL                sip:mod_sofia@192.168.0.230:5060;transport=udp,tcp
WS-BIND-URL             sip:mod_sofia@192.168.0.230:5066;transport=ws
WSS-BIND-URL            sips:mod_sofia@192.168.0.230:7443;transport=wss
HOLD-MUSIC              local_stream://moh
OUTBOUND-PROXY          N/A
CODECS IN               OPUS,G722,G729,PCMU,PCMA,H264,VP8
CODECS OUT              OPUS,G722,G729,PCMU,PCMA,H264,VP8
TEL-EVENT               101
DTMF-MODE               rfc2833
CNG                     13
SESSION-TO              0
MAX-DIALOG              0
MAX-RECV-RPS            1000
NOMEDIA                 false
LATE-NEG                true
PROXY-MEDIA             true
AGGRESSIVENAT           false
CALLS-IN                195
FAILED-CALLS-IN         99
CALLS-OUT               22
FAILED-CALLS-OUT        14
REGISTRATIONS           8
			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sofia.status.profile.external"></a>168.1.7.7. external 状态</h4></div></div></div>
			
			<pre class="screen">
			
freeswitch@-ERR switchname Command not found!&gt; sofia status profile external
=================================================================================================
Name                    external
Domain Name             N/A
Auto-NAT                true
DBName                  sofia_reg_external
Pres Hosts       
Dialplan                XML
Context                 public
Challenge Realm         auto_to
RTP-IP                  192.168.0.230
Ext-RTP-IP              121.37.215.251
SIP-IP                  192.168.0.230
Ext-SIP-IP              121.37.215.251
URL                     sip:mod_sofia@192.168.0.230:5080
BIND-URL                sip:mod_sofia@192.168.0.230:5080;transport=udp,tcp
HOLD-MUSIC              local_stream://moh
OUTBOUND-PROXY          N/A
CODECS IN               OPUS,G722,G729,PCMU,PCMA,H264,VP8
CODECS OUT              OPUS,G722,G729,PCMU,PCMA,H264,VP8
TEL-EVENT               101
DTMF-MODE               rfc2833
CNG                     13
SESSION-TO              0
MAX-DIALOG              0
MAX-RECV-RPS            1000
NOMEDIA                 false
LATE-NEG                true
PROXY-MEDIA             false
AGGRESSIVENAT           false
CALLS-IN                3
FAILED-CALLS-IN         3
CALLS-OUT               0
FAILED-CALLS-OUT        0
REGISTRATIONS           0			
			
			</pre>
		</div>

		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sofia.status.profile.internal.reg"></a>168.1.7.8. 注册状态查看</h4></div></div></div>
			
			<pre class="screen">
			
[root@netkiller ~]# fs_cli -x "sofia status profile internal reg"

Registrations:
=================================================================================================
Call-ID:        1_4246134458@192.168.123.55
User:           1008@sip.netkiller.cn
Contact:        "1008" &lt;sip:1008@192.168.123.55:5060;fs_nat=yes;fs_path=sip%3A1008%40223.74.131.87%3A20508&gt;
Agent:          Yealink SIP-T21P_E2 52.84.0.125
Status:         Registered(UDP-NAT)(unknown) EXP(2025-04-06 19:32:38) EXPSECS(2540)
Ping-Status:    Reachable
Ping-Time:      0.00
Host:           netkiller
IP:             223.74.131.87
Port:           20508
Auth-User:      1008
Auth-Realm:     sip.netkiller.cn
MWI-Account:    1008@sip.netkiller.cn

Call-ID:        212FF149-109A-40AF-A2CF-23003FC53819
User:           1002@sip.netkiller.cn
Contact:        "BG7NYT" &lt;sip:1002@172.16.0.11:5060;fs_nat=yes;fs_path=sip%3A1002%40112.97.167.132%3A13917&gt;
Agent:          Jami Daemon 16.0.0-fc3402940f (macOS)
Status:         Registered(UDP-NAT)(unknown) EXP(2025-04-06 19:39:37) EXPSECS(2959)
Ping-Status:    Reachable
Ping-Time:      0.00
Host:           netkiller
IP:             112.97.167.132
Port:           13917
Auth-User:      1002
Auth-Realm:     sip.netkiller.cn
MWI-Account:    1002@sip.netkiller.cn

Call-ID:        139311fc-5f0ee947@172.16.0.10
User:           1000@sip.netkiller.cn
Contact:        "BG7NYT" &lt;sip:1000@172.16.0.10:5060;fs_nat=yes;fs_path=sip%3A1000%40112.97.167.132%3A12689&gt;
Agent:          Linksys/PAP2T-5.1.6(LS)
Status:         Registered(UDP-NAT)(unknown) EXP(2025-04-06 19:39:51) EXPSECS(2973)
Ping-Status:    Reachable
Ping-Time:      0.00
Host:           netkiller
IP:             112.97.167.132
Port:           12689
Auth-User:      1000
Auth-Realm:     sip.netkiller.cn
MWI-Account:    1000@sip.netkiller.cn

Call-ID:        5A7530FB452FDFDC5BDCD7E3A73DF6EEBC4D93D0
User:           1006@sip.netkiller.cn
Contact:        "" &lt;sip:1006@10.65.4.4:23015;rinstance=18F4361D;fs_nat=yes;fs_path=sip%3A1006%40167.99.119.244%3A23015%3Brinstance%3D18F4361D&gt;
Agent:          Acrobits SIPIS
Status:         Registered(UDP-NAT)(unknown) EXP(2025-04-06 18:57:03) EXPSECS(405)
Ping-Status:    Reachable
Ping-Time:      0.00
Host:           netkiller
IP:             167.99.119.244
Port:           23015
Auth-User:      1006
Auth-Realm:     sip.netkiller.cn
MWI-Account:    1006@sip.netkiller.cn

Total items returned: 4
=================================================================================================			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sofia.profile.internal.rescan"></a>168.1.7.9. 呼叫</h4></div></div></div>
			
			<p>重新扫描加载 sip profile</p>
			<pre class="screen">
			
sofia profile internal rescan
sofia profile external rescan
			
			</pre>
			<p>重启 sip profile</p>
			<pre class="screen">
			
sofia profile internal restart
sofia profile external restart
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="show.calls"></a>168.1.7.10. 呼叫</h4></div></div></div>
			
			<pre class="screen">
			
# 显示当前呼叫
show calls

# 显示呼叫数量
show calls count

# 挂断某个呼叫
uuid_kill 59b857d2-d7b8-4c7e-6666-e19be0f16643

# 挂断所有呼叫
hupall

# 拨打某个用户并启用echo回音
originate user/1000 &amp;echo
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="fs_cli.originate"></a>168.1.7.11. 呼叫测试</h4></div></div></div>
			
			<pre class="screen">
			
回音测试
originate user/1000 &amp;echo

停泊
originate user/1000 &amp;park  # 停泊

保持
originate user/1000 &amp;hold # 保持

播放放音
originate user/1000 &amp;playback(/root/welclome.wav) # 播放音乐

呼叫并录音
originate user/1000 &amp;record(/tmp/vocie_of_alice.wav) # 呼叫并录音

同振与顺振
#经过特定的SIP服务器发起外呼，下面的命令会将INVITE先发送到192.168.2.4:5060上
bgapi originate sofia/external/8005@001.com;fs_path=sip:192.168.2.4:5060 &amp;echo 

经过特定SIP服务器
#经过特定的SIP服务器发起外呼，下面的命令会将INVITE先发送到192.168.2.4:5060上
bgapi originate sofia/external/8005@001.com;fs_path=sip:192.168.2.4:5060 &amp;echo 

忽略early media
originate {ignore_early_media=true}user/1000 &amp;echo

播放假的early media
originate {transfer_ringback=local_stream://moh}user/1000 &amp;echo

立即播放early media
originate {instant_ringback=true}{transfer_ringback=local_stream://moh}user/1000 &amp;echo

设置外显号码
originate {origination_callee_id_name=7777}user/1000
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="fs_cli.regex"></a>168.1.7.12. 正则测试</h4></div></div></div>
			
			<pre class="screen">
			
regex 123123 | \d
regex 123123 | ^\d*
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="fs_cli.eval"></a>168.1.7.13. 变量求值</h4></div></div></div>
			
			<pre class="screen">
			
eval $${mod_dir}
eval $${recording_dir}
			
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="freeswitch.lang"></a>168.1.8. 中文语音包</h3></div></div></div>
		
		<a class="ulink" href="https://files.freeswitch.org/releases/sounds/" target="_top">https://files.freeswitch.org/releases/sounds/</a>
		<pre class="screen">
		
[   ]	freeswitch-sounds-zh-cn-sinmei-8000-1.0.51.tar.gz	2014-10-09 20:21	296K	 
[   ]	freeswitch-sounds-zh-cn-sinmei-8000-1.0.51.tar.gz.md5	2014-10-09 20:21	92	 
[   ]	freeswitch-sounds-zh-cn-sinmei-8000-1.0.51.tar.gz.sha1	2014-10-09 20:21	101	 
[   ]	freeswitch-sounds-zh-cn-sinmei-8000-1.0.51.tar.gz.sha256	2014-10-09 20:21	127	 
[   ]	freeswitch-sounds-zh-cn-sinmei-16000-1.0.51.tar.gz	2014-10-09 20:21	583K	 
[   ]	freeswitch-sounds-zh-cn-sinmei-16000-1.0.51.tar.gz.md5	2014-10-09 20:21	93	 
[   ]	freeswitch-sounds-zh-cn-sinmei-16000-1.0.51.tar.gz.sha1	2014-10-09 20:21	102	 
[   ]	freeswitch-sounds-zh-cn-sinmei-16000-1.0.51.tar.gz.sha256	2014-10-09 20:21	128	 
[   ]	freeswitch-sounds-zh-cn-sinmei-32000-1.0.51.tar.gz	2014-10-09 20:21	1.1M	 
[   ]	freeswitch-sounds-zh-cn-sinmei-32000-1.0.51.tar.gz.md5	2014-10-09 20:21	93	 
[   ]	freeswitch-sounds-zh-cn-sinmei-32000-1.0.51.tar.gz.sha1	2014-10-09 20:21	102	 
[   ]	freeswitch-sounds-zh-cn-sinmei-32000-1.0.51.tar.gz.sha256	2014-10-09 20:21	128	 
[   ]	freeswitch-sounds-zh-cn-sinmei-48000-1.0.51.tar.gz	2014-10-09 20:21	1.6M	 
[   ]	freeswitch-sounds-zh-cn-sinmei-48000-1.0.51.tar.gz.md5	2014-10-09 20:21	93	 
[   ]	freeswitch-sounds-zh-cn-sinmei-48000-1.0.51.tar.gz.sha1	2014-10-09 20:21	102	 
[   ]	freeswitch-sounds-zh-cn-sinmei-48000-1.0.51.tar.gz.sha256	2014-10-09 20:21	128	 
		
		</pre>
		<p>编译 mod_say_zh 模块</p>
		<pre class="screen">
		
cd /usr/local/src/freeswitch/src/mod/say/mod_say_zh
 
make &amp;&amp; make install		
		
		</pre>
		<p>autoload_configs/modules.conf.xml</p>
		<pre class="screen">
		
    &lt;!-- Say --&gt;
    &lt;load module="mod_say_en"/&gt;
 
    &lt;load module="mod_say_zh"/&gt;
		
		
		</pre>
		<p></p>
		<pre class="screen">
		
cd /usr/local/freeswitch/conf/lang/
cp -fr en zh
cd zh
mv en.xml zh.xml
		
		
		</pre>
		<p>zh.xml</p>
		<pre class="screen">
		
&lt;language name="zh" say-module="zh" sound-prefix="$${sounds_dir}/zh/cn/link" tts-engine="mod_tts_commandline" tts-voice="link"&gt;		
		
		</pre>
		<p>vars.xml</p>
		<pre class="screen">
		
  &lt;X-PRE-PROCESS cmd="set" data="sound_prefix=$${sounds_dir}/zh/cn/link"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="default_language=zh"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="default_dialect=cn"/&gt;
  &lt;X-PRE-PROCESS cmd="set" data="default_voice=link"/&gt;		
		
		</pre>
		<p>freeswitch.xml</p>
		<pre class="screen">
		
&lt;X-PRE-PROCESS cmd="include" data="lang/zh/*.xml"/&gt;		
		
		</pre>
		<p>fs_cli 手动加载模块</p>
		<pre class="screen">
		 
load mod_say_zh
reloadxml
		
		
		</pre>
		<p>配置 Dialplan 拨号计划 dialplan/default.xml</p>
		<pre class="screen">
		
    &lt;!--say测试--&gt;
	&lt;extension name="socket_767_example"&gt;
		&lt;condition field="destination_number" expression="^767\d+$"&gt;
		    &lt;action application="answer"/&gt;
			&lt;action application="say" data="zh name_spelled intered 3456789"&gt;&lt;/action&gt;
            &lt;action application="say" data="en NUMBER intered 3456789"&gt;&lt;/action&gt;
            &lt;action application="say" data="zh TELEPHONE_NUMBER intered 13781655437"&gt;&lt;/action&gt;
            &lt;action application="playback" data="voicemail/vm-goodbye.wav"&gt;&lt;/action&gt;
		&lt;/condition&gt;
	&lt;/extension&gt;
		
		</pre>
		<p>单个用户配置 1001.xml</p>
		<pre class="screen">
		
&lt;variable name="language" value="zh"/&gt;
&lt;variable name="default_language" value="zh"/&gt;		
		
		</pre>
		<p>dialplan中配置中文</p>
		<pre class="screen">
		
	&lt;extension name="ivr_demo"&gt;
      &lt;condition field="destination_number" expression="^5000$"&gt;
        &lt;action application="set" data="language=zh"/&gt;
        &lt;action application="answer"/&gt;
        &lt;action application="sleep" data="2000"/&gt;
        &lt;action application="ivr" data="demo_ivr"/&gt;
      &lt;/condition&gt;
    &lt;/extension&gt;
		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="fusionPBX"></a>168.1.9. fusionPBX</h3></div></div></div>
		
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="freeswitch.devel"></a>168.1.10. 开发</h3></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id2949"></a>168.1.10.1. FreeSWITCH 用户管理</h4></div></div></div>
			
			<a class="ulink" href="https://github.com/netkiller/freeswitch" target="_top">https://github.com/netkiller/freeswitch</a>
			<pre class="screen">
			
# freeswitch 用户管理

## 安装依赖

pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

## 帮助信息

```shell
PS D:\GitHub\freeswitch&gt; python.exe .\freeswitch.py -h
usage: freeswitch.py [-h] [-a &lt;number&gt; &lt;callsign&gt; &lt;callgroup&gt; [&lt;number&gt; &lt;callsign&gt; &lt;callgroup&gt; ...]] [-r 1000] [-l] [-s 1000] [-d]

FreeSWITCH 用户管理工具

options:
  -h, --help            show this help message and exit
  -a &lt;number&gt; &lt;callsign&gt; &lt;callgroup&gt; [&lt;number&gt; &lt;callsign&gt; &lt;callgroup&gt; ...], --add &lt;number&gt; &lt;callsign&gt; &lt;callgroup&gt; [&lt;number&gt; &lt;callsign&gt; &lt;callgroup&gt; ...]
                        添加用户
  -r 1000, --remove 1000
                        删除用户
  -l, --list            列出用户
  -s 1000, --show 1000  查看用户
  -d, --debug           调试模式

Author: netkiller - https://www.netkiller.cn/linux/

```

## 添加用户

```shell
PS D:\GitHub\freeswitch&gt; python.exe .\freeswitch.py -a 1000 BG7NYT admin 
```

## 查看用于

```shell
PS D:\GitHub\freeswitch&gt; python.exe .\freeswitch.py -s 1000             
&lt;include&gt;
        &lt;user id="1000"&gt;
                &lt;params&gt;
                        &lt;param name="password" value="B5AbNCYj"/&gt;
                        &lt;param name="vm-password" value="1000"/&gt;
                &lt;/params&gt;
                &lt;variables&gt;
                        &lt;variable name="toll_allow" value="domestic,international,local"/&gt;
                        &lt;variable name="accountcode" value="1000"/&gt;
                        &lt;variable name="user_context" value="default"/&gt;
                        &lt;variable name="effective_caller_id_name" value="BG7NYT"/&gt;
                        &lt;variable name="effective_caller_id_number" value="1000"/&gt;
                        &lt;variable name="outbound_caller_id_name" value="$${outbound_caller_name}"/&gt;
                        &lt;variable name="outbound_caller_id_number" value="$${outbound_caller_id}"/&gt;
                        &lt;variable name="callgroup" value="admin"/&gt;
                &lt;/variables&gt;
        &lt;/user&gt;
&lt;/include&gt;
```

## 列出所有用户

```shell
PS D:\GitHub\freeswitch&gt; python.exe .\freeswitch.py -l                  
+----------+--------+----------+----------+--------+
| 电话号码 |  呼号  |   密码   | 语音信箱 | 呼叫组 |
+==========+========+==========+==========+========+
| 1000     | BG7NYT | HbM3imgb | 2031     | admin  |
+----------+--------+----------+----------+--------+
| 1003     | BG7NYT | 1u3Fc6t4 | 5927     | 33333  |
+----------+--------+----------+----------+--------+

```

## 删除用户

```shell
PS D:\GitHub\freeswitch&gt; python.exe .\freeswitch.py -r 1000
```			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id2950"></a>168.1.10.2. Java 开发包</h4></div></div></div>
			
			<pre class="screen">
			
        &lt;dependency&gt;
            &lt;groupId&gt;link.thingscloud&lt;/groupId&gt;
            &lt;artifactId&gt;freeswitch-esl-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;2.0.0&lt;/version&gt;
        &lt;/dependency&gt;		
			
			</pre>
		</div>
	</div>
</div>

	

	

	

	

	


	
	
	


	
	
	

	
	
</div><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="../im/innd/index.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="../communication.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="kamailio.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">167.4. News Group (innd) </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 168.2. Kamailio</td></tr></table></div><script xmlns="">
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-11694057-1', 'auto');
			ga('send', 'pageview');

		</script><script xmlns="" async="async">
			var _hmt = _hmt || [];
			(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
			})();
</script><script xmlns="" async="async">
			(function(){
			var bp = document.createElement('script');
			var curProtocol = window.location.protocol.split(':')[0];
			if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			}
			else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			}
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(bp, s);
			})();
</script></body></html>