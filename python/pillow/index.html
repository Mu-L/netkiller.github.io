<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>24.5. Pillow 图形库</title><link rel="stylesheet" type="text/css" href="../docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><meta name="keywords" content="php,pear,pecl,phar, python, , " /><link rel="home" href="../index.html" title="Netkiller Python 手札" /><link rel="up" href="../graphics.html" title="第 24 章 图形开发" /><link rel="prev" href="../opencv/index.html" title="24.4. OpenCV" /><link rel="next" href="../ops/index.html" title="第 25 章 自动化运维" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> | <a xmlns="" href="//netkiller.github.io/">简体中文</a> | <a xmlns="" href="http://netkiller.sourceforge.net/">繁体中文</a> | <a xmlns="" href="/journal/index.html">杂文</a>
		| <a xmlns="" href="https://github.com/netkiller">Github</a> | <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> | <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> | <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> | <a xmlns="" href="https://www.youtube.com/user/bg7nyt/videos">Youtube</a> | <a xmlns="" href="//www.netkiller.cn/home/donations.html">打赏(Donations)</a> | <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">24.5. Pillow 图形库</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../opencv/index.html">上一页</a> </td><th width="60%" align="center">第 24 章 图形开发</th><td width="20%" align="right"> <a accesskey="n" href="../ops/index.html">下一页</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td><td></td><td><a href="https://zhuanlan.zhihu.com/netkiller"><img src="/images/logo/zhihu-card-default.svg" height="25" /></a></td><td valign="middle"><a href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a></td><td></td><td></td><td></td><td></td></tr></table><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="index"></a>24.5. Pillow 图形库</h2></div></div></div>
	
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1281"></a>24.5.1. 获取图片信息</h3></div></div></div>
		
		<pre class="programlisting">
		
from PIL import Image
import numpy as np
 
img = Image.open('netkiller.jpg')
 
# 宽度，高度
width, height = img.size
# 通道
channel_mode = img.mode
# 平均值
mean_value = np.mean(img)
 
print(width)
print(height)
print(channel_mode)
print(mean_value)
		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1282"></a>24.5.2. 创建空图像</h3></div></div></div>
		
		<pre class="programlisting">
		
from PIL import Image
 
width = 200
height = 100
 
img_white = Image.new('RGB', (width,height), (255,255,255))
img_black = Image.new('RGB', (width,height), (0,0,0))
img_L = Image.new('L', (width, height), (255))
 
img_white.show()
img_black.show()
img_L.show()
		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1283"></a>24.5.3. 裁剪</h3></div></div></div>
		
		<pre class="programlisting">
		
from PIL import Image
 
img = Image.open('netkiller.jpg') 
width, height = img.size
 
# 前两个坐标点是左上角坐标，后两个坐标点是右下角坐标（width，height）
box = (100, 100, 600, 800)
 
region = img.crop(box) 
region.save('neo.jpg')		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1284"></a>24.5.4. 画布调整</h3></div></div></div>
		
		<pre class="programlisting">
		
from PIL import Image
 
img = Image.open('netkiller.png')
 
width, height = img.size
channel_mode = img.mode
 
img_full = Image.new(channel_mode, (width*2, height))
img_part = Image.new(channel_mode, (width+100, height))
 
# 图像水平扩展整个图像
img_full.paste(img, (0, 0, width, height))
img_full.paste(img, (width, 0, width*2, height))
 
# left, top, width, height
box = (width-100, 0, width, height)
region = img.crop(box)
 
# 图像水平右侧扩展一个ROI
img_part.paste(img, (0, 0, width, height))
img_part.paste(region, (width, 0, width+100, height))
img_part.show()
img_full.show()
		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1285"></a>24.5.5. 彩色转灰度</h3></div></div></div>
		
		<pre class="programlisting">
		
from PIL import Image
 
img = Image.open('netkiller.jpg')
imgGrey = img.convert('L')
 
img.show()
imgGrey.show()
 
img.save('neo.jpg')
imgGrey.save('gray.jpg')
		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1286"></a>24.5.6. 缩放图像</h3></div></div></div>
		
		<pre class="programlisting">
		
from PIL import Image
 
img = Image.open('netkiller.jpg')
 
width, height = img.size
 
# 默认模式是NEARESET(最近邻插值)
img_NEARESET = img.resize((width//2, height//2))  
# BILINEAR 2x2区域的双线性插值
img_BILINEAR = img.resize((width//2, height//2), Image.BILINEAR)
# BICUBIC 4x4区域的双三次插值 
img_BICUBIC = img.resize((width//2, height//2), Image.BICUBIC)  
# ANTIALIAS 高质量下采样滤波
img_ANTIALIAS = img.resize((width//2, height//2), Image.ANTIALIAS)  

		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1287"></a>24.5.7. RGB 通道操作</h3></div></div></div>
		
		<pre class="programlisting">
		
from PIL import Image
 
img = Image.open('netkiller.jpg')
 
# 分离通道
R, G, B = img.split()
 
R.show)
G.show()
B.show()
 
# 合并通道
img_RGB = Image.merge('RGB', (R, G, B))
img_BGR = Image.merge('RGB', (B, G, R))

# 显示图像
img_RGB.show()
img_BGR.show()
		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1288"></a>24.5.8. 像素操作</h3></div></div></div>
		
		<pre class="programlisting">
		
from PIL import Image
 
img = Image.open('netkiller.jpg')
 
width, height = img.size
 
# 获取指定坐标位置像素值
pixel_value = img.getpixel((width/2, height/2))
print(pixel_value)
 
# 使用load方法获取指定坐标位置像素值
pim = img.load()
pixel_value1 = pim[width/2, height/2]
print(pixel_value1)
 
# 设置指定坐标位置像素的值
pim[width/2, height/2] = (0, 0, 0)
 
# 使用putpixel方法设置指定坐标位置像素的值
img.putpixel((w//2, h//2), (255,255,255))
 
# 设置指定区域像素的值
for w in range(int(width/2) - 50, int(width/2) + 50):
    for h in range(int(height/2) - 50, int(height/2) + 50):
        pim[w, h] = (255, 0, 0)
        # img.putpixel((w, h), (255,255,255))
img.show()
		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1289"></a>24.5.9. 图像商加文字</h3></div></div></div>
		
		<pre class="programlisting">
		
from PIL import Image, ImageDraw, ImageFont
 
img = Image.open('netkiller.jpg')
 
# 创建Draw对象:
draw = ImageDraw.Draw(img)
# 字体颜色
fillColor = (255, 0, 0)
 
text = 'https://www.netkiller.cn'
position = (100,100)
 
draw.text(position, text, fill=fillColor)
img.show()
		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1290"></a>24.5.10. </h3></div></div></div>
		
		<pre class="programlisting">
		
from PIL import Image
import numpy as np
 
img = Image.open('netkiller.jpg')
 
# PIL.Image 转 numpy
array = np.array(img)  
 
# numpy转 PIL.Image
img1 = Image.fromarray(array)  
img1 = Image.fromarray(array.astype('uint8'))
 
img1.save('from_array.jpg')		
		
		</pre>
	</div>
	
	
</div><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="../opencv/index.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="../graphics.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="../ops/index.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">24.4. OpenCV </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 第 25 章 自动化运维</td></tr></table></div><script xmlns="">
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-11694057-1', 'auto');
			ga('send', 'pageview');

		</script><script xmlns="" async="async">
			var _hmt = _hmt || [];
			(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
			})();
</script><script xmlns="" async="async">
			(function(){
			var bp = document.createElement('script');
			var curProtocol = window.location.protocol.split(':')[0];
			if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			}
			else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			}
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(bp, s);
			})();
</script></body></html>