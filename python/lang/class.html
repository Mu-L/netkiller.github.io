<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>1.8. Class</title><link rel="stylesheet" type="text/css" href="../docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><meta name="keywords" content="php,pear,pecl,phar, python, , " /><link rel="home" href="../index.html" title="Netkiller Python 手札" /><link rel="up" href="index.html" title="第 1 章 Python 入门" /><link rel="prev" href="python.datastruct.html" title="1.7. 数据结构" /><link rel="next" href="python.regular.html" title="1.9. 正则处理字符串" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> | <a xmlns="" href="//netkiller.github.io/">简体中文</a> | <a xmlns="" href="http://netkiller.sourceforge.net/">繁体中文</a> | <a xmlns="" href="/journal/index.html">杂文</a>
		| <a xmlns="" href="https://github.com/netkiller">Github</a> | <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> | <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> | <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> | <a xmlns="" href="https://www.youtube.com/user/bg7nyt/videos">Youtube</a> | <a xmlns="" href="//www.netkiller.cn/home/donations.html">打赏(Donations)</a> | <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.8. Class</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="python.datastruct.html">上一页</a> </td><th width="60%" align="center">第 1 章 Python 入门</th><td width="20%" align="right"> <a accesskey="n" href="python.regular.html">下一页</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td><td></td><td><a href="https://zhuanlan.zhihu.com/netkiller"><img src="/images/logo/zhihu-card-default.svg" height="25" /></a></td><td valign="middle"><a href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a></td><td></td><td></td><td></td><td></td></tr></table><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="class"></a>1.8. Class</h2></div></div></div>
	
	<pre class="screen">
class MyClass:
    """A simple example class"""
    i = 12345
    def f(self):
        return 'hello world'

x = MyClass()
    </pre>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="class.init"></a>1.8.1. __init__ 构造方法</h3></div></div></div>
		
		<pre class="screen">
def __init__(self):
    self.data = []
        </pre>
		<pre class="screen">
&gt;&gt;&gt; class Complex:
...     def __init__(self, realpart, imagpart):
...         self.r = realpart
...         self.i = imagpart
...
&gt;&gt;&gt; x = Complex(3.0, -4.5)
&gt;&gt;&gt; x.r, x.i
        </pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id881"></a>1.8.2. print class</h3></div></div></div>
		
		<p>测试代码，当我们使用 print 打印一个 class</p>
		<pre class="programlisting">
		
class Test:
    def __init__(self, a, b):
        self.a = a
        self.b = b

t = Test(1234, 5678)
print(t)
		
		</pre>
		<p>输出</p>
		<pre class="screen">
		
&lt;__main__.Test object at 0x000002BA71D254F0&gt;		
		
		</pre>
		<p>print 会调用 __str__() 和 __repr__() 方法，我们只需定义他们即可</p>
		<pre class="programlisting">
		
class Test:
    def __init__(self, a, b):
        self.a = a
        self.b = b

    def __repr__(self):
        return "Test a:% s b:% s" % (self.a, self.b)

    def __str__(self):
        return "Test: a is % s, " \
               "b is % s" % (self.a, self.b)

    # Driver Code


t = Test(1234, 5678)

# This calls __str__()  
print(t)

# This calls __repr__()  
print([t]) 		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id883"></a>1.8.3. inner class(内嵌类)</h3></div></div></div>
		
		<pre class="programlisting">
		

#!/usr/bin/env python3
 
import os, sys
 
class parent:
	def __init__(self):
		self.name = 'parent'
 
	def getName(self):
		print(self.name)

	class child:
		def __init__(self):
			self.name = 'child'
 
		def getName(self):
			print(self.name)
		def getParentName(self):
			print(parent.name)
 
if __name__ == '__main__':
	child =  parent.child()
	child.getName()

	p = parent()
	p.getName()
	c =  p.child()
	c.getName()
	c.getParentName()		
		
		</pre>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id882"></a>1.8.3.1. 内嵌 Class 继承</h4></div></div></div>
			
			<pre class="programlisting">
			
class Geometry:
    class Curve:
        def __init__(self,c=1):
            self.c = c                          #curvature parameter
            print ('Curvature %g'%self.c)
            pass                                #some codes

    class Line(Curve):
        def __init__(self):
            Geometry.Curve.__init__(self,0)     #the key point
            pass                                #some codes

g = Geometry()
C = g.Curve(0.5)
L = g.Line()			
			
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="python.enum"></a>1.8.4. Python 枚举 Enum</h3></div></div></div>
		
		<pre class="programlisting">
		
from enum import Enum
class Weekday(Enum):
    MONDAY = 1
    TUESDAY = 2
    WEDNESDAY = 3
    THURSDAY = 4
    FRIDAY = 5
    SATURDAY = 6
    SUNDAY = 7
		
		</pre>

		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id884"></a>1.8.4.1. auto() </h4></div></div></div>
			
			<pre class="programlisting">
		
from enum import auto
class Weekday(Flag):
    MONDAY = auto()
    TUESDAY = auto()
    WEDNESDAY = auto()
    THURSDAY = auto()
    FRIDAY = auto()
    SATURDAY = auto()
    SUNDAY = auto()
    WEEKEND = SATURDAY | SUNDAY
		
			</pre>
			<pre class="programlisting">
			
from enum import Enum, auto


class Color(Enum):
    RED = auto()
    BLUE = auto()
    GREEN = auto()


print(list(Color))
			
			
			</pre>
			<p>自定义 auto() 生成规则</p>
			<pre class="programlisting">
			
from enum import Enum, auto


class AutoName(Enum):
    def _generate_next_value_(name, start, count, last_values):
        return name


class Ordinal(AutoName):
    NORTH = auto()
    SOUTH = auto()
    EAST = auto()
    WEST = auto()


print(list(Ordinal))
			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id885"></a>1.8.4.2. 枚举访问</h4></div></div></div>
			
			<pre class="programlisting">
			
from enum import Enum

class Weekday(Enum):
    monday = 1
    tuesday = 2
    wednesday = 3
    thirsday = 4
    friday = 5
    saturday = 6
    sunday = 7


print(Weekday.wednesday)
print(Weekday['wednesday'])
			
			</pre>
			<pre class="programlisting">
			
from enum import Enum

class Color(Enum):
    RED = 1
    GREEN = 2
    BLUE = 3

print(Color(1))
print(Color(2))
print(Color(3))

print(Color['RED'])
print(Color['GREEN'])
print(Color['BLUE'])
						
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id886"></a>1.8.4.3. name 和 value</h4></div></div></div>
			
			<pre class="programlisting">
			
from enum import Enum
class Weekday(Enum):
    monday = 1
    tuesday = 2
    wednesday = 3
    thirsday = 4
    friday = 5
    saturday = 6
    sunday = 7
 
print(Weekday.wednesday)         # Weekday.wednesday      
print(type(Weekday.wednesday))   # &lt;enum 'Weekday'&gt;
print(Weekday.wednesday.name)    # wednesday
print(Weekday.wednesday.value)   # 3
			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id887"></a>1.8.4.4. 增加属性</h4></div></div></div>
			
			<pre class="programlisting">
			
from enum import Enum
class Weekday(Enum):
    monday = 1
    tuesday = 2
    wednesday = 3
    thirsday = 4
    friday = 5
    saturday = 6
    sunday = 7
 
Weekday.wednesday.label = "定时"
Weekday.wednesday.time = 10
 
print(Weekday.wednesday.label)   # 定时
print(Weekday.wednesday.time)    # 10
			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id888"></a>1.8.4.5. 唯一约束</h4></div></div></div>
			
			<p>正常情况,枚举允许重复出现相同的值</p>
			<pre class="programlisting">
			
from enum import Enum
class Weekday(Enum):
    monday = 1
    tuesday = 2
    wednesday = 3
    thirsday = 4
    friday = 5
    saturday = 6
    sunday = 7
    test = 3
 
 
print(Weekday.test.value)    # 3
			
			</pre>
			<p>如果不希望出现重复,可以使用 @unique 注解</p>
			<pre class="programlisting">
			
from enum import Enum, unique

@unique
class Weekday(Enum):
    monday = 1
    tuesday = 2
    wednesday = 3
    thirsday = 4
    friday = 5
    saturday = 6
    sunday = 7
    test = 3

try:
    print(Weekday.test.value)
except Exception as e:
    print(e)
			
			</pre>
			<p>运行会抛出异常</p>
			<pre class="screen">
			
ValueError: duplicate values found in &lt;enum 'Weekday'&gt;: test -&gt; wednesday			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id889"></a>1.8.4.6. 枚举比较</h4></div></div></div>
			
			<pre class="programlisting">
			
from enum import Enum
class Weekday(Enum):
    monday = 1
    tuesday = 2
    wednesday = 3
    thirsday = 4
    friday = 5
    saturday = 6
    sunday = 7
 
obj1 = Weekday.wednesday
 
obj2 = Weekday['wednesday']
 
obj3 = Weekday(3)
 
print(obj1==obj2==obj3)      # True
 
print(obj1 is obj2 is obj3)  # True
			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id890"></a>1.8.4.7. 遍历 enum 成员</h4></div></div></div>
			
			<pre class="programlisting">
			
from enum import Enum

class Shape(Enum):
    SQUARE = 2
    DIAMOND = 1
    CIRCLE = 3
    ALIAS_FOR_SQUARE = 2

for shape in Shape:
    print(shape.name, shape.value)			
			
			</pre>
			<p>输出结果</p>
			<pre class="screen">
			
SQUARE 2
DIAMOND 1
CIRCLE 3			
			
			</pre>
			<pre class="programlisting">
			
from enum import Enum


class Shape(Enum):
    SQUARE = 2
    DIAMOND = 1
    CIRCLE = 3
    ALIAS_FOR_SQUARE = 2


for name, member in Shape.__members__.items():
    print(name, member)
			
			
			</pre>
			<p>输出结果</p>
			<pre class="screen">
			
SQUARE Shape.SQUARE
DIAMOND Shape.DIAMOND
CIRCLE Shape.CIRCLE
ALIAS_FOR_SQUARE Shape.SQUARE			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id891"></a>1.8.4.8. IntEnum 整数值枚举</h4></div></div></div>
			
			<pre class="programlisting">
			
from enum import IntEnum


class Shape(IntEnum):
    CIRCLE = 1
    SQUARE = 2


class Request(IntEnum):
    POST = 1
    GET = 2


print(Shape == 1)
print(Shape.CIRCLE == 1)
print(Shape.CIRCLE == Request.POST)

			
			</pre>
		</div>
		
	</div>
</div><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="python.datastruct.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="index.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="python.regular.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">1.7. 数据结构 </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 1.9. 正则处理字符串</td></tr></table></div><script xmlns="">
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-11694057-1', 'auto');
			ga('send', 'pageview');

		</script><script xmlns="" async="async">
			var _hmt = _hmt || [];
			(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
			})();
</script><script xmlns="" async="async">
			(function(){
			var bp = document.createElement('script');
			var curProtocol = window.location.protocol.split(':')[0];
			if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			}
			else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			}
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(bp, s);
			})();
</script></body></html>