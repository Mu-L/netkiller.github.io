<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>1.7. 数据结构</title><link rel="stylesheet" type="text/css" href="../docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><meta name="keywords" content="php,pear,pecl,phar, python, , " /><link rel="home" href="../index.html" title="Netkiller Python 手札" /><link rel="up" href="index.html" title="第 1 章 Python 入门" /><link rel="prev" href="type.html" title="1.6. 数据类型" /><link rel="next" href="class.html" title="1.8. Class" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> | <a xmlns="" href="//netkiller.github.io/">简体中文</a> | <a xmlns="" href="http://netkiller.sourceforge.net/">繁体中文</a> | <a xmlns="" href="/journal/index.html">杂文</a>
		| <a xmlns="" href="https://github.com/netkiller">Github</a> | <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> | <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> | <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> | <a xmlns="" href="https://www.youtube.com/user/bg7nyt/videos">Youtube</a> | <a xmlns="" href="//www.netkiller.cn/home/donations.html">打赏(Donations)</a> | <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.7. 数据结构</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="type.html">上一页</a> </td><th width="60%" align="center">第 1 章 Python 入门</th><td width="20%" align="right"> <a accesskey="n" href="class.html">下一页</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td><td></td><td><a href="https://zhuanlan.zhihu.com/netkiller"><img src="/images/logo/zhihu-card-default.svg" height="25" /></a></td><td valign="middle"><a href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a></td><td></td><td></td><td></td><td></td></tr></table><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="python.datastruct"></a>1.7. 数据结构</h2></div></div></div>
	
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="data.list"></a>1.7.1. List</h3></div></div></div>
		
		<p>随机抽取list成员</p>
		<pre class="screen">
import random

# random choice from a list
for i in range(5):
    print random.choice([1, 2, 3, 5, 9])
		</pre>
		<pre class="programlisting">
		
test = []
test.append('1')
test.append('b')
test.append('c')
print(test)	
		
		</pre>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id864"></a>1.7.1.1. 返回索引序号</h4></div></div></div>
			
			<p>index()方法语法：</p>
			<pre class="screen">
			
list.index(x[, start[, end]])

参数
x-- 查找的对象。
start-- 可选，查找的起始位置。
end-- 可选，查找的结束位置。			
			
			</pre>
			<pre class="programlisting">
			
fruits = ["apple", "banana", "cherry", "apple"]
print(fruits.index("apple")) # 输出: 0

animals = ["cat", "dog", "tiger"]
print(animals.index("dog")) # 输出: 1

numbers = [1, 2, 3, 4, 1, 1, 1, 4, 5]
print(numbers.index(4, 4, 8)) # 输出: 7
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id865"></a>1.7.1.2. 二维列表，指定列，查找最大值</h4></div></div></div>
			
			<pre class="programlisting">
			
matrix = [[1, 2, 3],
          [4, 5, 6],
          [7, 8, 9]]

column = [row[1] for row in matrix]
max_value = max(column)

print("第二列最大值：", max_value)			
			
			</pre>
			<p>返回最大值</p>
			<pre class="programlisting">
			
matrix = [[1, 2, 3],
          [4, 5, 6],
          [7, 8, 9]]

column = [row[1] for row in matrix]
max_value = max(column)
index = column.index(max_value)
print(index, matrix[index])			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="list.index"></a>1.7.1.3. 获得list中最大/最小值元素的索引</h4></div></div></div>
			
			<pre class="programlisting">
			
获得list中最大元素的索引

nums = [1,2,3,4,5]

nums.index(max(nums))

相应的最小值索引

nums = [1,2,3,4,5]

nums.index(min(nums))			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="list.enumerate"></a>1.7.1.4. 用 enumerate 返回 list 索引</h4></div></div></div>
			
			<pre class="programlisting">
			
&gt;&gt;&gt; seq = ['one', 'two', 'three']
&gt;&gt;&gt; for i, element in enumerate(seq):
...     print i, element
...
0 one
1 two
2 three			
			
			</pre>
			<p>指定开始索引下标</p>
			<pre class="programlisting">
			
&gt;&gt;&gt; seasons = ['Spring', 'Summer', 'Fall', 'Winter']
&gt;&gt;&gt; list(enumerate(seasons))
[(0, 'Spring'), (1, 'Summer'), (2, 'Fall'), (3, 'Winter')]
&gt;&gt;&gt; list(enumerate(seasons, start=1))       # 下标从 1 开始
[(1, 'Spring'), (2, 'Summer'), (3, 'Fall'), (4, 'Winter')]			
			
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="data.set"></a>1.7.2. Set 集合</h3></div></div></div>
		
		<pre class="programlisting">
		
&gt;&gt;&gt; ','.join(set);
'four,three,two,one'

&gt;&gt;&gt; set('four,three,two,one'.split(','));
{'one', 'four', 'three', 'two'}

&gt;&gt;&gt; fruit = [ 'banana', 'orange', 'pineapple' ]
&gt;&gt;&gt; set(fruit)
{'banana', 'pineapple', 'orange'}		
		
		</pre>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id866"></a>1.7.2.1. 创建集合</h4></div></div></div>
			
			<pre class="programlisting">
			
&gt;&gt;&gt; set = {'a','b','c'}
&gt;&gt;&gt; set
set(['a', 'c', 'b'])

&gt;&gt;&gt; set = {"one", "two", "three","one"}
&gt;&gt;&gt; set
set(['three', 'two', 'one'])		
			
			</pre>
			<pre class="programlisting">
			
set1 = {1, 2, 3, 4}
print(set1)

set2 = set([4, 5, 6, 7])
print(set2)			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id867"></a>1.7.2.2. 添加元素</h4></div></div></div>
			
			<p>添加元素到集合有两个方法，分别是 add() 和 update()</p>
			<pre class="programlisting">
			
&gt;&gt;&gt; set.add('four')
&gt;&gt;&gt; set
set(['four', 'three', 'two', 'one'])
			
			</pre>
			<pre class="programlisting">
			
company = set(("Google", "OpenAI", "Facebook"))
company.update({"Microsoft"})
company.update({"Aliyun","Taobao"})
print(company)

company.update([1,2],[5,6])
print(company)			
			
			</pre>
			<pre class="screen">
			
{'Facebook', 'Google', 'Microsoft', 'Taobao', 'Aliyun', 'OpenAI'}
{'Facebook', 1, 2, 5, 6, 'Aliyun', 'Google', 'OpenAI', 'Microsoft', 'Taobao'}			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id868"></a>1.7.2.3. 删除元素</h4></div></div></div>
			
			<pre class="programlisting">
			
company = set({'Facebook', 'Google', 'Microsoft', 'Taobao', 'Aliyun', 'OpenAI'})
print(company)
company.remove("OpenAI")
print(company)
company.discard("Aliyun")
print(company)
			
			</pre>
			<p>随机移除一个元素</p>
			<pre class="programlisting">
			
company.pop()
print(company)			
			
			</pre>
			<p></p>
			<pre class="screen">
			
{'Taobao', 'Facebook', 'Aliyun', 'Microsoft', 'OpenAI', 'Google'}
{'Taobao', 'Facebook', 'Aliyun', 'Microsoft', 'Google'}
{'Taobao', 'Facebook', 'Microsoft', 'Google'}
{'Facebook', 'Microsoft', 'Google'}			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id869"></a>1.7.2.4. 清空集合</h4></div></div></div>
			
			<pre class="programlisting">
			
&gt;&gt;&gt; company = set(("Google", "Microsoft", "OpenAI"))
&gt;&gt;&gt; company.clear()
&gt;&gt;&gt; print(company)
set()			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id870"></a>1.7.2.5. 合并集合</h4></div></div></div>
			
			<pre class="programlisting">
			
x = {"apple", "banana", "cherry"}
y = {"google", "microsoft", "apple"}
 
z = x.union(y) 
 
print(z)			
			
			</pre>
			<p></p>
			<pre class="programlisting">
			
x = {"a", "b", "c"}
y = {"d", "e", "f"}
z = {"g", "i", "j"}
 
result = x.union(y, z) 
 
print(result)			
			
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="data.dict"></a>1.7.3. Dict 字典</h3></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id871"></a>1.7.3.1. 随机选择字典的 key 和 value</h4></div></div></div>
			
			<p>随机字典的 key 和 value</p>
			<pre class="screen">
			
			&lt;![CDATA[
names = {1: '张三', 2: '李四', 3: '王五', 4: '赵六', 5: '牛七', 6: '马八'}
print(random.choice(list(names.keys())))
print(random.choice(list(names.values())))			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id872"></a>1.7.3.2. 字典合并</h4></div></div></div>
			
			<pre class="screen">
			
dict1 = {'name','neo'}
dict2 = {'nickname','netkiller'}
dict1.update(dict2)
print(dict1)			
			
			</pre>
			<p></p>
			<pre class="screen">
			
{'name', 'neo', 'nickname', 'netkiller'}			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id873"></a>1.7.3.3. 取 Value 最大值</h4></div></div></div>
			
			<pre class="programlisting">
			
data = {
    "Neo": 5,
    "Netkiller": 10,
    "BG7NYT": 8,
}

ret = max(data, key=lambda x: data[x])
print(ret)
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id874"></a>1.7.3.4. 指定 key 取 value 最大值</h4></div></div></div>
			
			<pre class="programlisting">
			
data = [
    {
      "question": "为什么过只加汇摇晃",
      "answer": "因为支架是由很多支索小圆轮组成的，所以吊厢过索轮时会有轻微的震动和摇晃，这些都是正常的",
      "ratio": 0,
      "distance": 41.112388610839844
    },
    {
      "question": "吊厢过之家为什么会摇晃",
      "answer": "因为支架是由很多支索小圆轮组成的，所以吊厢过索轮时会有轻微的震动和摇晃，这些都是正常的",
      "ratio": 0,
      "distance": 42.78510284423828
    },
    {
      "question": "嗦道为啥会摇晃",
      "answer": "因为支架是由很多支索小圆轮组成的，所以吊厢过索轮时会有轻微的震动和摇晃，这些都是正常的",
      "ratio": 1,
      "distance": 44.00849914550781
    }
   
  ]

ret = max(data, key=lambda dic: dic['ratio']) 
print(ret)
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id875"></a>1.7.3.5. 字典求和</h4></div></div></div>
			
			<pre class="programlisting">
			
count = sum(dict.values())			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id876"></a>1.7.3.6. 对 value 排序后返回 key</h4></div></div></div>
			
			<pre class="programlisting">
			
data = {
    "Neo": 5,
    "Netkiller": 10,
    "BG7NYT": 8,
}

ret = sorted(data, key=lambda x: data[x])
print(ret)


ret = sorted(data, key=lambda x: data[x],reverse=True)
print(ret)

ret = sorted(data, key=lambda x: data[x],reverse=False)
print(ret)			
			
			</pre>
			<p>返回结果</p>
			<pre class="screen">
			
['Neo', 'BG7NYT', 'Netkiller']
['Netkiller', 'BG7NYT', 'Neo']
['Neo', 'BG7NYT', 'Netkiller']			
			
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Iterator"></a>1.7.4. Iterator</h3></div></div></div>
		
		<pre class="programlisting">
		
#!/usr/bin/python
# -*- coding: UTF-8 -*-
 
# 创建 Iterator 对象
it = iter([1, 2, 3, 4, 5])
# 开始循环
while True:
    try:
        # 获得下一个值
        x = next(it)
        print(x)
    except StopIteration:
        # 遇到StopIteration终止循环
        break		
		
		</pre>
		<p>设置结束标志符</p>
		<pre class="programlisting">
		
#!/usr/bin/python
# -*- coding: UTF-8 -*-

it = iter([1, 2, 5, 4, 3])
while True:
    x = next(it, 'a')
    print(x)
    if x == 'a':
        break		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id877"></a>1.7.5. 序列化</h3></div></div></div>
		
		<pre class="programlisting">
		 
import shelve

with shelve.open("/var/tmp/test") as db:
	db["hello"] = "helloworld"

with shelve.open("/var/tmp/test") as db:
	for k, v in db.items():
		print(k, ":", v)		
		
		</pre>
		<pre class="programlisting">
		 
import shelve, json

data = json.loads(json.dumps({"800": "AAAA", "900": "BBBB", "1000": "CCCC"}))
print(data, type(data))
with shelve.open("/var/tmp/test", "n") as db:
	for k, v in data.items():
		db[k] = v

with shelve.open("/var/tmp/test") as db:
	for k, v in db.items():
		print(k, ":", v)
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id878"></a>1.7.6. 队列</h3></div></div></div>
		
		<pre class="programlisting">
		 
import queue

q = queue.SimpleQueue()

for n in range(10):
	q.put(n)

print("队列数量:", q.qsize())

while not q.empty():
	print(q.get())

print("队列状态：", q.empty())
			
		</pre>
		<p>先进先出队列，保持队列最大尺寸，超过尺寸自动出队</p>
		<pre class="programlisting">
		 
from queue import Queue

q = Queue(maxsize=3)

for i in range(10):
	if q.full():
		q.get()
	q.put(i, block=False)


print(type(q.queue), q.queue)

while not q.empty():
	i = q.get(block=False)
	print(i)		
		
		</pre>
		<pre class="programlisting">
		 
from queue import Queue

q = Queue(maxsize=10)

for i in range(20):
	if q.full():
		q.get()
	q.put(i, block=False)


print(type(q.queue), q.queue)

for n in range(5):
	if not q.empty():
		i = q.get(block=False)
		print(i)		
		
		</pre>
	</div>
</div><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="type.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="index.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="class.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">1.6. 数据类型 </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 1.8. Class</td></tr></table></div><script xmlns="">
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-11694057-1', 'auto');
			ga('send', 'pageview');

		</script><script xmlns="" async="async">
			var _hmt = _hmt || [];
			(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
			})();
</script><script xmlns="" async="async">
			(function(){
			var bp = document.createElement('script');
			var curProtocol = window.location.protocol.split(':')[0];
			if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			}
			else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			}
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(bp, s);
			})();
</script></body></html>