<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>6.4. Dominate</title><link rel="stylesheet" type="text/css" href="docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><meta name="keywords" content="php,pear,pecl,phar, python, , " /><link rel="home" href="index.html" title="Netkiller Python 手札" /><link rel="up" href="ch06.html" title="第 6 章 Web framework" /><link rel="prev" href="gevent.html" title="第 7 章 gevent: A coroutine-based network library for Python" /><link rel="next" href="BeautifulSoup.html" title="6.5. BeautifulSoup" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> | <a xmlns="" href="//netkiller.github.io/">简体中文</a> | <a xmlns="" href="http://netkiller.sourceforge.net/">繁体中文</a> | <a xmlns="" href="/journal/index.html">杂文</a>
		| <a xmlns="" href="https://github.com/netkiller">Github</a> | <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> | <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> | <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> | <a xmlns="" href="https://www.youtube.com/user/bg7nyt/videos">Youtube</a> | <a xmlns="" href="//www.netkiller.cn/home/donations.html">打赏(Donations)</a> | <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6.4. Dominate</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="gevent.html">上一页</a> </td><th width="60%" align="center">第 6 章 Web framework</th><td width="20%" align="right"> <a accesskey="n" href="BeautifulSoup.html">下一页</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td><td></td><td><a href="https://zhuanlan.zhihu.com/netkiller"><img src="/images/logo/zhihu-card-default.svg" height="25" /></a></td><td valign="middle"><a href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a></td><td></td><td></td><td></td><td></td></tr></table><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Dominate"></a>6.4. Dominate</h2></div></div></div>
	
	<p>Dominate is a Python library for creating and manipulating HTML
		documents using an elegant DOM API. It allows you to write HTML pages
		in pure Python very concisely, which eliminates the need to learn
		another template language, and lets you take advantage of the more
		powerful features of Python.
	</p>
	<p>https://pypi.org/project/dominate/</p>
	<pre class="screen">
	
pip install dominate
	
	</pre>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id983"></a>6.4.1. 创建一个 HTML</h3></div></div></div>
		
		<pre class="programlisting">
		
import dominate
from dominate.tags import *

doc = dominate.document(title='Dominate your HTML')

with doc.head:
    link(rel='stylesheet', href='style.css')
    script(type='text/javascript', src='script.js')

with doc:
    with div(id='header').add(ol()):
        for i in ['home', 'about', 'contact']:
            li(a(i.title(), href='/%s.html' % i))

    with div():
        attr(cls='body')
        p('Lorem ipsum..')

print(doc)
		
		
		</pre>
		<pre class="screen">
		
/Users/neo/PycharmProjects/netkiller/.venv/bin/python /Users/neo/PycharmProjects/netkiller/test/html.py 
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Dominate your HTML&lt;/title&gt;
    &lt;link href="style.css" rel="stylesheet"&gt;
    &lt;script src="script.js" type="text/javascript"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id="header"&gt;
      &lt;ol&gt;
        &lt;li&gt;
          &lt;a href="/home.html"&gt;Home&lt;/a&gt;
        &lt;/li&gt;
        &lt;li&gt;
          &lt;a href="/about.html"&gt;About&lt;/a&gt;
        &lt;/li&gt;
        &lt;li&gt;
          &lt;a href="/contact.html"&gt;Contact&lt;/a&gt;
        &lt;/li&gt;
      &lt;/ol&gt;
    &lt;/div&gt;
    &lt;div class="body"&gt;
      &lt;p&gt;Lorem ipsum..&lt;/p&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id984"></a>6.4.2. dominate</h3></div></div></div>
		
		<pre class="programlisting">
		
from dominate import document
d = document()
d +=h1('Hello,World!')
d.body+=p('This is a paragraph.')
print(d)		
		
		</pre>
		<pre class="screen">
		
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Dominate&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Hello,World!&lt;/h1&gt;
    &lt;p&gt;This is a paragraph.&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id985"></a>6.4.3. HTML Table</h3></div></div></div>
		
		<pre class="programlisting">
		
import dominate
from dominate.tags import *

# 创建一个 HTML 文档
doc = dominate.document(title='表格示例')

with doc.body:
    h1('数据表格 by netkiller - https://www.netkiller.cn')
    with table().add(tbody()):
        for i in range(5):
            with tr():
                for j in range(3):
                    td(f'单元格 {i},{j}')

# 打印 HTML 文档
print(doc)
		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id986"></a>6.4.4. UL/LI</h3></div></div></div>
		
		<pre class="programlisting">
		
# 创建一个 HTML 文档
doc = dominate.document(title='项目符号列表 by netkiller - https://www.netkiller.cn')
 
# 动态数据
items = ['苹果', '香蕉', '橙子']
 
with doc.body:
    h1('水果列表')
    with ul():
        for item in items:
            li(item)
 
# 打印 HTML 文档
print(doc)		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id987"></a>6.4.5. Dominate 与 Flask 集成</h3></div></div></div>
		
		<p>生成动态网页内容</p>
		<pre class="programlisting">
		
from flask import Flask
import dominate
from dominate.tags import *
 
app = Flask(__name__)
 
@app.route('/')
def index():
    doc = dominate.document(title='Flask 与 Dominate 集成 by netkiller - https://www.netkiller.cn')
 
    with doc.head:
        link(rel='stylesheet', href='/static/style.css')
 
    with doc.body:
        h1('Hello, Flask &amp; Dominate!')
        p('这是一段由 Flask 和 Dominate 生成的文本。')
 
    return str(doc)
 
if __name__ == '__main__':
    app.run(debug=True)		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id988"></a>6.4.6. 装饰器</h3></div></div></div>
		
		<pre class="programlisting">
		
@div(h2('Welcome'),cls='greeting')
... def greeting(name):
...     p('Hello %s' %name)
...     
print(greeting('Bob'))

输出:

&lt;div class="greeting"&gt;
  &lt;h2&gt;Welcome&lt;/h2&gt;
  &lt;p&gt;Hello Bob&lt;/p&gt;
&lt;/div&gt;		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id990"></a>6.4.7. HTML 标记</h3></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id989"></a>6.4.7.1. html()</h4></div></div></div>
			
			<pre class="programlisting">
			
print(html(body(h1('Hello, World!'))))			
			
			</pre>
			<p>输出</p>
			<pre class="screen">
			
&lt;html&gt;
  &lt;body&gt;
    &lt;h1&gt;hello,world&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;			
			
			</pre>
			<pre class="programlisting">
			
_html=html()
_body=_html.add(body())
header=_body.add(div(id='header'))
content=_body.add(div(id='content'))
footer=_body.add(div(id='footer'))
print(_html)			
			
			</pre>
			<pre class="screen">
			
&lt;html&gt;
  &lt;body&gt;
    &lt;div id="header"&gt;&lt;/div&gt;
    &lt;div id="content"&gt;&lt;/div&gt;
    &lt;div id="footer"&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;	
			
			</pre>
			<pre class="programlisting">
			
			</pre>
			<pre class="programlisting">
			
from dominate.tags import *
h = html()

with h.add(body()).add(div(id='content')):
    h1('Hello World!')
    p('This is my first html.')
    with table().add(tbody()):
        l=tr()
        l +=td('One')
        l.add(td('Two'))
        with l:
            td('Three')
with open('test.html','w') as f:
    f.write(h.render())			
			
			</pre>
		</div>
	</div>
</div><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="gevent.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="ch06.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="BeautifulSoup.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">第 7 章 gevent: A coroutine-based network library for Python </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 6.5. BeautifulSoup</td></tr></table></div><script xmlns="">
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-11694057-1', 'auto');
			ga('send', 'pageview');

		</script><script xmlns="" async="async">
			var _hmt = _hmt || [];
			(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
			})();
</script><script xmlns="" async="async">
			(function(){
			var bp = document.createElement('script');
			var curProtocol = window.location.protocol.split(':')[0];
			if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			}
			else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			}
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(bp, s);
			})();
</script></body></html>