<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>第 27 章 从 Java 到 Kotlin</title><link rel="stylesheet" type="text/css" href="../docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><meta name="keywords" content="Android, Google Play" /><link rel="home" href="../index.html" title="Netkiller Android 手札" /><link rel="up" href="../index.html" title="Netkiller Android 手札" /><link rel="prev" href="../ch26s10.html" title="26.10. 调试技巧，找不到哪里调用" /><link rel="next" href="kotlin.class.html" title="27.2. Class" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> | <a xmlns="" href="//netkiller.github.io/">简体中文</a> | <a xmlns="" href="http://netkiller.sourceforge.net/">繁体中文</a> | <a xmlns="" href="/journal/index.html">杂文</a>
		| <a xmlns="" href="https://github.com/netkiller">Github</a> | <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> | <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> | <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> | <a xmlns="" href="https://www.youtube.com/user/bg7nyt/videos">Youtube</a> | <a xmlns="" href="//www.netkiller.cn/home/donations.html">打赏(Donations)</a> | <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 27 章 从 Java 到 Kotlin</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="../ch26s10.html">上一页</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="kotlin.class.html">下一页</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td><td></td><td><a href="https://zhuanlan.zhihu.com/netkiller"><img src="/images/logo/zhihu-card-default.svg" height="25" /></a></td><td valign="middle"><a href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a></td><td></td><td></td><td></td><td></td></tr></table><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="index"></a>第 27 章 从 Java 到 Kotlin</h1></div></div></div><div class="toc"><p><strong>目录</strong></p><dl class="toc"><dt><span class="section"><a href="index.html#kotlin.data">27.1. 数据类型与数据结构</a></span></dt><dd><dl><dt><span class="section"><a href="index.html#kotlin.string">27.1.1. 字符串</a></span></dt><dt><span class="section"><a href="index.html#kotlin.date">27.1.2. 日期时间</a></span></dt><dt><span class="section"><a href="index.html#kotlin.array">27.1.3. 数组</a></span></dt><dt><span class="section"><a href="index.html#kotlin.list">27.1.4. List 列表</a></span></dt><dt><span class="section"><a href="index.html#kotlin.map">27.1.5. Map 图</a></span></dt><dt><span class="section"><a href="index.html#id1001">27.1.6. let</a></span></dt></dl></dd><dt><span class="section"><a href="kotlin.class.html">27.2. Class</a></span></dt><dd><dl><dt><span class="section"><a href="kotlin.class.html#id1002">27.2.1. 枚举</a></span></dt></dl></dd><dt><span class="section"><a href="kotlin.loop.html">27.3. 流程控制</a></span></dt><dd><dl><dt><span class="section"><a href="kotlin.loop.html#id1003">27.3.1. </a></span></dt><dt><span class="section"><a href="kotlin.loop.html#id1004">27.3.2. 循环</a></span></dt></dl></dd><dt><span class="section"><a href="kotlin.callback.html">27.4. Callback 回调</a></span></dt><dd><dl><dt><span class="section"><a href="kotlin.callback.html#id1005">27.4.1. Consumer</a></span></dt><dt><span class="section"><a href="kotlin.callback.html#id1006">27.4.2. callback</a></span></dt><dt><span class="section"><a href="kotlin.callback.html#id1007">27.4.3. 定义接口方式</a></span></dt></dl></dd><dt><span class="section"><a href="kotlin.ui.html">27.5. 界面操作</a></span></dt><dd><dl><dt><span class="section"><a href="kotlin.ui.html#findViewById">27.5.1. findViewById</a></span></dt><dt><span class="section"><a href="kotlin.ui.html#runOnUiThread">27.5.2. runOnUiThread</a></span></dt><dt><span class="section"><a href="kotlin.ui.html#kotlin.Fragment">27.5.3. Fragment</a></span></dt><dt><span class="section"><a href="kotlin.ui.html#kotlin">27.5.4. ImageView</a></span></dt></dl></dd><dt><span class="section"><a href="kotlin.thread.html">27.6. Thread</a></span></dt><dd><dl><dt><span class="section"><a href="kotlin.thread.html#kotlin.Handler">27.6.1. Handler</a></span></dt><dt><span class="section"><a href="kotlin.thread.html#id1009">27.6.2. </a></span></dt></dl></dd><dt><span class="section"><a href="kotlin.timer.html">27.7. 定时与延迟执行</a></span></dt><dd><dl><dt><span class="section"><a href="kotlin.timer.html#id1010">27.7.1. Timer</a></span></dt><dt><span class="section"><a href="kotlin.timer.html#id1011">27.7.2. </a></span></dt></dl></dd><dt><span class="section"><a href="MutableLiveData.html">27.8. MutableLiveData</a></span></dt><dd><dl><dt><span class="section"><a href="MutableLiveData.html#id1012">27.8.1. MutableLiveData 使用 Pair 传 key, value 两个值</a></span></dt><dt><span class="section"><a href="MutableLiveData.html#id1013">27.8.2. MutableLiveData 传自定义对象</a></span></dt></dl></dd><dt><span class="section"><a href="kotlin.Flow.html">27.9. Flow</a></span></dt><dd><dl><dt><span class="section"><a href="kotlin.Flow.html#id1014">27.9.1. MutableSharedFlow</a></span></dt></dl></dd><dt><span class="section"><a href="kotlin.Coroutine.html">27.10. 协程</a></span></dt><dd><dl><dt><span class="section"><a href="kotlin.Coroutine.html#GlobalScope">27.10.1. GlobalScope</a></span></dt><dt><span class="section"><a href="kotlin.Coroutine.html#MainScope">27.10.2. MainScope</a></span></dt><dt><span class="section"><a href="kotlin.Coroutine.html#lifecycleScope">27.10.3. lifecycleScope</a></span></dt><dt><span class="section"><a href="kotlin.Coroutine.html#id1026">27.10.4. </a></span></dt><dt><span class="section"><a href="kotlin.Coroutine.html#viewModelScope">27.10.5. viewModelScope</a></span></dt><dt><span class="section"><a href="kotlin.Coroutine.html#id1027">27.10.6. 协程上下文与继承关系</a></span></dt></dl></dd></dl></div>
	
	<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="kotlin.data"></a>27.1. 数据类型与数据结构</h2></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="kotlin.string"></a>27.1.1. 字符串</h3></div></div></div>
			
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id986"></a>27.1.1.1. 字符串转数字</h4></div></div></div>
				
				<pre class="programlisting">
				
"1".toInt()			
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="kotlin.StringBuilder"></a>27.1.1.2. StringBuilder</h4></div></div></div>
				
				<pre class="programlisting">
				
fun main() {
    val builder = StringBuilder()
    builder.append("你好")
           .append("，")
           .append("世界")
           .append("！")
    
    val message = builder.toString()
    println(message) // 输出：你好，世界！
}				
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id987"></a>27.1.1.3. </h4></div></div></div>
				
				<pre class="programlisting">
				
// 语法：字符串.split(Regex)
val str = "a,b;c d"
val parts = str.split(Regex("[,;\\s]")) // 用逗号、分号或空格拆分
println(parts) // 输出：[a, b, c, d]

// 按多个字符拆分（如逗号、分号、空格）
val text = "apple,banana;orange grape"
// 正则含义：匹配逗号、分号或空格
val regex = Regex("[,;\\s]") 
val fruits = text.split(regex)
// 结果：[apple, banana, orange, grape]	

// 按数字拆分
val str = "abc123def456ghi"
// 正则含义：匹配一个或多个数字
val parts = str.split(Regex("\\d+")) 
// 结果：[abc, def, ghi]			

// 按单词边界拆分
val sentence = "Hello!World?Kotlin"
// 正则含义：匹配非字母字符（作为分隔符）
val words = sentence.split(Regex("[^a-zA-Z]")) 
// 结果：[Hello, World, Kotlin]

// 限制拆分次数
val str = "a,b,c,d"
// 最多拆分成2部分（第二个参数为 limit）
val parts = str.split(Regex(","), 2) 
// 结果：[a, b,c,d]


// 保留空字符串（默认会过滤）
val str = "a,,b,,c"
// 加上 -1 表示不限制拆分次数，且保留空字符串
val parts = str.split(Regex(","), -1) 
// 结果：[a, , b, , c]
				
				</pre>
			</div>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="kotlin.date"></a>27.1.2. 日期时间</h3></div></div></div>
			
			<pre class="programlisting">
			
val dateFormat = SimpleDateFormat("yyyy-MM-dd HH:mm:ss")
val formattedDate = dateFormat.format(Date())			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="kotlin.array"></a>27.1.3. 数组</h3></div></div></div>
			
			<pre class="programlisting">
			
val arr = arrayOf(
    "13113668890", "111222445", "14566677",
    "20034534535", "21398989"
)			
			
			</pre>
		</div>

		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="kotlin.list"></a>27.1.4. List 列表</h3></div></div></div>
			
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id988"></a>27.1.4.1. init</h4></div></div></div>
				
				<pre class="programlisting">
				
        val PATTERN: MutableList&lt;String&gt; = object : ArrayList&lt;String&gt;() {
            init {
                add(".*(?:发言|说话)人(\\d+).*")
                add(".*(?:发言|说话)人(一|二|三|四|五|六|七|八|九|十).*")
                add(".*(?:发言|说话)人(一|二|三|四|五|六|七|八|九|十).*")
                //            add("(.*)的观点.*");
            }
        }
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id989"></a>27.1.4.2. ArrayList</h4></div></div></div>
				
				<pre class="programlisting">
				
val arrayList = ArrayList&lt;String&gt;()
arrayList.add("Java")
arrayList.add("Kotlin")
arrayList.add("Python")
println("ArrayList: $arrayList")				
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id990"></a>27.1.4.3. List.of</h4></div></div></div>
				

				<pre class="programlisting">
				
listOf("debug", "dev").contains(BuildConfig.BUILD_TYPE)			
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id991"></a>27.1.4.4. 列表转数组</h4></div></div></div>
				
				<pre class="programlisting">
				
val contact =
            mapOf(
                "BG7NYT" to "177",
                "BG7NEG" to "172",
                "BG7JWV" to "179",
                "BI7XYS" to "190",
                "BD7KBF" to "4612194"
            )

contact.values.toTypedArray()
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id992"></a>27.1.4.5. MutableList 可变列表集合</h4></div></div></div>
				
				<pre class="programlisting">
				
   // 创建可变列表集合
    var mutableList = mutableListOf("Tom", "Jerry")
    // 添加元素
    mutableList.add("Jack")
    // 删除元素
    mutableList.remove("Tom")
    println(mutableList)

    // 将 可变列表集合 转为 只读列表集合
    val list: List&lt;String&gt; = mutableList.toList()
    // 将 只读列表集合 转为 可变列表集合
    val mutable: MutableList&lt;String&gt; = list.toMutableList()				
				
				</pre>
				<p>筛选并删除元素</p>
				<pre class="programlisting">
				
fun main() {
    // 创建可变列表集合
    val mutableList = mutableListOf("Tom", "Jerry")
    // 通过 Lambda 表达式筛选要操作的元素
    // 删除包含 字母 T 的元素
    mutableList.removeIf {
        it.contains("T")
    }
    println(mutableList)
}

				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id993"></a>27.1.4.6. forEach</h4></div></div></div>
				
				<pre class="programlisting">
				
var content = meetingDao.findByTaskId(meetingData.taskId).forEach { (id, taskId, time, speaker, sentence) -&gt;
                Log.d(TAG, sentence)
            }				
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id994"></a>27.1.4.7. 列表拼接字符串</h4></div></div></div>
				
				<pre class="programlisting">
				
var content = meetingDao.findByTaskId("5b4a5bd92da847d292ed74ae696a7ca1").map({ "${it.time} 发言人${it.speaker} ${it.sentence}" }).joinToString(separator = "\n")
Log.d(TAG, content)				
				
				</pre>
			</div>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="kotlin.map"></a>27.1.5. Map 图</h3></div></div></div>
			
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id995"></a>27.1.5.1. init</h4></div></div></div>
				
				<pre class="programlisting">
				
        val digit: MutableMap&lt;String?, String?&gt; = object : HashMap&lt;String?, String?&gt;() {
            init {
                put("一", "1")
                put("二", "2")
                put("三", "3")
                put("四", "4")
                put("五", "5")
                put("六", "6")
                put("七", "7")
                put("八", "8")
                put("九", "9")
                put("十", "10")
                put("零", "0")
            }
        }				
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id996"></a>27.1.5.2. 添加元素</h4></div></div></div>
				
				<pre class="programlisting">
				
// 方式1：显式指定泛型类型
val emptyMutableMap: MutableMap&lt;String, Int&gt; = mutableMapOf()

// 方式2：使用 HashMap 构造函数（Java 兼容方式）
val emptyHashMap = HashMap&lt;String, Int&gt;()

// 可变空 Map 的使用示例
fun main() {
    // 向可变空 Map 中添加元素
    emptyMutableMap["one"] = 1
    emptyMutableMap["two"] = 2
    
    emptyHashMap["three"] = 3
    
    println(emptyMutableMap) // 输出：{one=1, two=2}
    println(emptyHashMap)    // 输出：{three=3}
}
				
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id997"></a>27.1.5.3. Map.of</h4></div></div></div>
				
				<pre class="programlisting">
				
 mapOf("content" to "hello world")
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id998"></a>27.1.5.4. mutableMapOf()</h4></div></div></div>
				
				<pre class="programlisting">
				
fun main() {
    // 创建并初始化可变 Map
    val mutableMap = mutableMapOf(
        "name" to "Alice",
        "age" to 25,
        "city" to "Beijing"
    )

    // 1. 添加键值对（若键已存在则覆盖）
    mutableMap["gender"] = "Female" // 用 [] 运算符
    mutableMap.put("job", "Engineer") // 用 put() 方法
    println("添加后: $mutableMap")

    // 2. 修改值
    mutableMap["age"] = 26 // 直接赋值覆盖
    mutableMap.replace("city", "Shanghai") // 用 replace() 方法
    println("修改后: $mutableMap")

    // 3. 删除键值对
    mutableMap.remove("job") // 按键删除
    println("删除后: $mutableMap")

    // 4. 清空 Map
    // mutableMap.clear()

    // 5. 检查是否包含键/值
    val hasName = mutableMap.containsKey("name")
    val hasAge30 = mutableMap.containsValue(30)
    println("包含 name 键: $hasName，包含 30 值: $hasAge30")

    // 6. 遍历 Map
    println("\n遍历键值对：")
    for ((key, value) in mutableMap) {
        println("$key: $value")
    }

    // 7. 转换为不可变 Map
    val immutableMap: Map&lt;String, Any&gt; = mutableMap.toMap()
}
				
				
				</pre>
			</div>
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id999"></a>27.1.5.5. 反转 Map 的 key 与 value</h4></div></div></div>
				
				<pre class="programlisting">
				
 val originalMap = mapOf("a" to 1, "b" to 2, "c" to 2)

// 反转键值对（注意：如果值有重复，会导致键冲突，后面的键会覆盖前面的）
val reversedMap = originalMap.associateBy({ it.value }, { it.key })

println(reversedMap) // 输出: {1=a, 2=c}（值2对应的原键"b"被覆盖）
				
				</pre>
				<pre class="programlisting">
				
ConcurrentHashMap&lt;String, String&gt; speakers = new ConcurrentHashMap&lt;&gt;();
        speakers.put("1", "发言人一");
        speakers.put("2", "市场部小周");
        speakers.put("4", "陈先生");
        speakers.put("5", "齐天大圣");
        speakers.put("6", "一品轩小飞");
        speakers.put("7", "年年富");
        speakers.put("8", "李总");		
val invertedMap: Map&lt;String, String&gt; = speakers.entries.associateBy({ it.value as String }, { it.key as String })				
				
				</pre>
			</div>
		</div>
		<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1001"></a>27.1.6. let</h3></div></div></div>
			
			<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id1000"></a>27.1.6.1. Boolean</h4></div></div></div>
				
				<pre class="programlisting">
				
val isSuccess = true

// 对布尔值使用 let
val result = isSuccess.let { success -&gt;
    // success 等价于 isSuccess（it 也可以）
    if (success) {
        "操作成功"
    } else {
        "操作失败"
    }
}

println(result)  // 输出：操作成功				
				
				</pre>
				<p>处理 null</p>
				<pre class="programlisting">
				
val flag: Boolean? = null
flag?.let {  // 安全调用，flag 为 null 时不执行
    println("flag is $it")
}				
				
				</pre>
			</div>
		</div>
	</div>
	
	
	

	
	
	
	
	
	

</div><div xmlns="" id="SOHUCS"></div><script xmlns="" charset="utf-8" type="text/javascript" src="https://cy-cdn.kuaizhan.com/upload/changyan.js"></script><script xmlns="" type="text/javascript">
			window.changyan.api.config({
			appid: 'cyvwjQUG3',
			conf: 'prod_ef966242df3d8b5acb1e0ee9fc01cafe'
			});
</script><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="../ch26s10.html">上一页</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="kotlin.class.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">26.10. 调试技巧，找不到哪里调用 </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 27.2. Class</td></tr></table></div><script xmlns="">
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-11694057-1', 'auto');
			ga('send', 'pageview');

		</script><script xmlns="" async="async">
			var _hmt = _hmt || [];
			(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
			})();
</script><script xmlns="" async="async">
			(function(){
			var bp = document.createElement('script');
			var curProtocol = window.location.protocol.split(':')[0];
			if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			}
			else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			}
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(bp, s);
			})();
</script></body></html>