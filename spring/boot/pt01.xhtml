<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>部分 I. Spring Boot</title><link rel="stylesheet" type="text/css" href="../docbook.css"/><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"/><meta name="keywords" content="Spring, Spring Boot, Spring Cloud, Spring Eureka, Spring Config"/><link rel="prev" href="../pr01s05.xhtml" title="联系方式"/><link rel="next" href="ch01.xhtml" title="第 1 章 Spring Boot Quick start"/></head><body><header><div class="navheader"><table style="width: 100%; "><tr><th style="text-align: center; " colspan="3">部分 I. Spring Boot</th></tr><tr><td style="width: 20%; text-align: left; "><a accesskey="p" href="../pr01s05.xhtml">上一页</a> </td><th style="width: 60%; text-align: center; "> </th><td style="width: 20%; text-align: right; "> <a accesskey="n" href="ch01.xhtml">下一页</a></td></tr></table><hr/></div></header><div class="part" id="index"><div class="titlepage"><div><div><h1 class="title">部分 I. Spring Boot</h1></div></div></div><div class="toc"><div class="toc-title">目录</div><ul class="toc"><li><span class="chapter"><a href="ch01.xhtml">1. Spring Boot Quick start</a></span><ul><li><span class="section"><a href="ch01.xhtml#id770">创建项目</a></span></li><li><span class="section"><a href="ch01s02.xhtml">pom.xml</a></span></li><li><span class="section"><a href="ch01s03.xhtml">Controller</a></span></li><li><span class="section"><a href="ch01s04.xhtml">Springboot with Maven</a></span><ul><li><span class="section"><a href="ch01s04.xhtml#id771">resource</a></span></li><li><span class="section"><a href="ch01s04.xhtml#id772">Maven run</a></span></li><li><span class="section"><a href="ch01s04.xhtml#id773">Spring Boot maven 插件 build-image</a></span></li><li><span class="section"><a href="ch01s04.xhtml#id774">生成项目信息</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch02.xhtml">2. Spring 开发环境</a></span><ul><li><span class="section"><a href="ch02.xhtml#id775">Java 开发环境</a></span></li><li><span class="section"><a href="ch02s02.xhtml">安装 Spring Tool Suite</a></span></li><li><span class="section"><a href="ch02s03.xhtml">Dashboard</a></span></li><li><span class="section"><a href="ch02s04.xhtml">Spring Initializr - Bootstrap your application</a></span></li></ul></li><li><span class="chapter"><a href="ch03.xhtml">3. SpringApplication</a></span><ul><li><span class="section"><a href="ch03.xhtml#spring.run">运行 Spring boot 项目</a></span><ul><li><span class="section"><a href="ch03.xhtml#id776">Linux systemd</a></span></li><li><span class="section"><a href="ch03.xhtml#id777">传统 init.d 脚本</a></span></li><li><span class="section"><a href="ch03.xhtml#war">编译用于Tomcat的 War</a></span></li></ul></li><li><span class="section"><a href="ch03s02.xhtml">@SpringBootApplication</a></span><ul><li><span class="section"><a href="ch03s02.xhtml#id778">排除 @EnableAutoConfiguration 加载项</a></span></li></ul></li><li><span class="section"><a href="ch03s03.xhtml">获取 Resources 目录中的静态文件</a></span></li><li><span class="section"><a href="ch03s04.xhtml">@EnableAutoConfiguration</a></span></li><li><span class="section"><a href="ch03s05.xhtml">@ComponentScan</a></span></li><li><span class="section"><a href="ch03s06.xhtml">@EntityScan 实体扫描</a></span></li><li><span class="section"><a href="ch03s07.xhtml">@EnableJpaRepositories</a></span></li><li><span class="section"><a href="ch03s08.xhtml">启动和销毁</a></span></li><li><span class="section"><a href="ch03s09.xhtml">打印环境变量</a></span></li><li><span class="section"><a href="ch03s10.xhtml">CharacterEncodingFilter</a></span></li><li><span class="section"><a href="ch03s11.xhtml">隐藏 Banner</a></span></li><li><span class="section"><a href="ch03s12.xhtml">实体与仓库扫描</a></span></li><li><span class="section"><a href="ch03s13.xhtml">列出 Beans</a></span></li><li><span class="section"><a href="ch03s14.xhtml">Tomcat 端口</a></span></li><li><span class="section"><a href="ch03s15.xhtml">配置项设定</a></span></li><li><span class="section"><a href="ch03s16.xhtml">spring.profiles.active</a></span></li><li><span class="section"><a href="ch03s17.xhtml">@Profile("dev") / @ActiveProfiles("dev")</a></span></li><li><span class="section"><a href="ch03s18.xhtml">设置默认时区</a></span></li></ul></li><li><span class="chapter"><a href="ch04.xhtml">4. 如何优雅停止 Springboot 运行</a></span><ul><li><span class="section"><a href="ch04.xhtml#id779">准备工作</a></span></li><li><span class="section"><a href="ch04s02.xhtml">kill 命令演示</a></span></li><li><span class="section"><a href="ch04s03.xhtml">容器中如何优雅关闭 Springboot</a></span></li><li><span class="section"><a href="ch04s04.xhtml">写入PID文件</a></span></li></ul></li><li><span class="chapter"><a href="properties/ch05.xhtml">5. Properties 配置文件</a></span><ul><li><span class="section"><a href="properties/ch05.xhtml#application.properties">application.properties 配置文件</a></span><ul><li><span class="section"><a href="properties/ch05.xhtml#faq.application.properties">application.properties 参考</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#spring.config.location">启动指定参数</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#spring.autoconfigure.exclude">加载排除</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#spring.pid">PID FILE</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#spring.main.banner-mode">banner 关闭</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#server">server</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#logging">logging</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#server.tomcat">内嵌 tomcat server</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#spring.servlet">servlet</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#spring.jackson">JSON 输出与日期格式化</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#mail">SMTP 相关配置</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#redis">Redis</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#mongodb">MongoDB</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#mysql">MySQL</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#oracle">Oracle</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#default_schema">default_schema</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#datasource">datasource</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#velocity">velocity</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#security">Security 相关配置</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#mvc">MVC 配置</a></span></li><li><span class="section"><a href="properties/ch05.xhtml#kafka">Kafka 相关配置</a></span></li></ul></li><li><span class="section"><a href="properties/ch05s02.xhtml">Properties 文件</a></span><ul><li><span class="section"><a href="properties/ch05s02.xhtml#@Value">@Value 注解</a></span></li><li><span class="section"><a href="properties/ch05s02.xhtml#ConfigurationProperties">@EnableConfigurationProperties 引用自定义 *.properties 配置文件</a></span></li><li><span class="section"><a href="properties/ch05s02.xhtml#@PropertySource">@PropertySource 注解载入 properties 文件</a></span></li></ul></li><li><span class="section"><a href="properties/ch05s03.xhtml">Environment 读取配置文件</a></span></li><li><span class="section"><a href="properties/ch05s04.xhtml">手工载入 *.properties 文件</a></span></li><li><span class="section"><a href="properties/ch05s05.xhtml">命令行注入配置项</a></span><ul><li><span class="section"><a href="properties/ch05s05.xhtml#spring.profiles.active">spring.profiles.active 参数切换配置文件</a></span></li><li><span class="section"><a href="properties/ch05s05.xhtml#id783">SpringApplicationBuilder.properties() 方法添加配置项</a></span></li><li><span class="section"><a href="properties/ch05s05.xhtml#setAddCommandLineProperties">禁用命令行注入环境变量</a></span></li></ul></li><li><span class="section"><a href="properties/ch05s06.xhtml"/></span></li><li><span class="section"><a href="properties/ch05s07.xhtml">PropertyResolver 获取配置</a></span></li><li><span class="section"><a href="properties/ch05s08.xhtml">参数引用</a></span></li><li><span class="section"><a href="properties/ch05s09.xhtml">默认值</a></span></li><li><span class="section"><a href="properties/ch05s10.xhtml">产生随机数</a></span><ul><li><span class="section"><a href="properties/ch05s10.xhtml#id784">随机数</a></span></li></ul></li><li><span class="section"><a href="properties/ch05s11.xhtml">多行字符串</a></span></li><li><span class="section"><a href="properties/ch05s12.xhtml">注入多值属性 arrays, list, set</a></span></li><li><span class="section"><a href="properties/ch05s13.xhtml">List 列表类型</a></span></li><li><span class="section"><a href="properties/ch05s14.xhtml">Map类型</a></span></li><li><span class="section"><a href="properties/ch05s15.xhtml">Binder</a></span></li><li><span class="section"><a href="properties/ch05s16.xhtml">加密 application.properties 中的敏感内容</a></span></li></ul></li><li><span class="chapter"><a href="ch06.xhtml">6. Spring boot with Logging</a></span><ul><li><span class="section"><a href="ch06.xhtml#application.properties.logging">配置日志文件</a></span><ul><li><span class="section"><a href="ch06.xhtml#id785">日志输出级别</a></span></li><li><span class="section"><a href="ch06.xhtml#id786">Spring boot 2.1 以后的版本不打印 Mapped 日志问题</a></span></li><li><span class="section"><a href="ch06.xhtml#id787">禁止控制台输出日志</a></span></li><li><span class="section"><a href="ch06.xhtml#id788">定制日志格式</a></span></li><li><span class="section"><a href="ch06.xhtml#id789">彩色输出</a></span></li></ul></li><li><span class="section"><a href="ch06s02.xhtml">打印日志</a></span><ul><li><span class="section"><a href="ch06s02.xhtml#id790">lombok</a></span></li></ul></li><li><span class="section"><a href="ch06s03.xhtml">logback 配置详解</a></span><ul><li><span class="section"><a href="ch06s03.xhtml#logback.stdout">标准输出</a></span></li><li><span class="section"><a href="ch06s03.xhtml#id791">禁止 logback 日志输出</a></span></li><li><span class="section"><a href="ch06s03.xhtml#logback.level">指定Class过滤日志</a></span></li><li><span class="section"><a href="ch06s03.xhtml#logback.attr">configuration 属性配置</a></span></li><li><span class="section"><a href="ch06s03.xhtml#logback.contextName">contextName 设置上下文名称</a></span></li><li><span class="section"><a href="ch06s03.xhtml#logback.property">property 设置变量</a></span></li><li><span class="section"><a href="ch06s03.xhtml#logback.encoder">encoder 日志格式设置</a></span></li><li><span class="section"><a href="ch06s03.xhtml#RollingFileAppender">RollingFileAppender</a></span></li><li><span class="section"><a href="ch06s03.xhtml#id794">日志过滤</a></span></li><li><span class="section"><a href="ch06s03.xhtml#logback.file">标准输出</a></span></li><li><span class="section"><a href="ch06s03.xhtml#id795">MDC</a></span></li><li><span class="section"><a href="ch06s03.xhtml#logback.mongodb">日志写入 MongoDB</a></span></li><li><span class="section"><a href="ch06s03.xhtml#logback.logstash">日志发送给 logstash</a></span></li><li><span class="section"><a href="ch06s03.xhtml#springboot.fluentd">fluentd</a></span></li><li><span class="section"><a href="ch06s03.xhtml#Loki4j">Loki4j Logback</a></span></li></ul></li><li><span class="section"><a href="ch06s04.xhtml">Log4j2 + Gelf + Logstash</a></span><ul><li><span class="section"><a href="ch06s04.xhtml#id808">Maven 配置</a></span></li><li><span class="section"><a href="ch06s04.xhtml#id809">log4j2.xml 配置</a></span></li><li><span class="section"><a href="ch06s04.xhtml#id810">Java 测试代码</a></span></li><li><span class="section"><a href="ch06s04.xhtml#id811">Logstash 配置</a></span></li><li><span class="section"><a href="ch06s04.xhtml#id812">测试结果</a></span></li><li><span class="section"><a href="ch06s04.xhtml#id820">Log4j2 更多技巧</a></span></li></ul></li><li><span class="section"><a href="ch06s05.xhtml">日志报警</a></span><ul><li><span class="section"><a href="ch06s05.xhtml#id821">Logstash 配置</a></span></li><li><span class="section"><a href="ch06s05.xhtml#id822">监控 SpringBootApplication 的启动和退出</a></span></li></ul></li><li><span class="section"><a href="ch06s06.xhtml">Spring boot with ELK(Elasticsearch + Logstash + Kibana)</a></span><ul><li><span class="section"><a href="ch06s06.xhtml#id823">TCP 方案</a></span></li><li><span class="section"><a href="ch06s06.xhtml#id824">Redis 方案</a></span></li><li><span class="section"><a href="ch06s06.xhtml#id825">Kafka 方案</a></span></li><li><span class="section"><a href="ch06s06.xhtml#id826">Other</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch07.xhtml">7. Spring boot with Undertow</a></span><ul><li><span class="section"><a href="ch07.xhtml#id827">Maven 依赖</a></span></li><li><span class="section"><a href="ch07s02.xhtml">Application</a></span></li><li><span class="section"><a href="ch07s03.xhtml">相关配置</a></span></li></ul></li><li><span class="chapter"><a href="ch08.xhtml">8. Spring boot with Jetty</a></span></li><li><span class="chapter"><a href="https/ch09.xhtml">9. Spring boot with HTTP2 SSL</a></span><ul><li><span class="section"><a href="https/ch09.xhtml#id828">生成自签名证书</a></span></li><li><span class="section"><a href="https/ch09s02.xhtml">application.properties 配置文件</a></span></li><li><span class="section"><a href="https/ch09s03.xhtml">启动 Spring boot</a></span></li><li><span class="section"><a href="https/ch09s04.xhtml">restTemplate 调用实例</a></span></li><li><span class="section"><a href="https/ch09s05.xhtml">HTTP2</a></span></li></ul></li><li><span class="chapter"><a href="mongodb/ch10.xhtml">10. Spring boot with MongoDB</a></span><ul><li><span class="section"><a href="mongodb/ch10.xhtml#id829">Maven</a></span></li><li><span class="section"><a href="mongodb/ch10s02.xhtml">Application</a></span></li><li><span class="section"><a href="mongodb/ch10s03.xhtml">MongoTemplate</a></span></li><li><span class="section"><a href="mongodb/ch10s04.xhtml">Repository</a></span></li></ul></li><li><span class="chapter"><a href="mysql/ch11.xhtml">11. Spring boot with MySQL</a></span><ul><li><span class="section"><a href="mysql/ch11.xhtml#id830">Maven</a></span></li><li><span class="section"><a href="mysql/ch11s02.xhtml">Resource</a></span></li><li><span class="section"><a href="mysql/ch11s03.xhtml">Application</a></span></li><li><span class="section"><a href="mysql/ch11s04.xhtml">JdbcTemplate</a></span></li><li><span class="section"><a href="mysql/ch11s05.xhtml">CrudRepository</a></span></li></ul></li><li><span class="chapter"><a href="oracle/ch12.xhtml">12. Spring boot with Oracle</a></span><ul><li><span class="section"><a href="oracle/ch12.xhtml#id831">Maven</a></span></li><li><span class="section"><a href="oracle/ch12s02.xhtml">application.properties</a></span></li><li><span class="section"><a href="oracle/ch12s03.xhtml">Application</a></span></li><li><span class="section"><a href="oracle/ch12s04.xhtml">CrudRepository</a></span></li><li><span class="section"><a href="oracle/ch12s05.xhtml">JdbcTemplate</a></span></li><li><span class="section"><a href="oracle/ch12s06.xhtml">Controller</a></span></li></ul></li><li><span class="chapter"><a href="postgresql/ch13.xhtml">13. Spring boot with PostgreSQL</a></span><ul><li><span class="section"><a href="postgresql/ch13.xhtml#id832">pom.xml</a></span></li><li><span class="section"><a href="postgresql/ch13s02.xhtml">application.properties</a></span></li><li><span class="section"><a href="postgresql/ch13s03.xhtml">Application</a></span></li><li><span class="section"><a href="postgresql/ch13s04.xhtml">CrudRepository</a></span></li><li><span class="section"><a href="postgresql/ch13s05.xhtml">JdbcTemplate</a></span></li><li><span class="section"><a href="postgresql/ch13s06.xhtml">Controller</a></span></li><li><span class="section"><a href="postgresql/ch13s07.xhtml">Test</a></span></li></ul></li><li><span class="chapter"><a href="elasticsearch/ch14.xhtml">14. Spring boot with Elasticsearch</a></span><ul><li><span class="section"><a href="elasticsearch/ch14.xhtml#id833">Maven</a></span></li><li><span class="section"><a href="elasticsearch/ch14s02.xhtml">Application</a></span></li><li><span class="section"><a href="elasticsearch/ch14s03.xhtml">application.properties</a></span></li><li><span class="section"><a href="elasticsearch/ch14s04.xhtml">Domain</a></span></li><li><span class="section"><a href="elasticsearch/ch14s05.xhtml">ElasticsearchRepository</a></span></li></ul></li><li><span class="chapter"><a href="elasticsearch/5.x/ch15.xhtml">15. Spring boot with Elasticsearch TransportClient</a></span><ul><li><span class="section"><a href="elasticsearch/5.x/ch15.xhtml#id834">Maven</a></span></li><li><span class="section"><a href="elasticsearch/5.x/ch15s02.xhtml">Application</a></span></li><li><span class="section"><a href="elasticsearch/5.x/ch15s03.xhtml">application.properties</a></span></li><li><span class="section"><a href="elasticsearch/5.x/ch15s04.xhtml">ElasticsearchConfiguration</a></span></li><li><span class="section"><a href="elasticsearch/5.x/ch15s05.xhtml">RestController</a></span></li></ul></li><li><span class="chapter"><a href="hive/ch16.xhtml">16. Spring boot with Apache Hive</a></span><ul><li><span class="section"><a href="hive/ch16.xhtml#id835">Maven</a></span></li><li><span class="section"><a href="hive/ch16s02.xhtml">application.properties</a></span></li><li><span class="section"><a href="hive/ch16s03.xhtml">Configuration</a></span></li><li><span class="section"><a href="hive/ch16s04.xhtml">CURD 操作实例</a></span></li></ul></li><li><span class="chapter"><a href="phoenix/ch17.xhtml">17. Spring boot with Phoenix</a></span><ul><li><span class="section"><a href="phoenix/ch17.xhtml#id836">Maven</a></span></li><li><span class="section"><a href="phoenix/ch17s02.xhtml">application.properties</a></span></li><li><span class="section"><a href="phoenix/ch17s03.xhtml">Configuration</a></span></li></ul></li><li><span class="chapter"><a href="datasource/ch18.xhtml">18. Spring boot with Datasource</a></span><ul><li><span class="section"><a href="datasource/ch18.xhtml#id840">Master / Slave 主从数据库数据源配置</a></span><ul><li><span class="section"><a href="datasource/ch18.xhtml#id837">application.properties</a></span></li><li><span class="section"><a href="datasource/ch18.xhtml#id838">配置主从数据源</a></span></li><li><span class="section"><a href="datasource/ch18.xhtml#id839">选择数据源</a></span></li></ul></li><li><span class="section"><a href="datasource/ch18s02.xhtml">多数据源配置</a></span></li><li><span class="section"><a href="datasource/ch18s03.xhtml">JPA 多数据源</a></span></li></ul></li><li><span class="chapter"><a href="pool/ch19.xhtml">19. 连接池配置</a></span><ul><li><span class="section"><a href="pool/ch19.xhtml#tomcat">org.apache.tomcat.jdbc.pool.DataSource</a></span></li><li><span class="section"><a href="pool/ch19s02.xhtml">druid</a></span><ul><li><span class="section"><a href="pool/ch19s02.xhtml#id841">加密数据库密码</a></span></li></ul></li><li><span class="section"><a href="pool/ch19s03.xhtml">c3p0 - JDBC3 Connection and Statement Pooling</a></span></li><li><span class="section"><a href="pool/ch19s04.xhtml">dbcp2</a></span></li><li><span class="section"><a href="pool/ch19s05.xhtml">bonecp</a></span></li><li><span class="section"><a href="pool/ch19s06.xhtml">HikariPool</a></span></li></ul></li><li><span class="chapter"><a href="queue/ch20.xhtml">20. Spring boot with Queue</a></span><ul><li><span class="section"><a href="queue/ch20.xhtml#rabbitmq">Spring boot with RabbitMQ(AMQP)</a></span><ul><li><span class="section"><a href="queue/ch20.xhtml#id842">maven</a></span></li><li><span class="section"><a href="queue/ch20.xhtml#id843">RabbitMQConfig</a></span></li><li><span class="section"><a href="queue/ch20.xhtml#id844">生产者</a></span></li><li><span class="section"><a href="queue/ch20.xhtml#id845">消费者</a></span></li></ul></li><li><span class="section"><a href="queue/ch20s02.xhtml">Spring boot with Apache Kafka</a></span><ul><li><span class="section"><a href="queue/ch20s02.xhtml#id846">安装 kafka</a></span></li><li><span class="section"><a href="queue/ch20s02.xhtml#maven">maven</a></span></li><li><span class="section"><a href="queue/ch20s02.xhtml#application">Spring boot Application</a></span></li><li><span class="section"><a href="queue/ch20s02.xhtml#EnableKafka">EnableKafka</a></span></li><li><span class="section"><a href="queue/ch20s02.xhtml#KafkaListener">KafkaListener</a></span></li><li><span class="section"><a href="queue/ch20s02.xhtml#spring.boot.kafka.test">测试</a></span></li><li><span class="section"><a href="queue/ch20s02.xhtml#spring.boot.kafka.example">完整的发布订阅实例</a></span></li><li><span class="section"><a href="queue/ch20s02.xhtml#spring.cloud.kafka">Spring cloud with Kafka</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="scheduling/ch21.xhtml">21. Spring boot with Scheduling</a></span><ul><li><span class="section"><a href="scheduling/ch21.xhtml#id847">Application.java</a></span></li><li><span class="section"><a href="scheduling/ch21s02.xhtml">配置</a></span></li><li><span class="section"><a href="scheduling/ch21s03.xhtml">Component</a></span></li><li><span class="section"><a href="scheduling/ch21s04.xhtml">查看日志</a></span></li><li><span class="section"><a href="scheduling/ch21s05.xhtml">计划任务控制开关</a></span></li><li><span class="section"><a href="scheduling/ch21s06.xhtml">@Scheduled 详解</a></span><ul><li><span class="section"><a href="scheduling/ch21s06.xhtml#id848">每3秒钟一运行一次</a></span></li><li><span class="section"><a href="scheduling/ch21s06.xhtml#id849">凌晨23点运行</a></span></li></ul></li><li><span class="section"><a href="scheduling/ch21s07.xhtml">Timer 例子</a></span></li><li><span class="section"><a href="scheduling/ch21s08.xhtml">ScheduledExecutorService 例子</a></span></li></ul></li><li><span class="chapter"><a href="swagger/ch22.xhtml">22. Spring boot with Swagger</a></span><ul><li><span class="section"><a href="swagger/ch22.xhtml#id850">Swagger3</a></span></li><li><span class="section"><a href="swagger/ch22s02.xhtml">Swagger2</a></span><ul><li><span class="section"><a href="swagger/ch22s02.xhtml#id851">Maven 文件</a></span></li><li><span class="section"><a href="swagger/ch22s02.xhtml#id852">SpringApplication</a></span></li><li><span class="section"><a href="swagger/ch22s02.xhtml#id853">EnableSwagger2</a></span></li><li><span class="section"><a href="swagger/ch22s02.xhtml#id854">RestController</a></span></li></ul></li><li><span class="section"><a href="swagger/ch22s03.xhtml">@Api()</a></span></li><li><span class="section"><a href="swagger/ch22s04.xhtml">@ApiOperation()</a></span></li><li><span class="section"><a href="swagger/ch22s05.xhtml">@ApiResponses</a></span></li><li><span class="section"><a href="swagger/ch22s06.xhtml">@ApiModel 实体类</a></span></li><li><span class="section"><a href="swagger/ch22s07.xhtml">Spring boot with knife4j</a></span><ul><li><span class="section"><a href="swagger/ch22s07.xhtml#id855">maven</a></span></li><li><span class="section"><a href="swagger/ch22s07.xhtml#id856">Knife4jConfiguration</a></span></li><li><span class="section"><a href="swagger/ch22s07.xhtml#id857">application.properties</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch23.xhtml">23. Spring boot with lombok</a></span><ul><li><span class="section"><a href="ch23.xhtml#id858">@Builder</a></span></li><li><span class="section"><a href="ch23s02.xhtml">@Slf4j 注解</a></span></li></ul></li><li><span class="chapter"><a href="docker/ch24.xhtml">24. Spring boot with Container</a></span><ul><li><span class="section"><a href="docker/ch24.xhtml#springboot.docker">Spring boot with Docker</a></span><ul><li><span class="section"><a href="docker/ch24.xhtml#id864">通过 Docker 命令构建镜像</a></span></li><li><span class="section"><a href="docker/ch24.xhtml#id869">通过 Maven 构建 Docker 镜像</a></span></li><li><span class="section"><a href="docker/ch24.xhtml#id870">[ERROR] No plugin found for prefix 'dockerfile' in the current project and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] available from the repositories [local (/Users/neo/.m2/repository), central (https://repo.maven.apache.org/maven2)] -&gt; [Help 1]</a></span></li><li><span class="section"><a href="docker/ch24.xhtml#id871">curl: (35) LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to localhost:8888</a></span></li></ul></li><li><span class="section"><a href="docker/ch24s02.xhtml">Spring boot with Docker stack</a></span><ul><li><span class="section"><a href="docker/ch24s02.xhtml#id872">编译 Docker 镜像</a></span></li><li><span class="section"><a href="docker/ch24s02.xhtml#id873"/></span></li></ul></li><li><span class="section"><a href="docker/ch24s03.xhtml">Spring boot with Kubernetes</a></span><ul><li><span class="section"><a href="docker/ch24s03.xhtml#id874">Kubernetes 编排脚本</a></span></li><li><span class="section"><a href="docker/ch24s03.xhtml#id875">部署镜像</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch25.xhtml">25. Spring boot with command line</a></span><ul><li><span class="section"><a href="ch25.xhtml#id876">Maven</a></span></li><li><span class="section"><a href="ch25s02.xhtml">CommandLineRunner 例子</a></span></li><li><span class="section"><a href="ch25s03.xhtml">ApplicationRunner 例子</a></span></li></ul></li><li><span class="chapter"><a href="actuator/ch26.xhtml">26. Spring Boot Actuator</a></span><ul><li><span class="section"><a href="actuator/ch26.xhtml#id877">Maven 依赖</a></span></li><li><span class="section"><a href="actuator/ch26s02.xhtml">与 Spring Boot Actuator 有关的配置</a></span><ul><li><span class="section"><a href="actuator/ch26s02.xhtml#id878">禁用HTTP端点</a></span></li><li><span class="section"><a href="actuator/ch26s02.xhtml#id879">安全配置</a></span></li><li><span class="section"><a href="actuator/ch26s02.xhtml#actuator.path">修改 actuator 地址</a></span></li><li><span class="section"><a href="actuator/ch26s02.xhtml#id880">关机</a></span></li></ul></li><li><span class="section"><a href="actuator/ch26s03.xhtml">actuator 接口</a></span></li><li><span class="section"><a href="actuator/ch26s04.xhtml">健康状态</a></span><ul><li><span class="section"><a href="actuator/ch26s04.xhtml#id881">健康状态</a></span></li></ul></li><li><span class="section"><a href="actuator/ch26s05.xhtml">info 配置信息</a></span></li><li><span class="section"><a href="actuator/ch26s06.xhtml">beans 信息</a></span></li><li><span class="section"><a href="actuator/ch26s07.xhtml">caches</a></span></li><li><span class="section"><a href="actuator/ch26s08.xhtml">conditions</a></span></li><li><span class="section"><a href="actuator/ch26s09.xhtml">configprops 配置文件</a></span></li><li><span class="section"><a href="actuator/ch26s10.xhtml">env 环境变量</a></span></li><li><span class="section"><a href="actuator/ch26s11.xhtml">logfile 日志</a></span></li><li><span class="section"><a href="actuator/ch26s12.xhtml">threaddump 线程信息</a></span></li><li><span class="section"><a href="actuator/ch26s13.xhtml">计划任务</a></span></li><li><span class="section"><a href="actuator/ch26s14.xhtml">metrics</a></span></li><li><span class="section"><a href="actuator/ch26s15.xhtml">控制器映射 URL</a></span></li><li><span class="section"><a href="actuator/ch26s16.xhtml">自定义监控指标</a></span></li></ul></li><li><span class="chapter"><a href="test/ch27.xhtml">27. SpringBootTest</a></span><ul><li><span class="section"><a href="test/ch27.xhtml#springboot.test.maven">Maven 依赖</a></span></li><li><span class="section"><a href="test/ch27s02.xhtml">测试类</a></span><ul><li><span class="section"><a href="test/ch27s02.xhtml#spring.boot.test">Junit基本注解介绍</a></span></li></ul></li><li><span class="section"><a href="test/ch27s03.xhtml"/></span><ul><li><span class="section"><a href="test/ch27s03.xhtml#Assert.assertEquals">Assert.assertEquals 判断相等</a></span></li><li><span class="section"><a href="test/ch27s03.xhtml#Assert.assertTrue">Assert.assertTrue</a></span></li></ul></li><li><span class="section"><a href="test/ch27s04.xhtml">JPA 测试</a></span></li><li><span class="section"><a href="test/ch27s05.xhtml">TestRestTemplate</a></span></li><li><span class="section"><a href="test/ch27s06.xhtml">Controller单元测试</a></span></li><li><span class="section"><a href="test/ch27s07.xhtml">WebTestClient</a></span></li></ul></li><li><span class="chapter"><a href="ch28.xhtml">28. Spring boot with Aop</a></span><ul><li><span class="section"><a href="ch28.xhtml#Aspect">Aspect</a></span><ul><li><span class="section"><a href="ch28.xhtml#id882">Maven</a></span></li><li><span class="section"><a href="ch28.xhtml#id883">Pojo 类</a></span></li><li><span class="section"><a href="ch28.xhtml#id884">Service 类</a></span></li><li><span class="section"><a href="ch28.xhtml#id885">Aspect 类</a></span></li><li><span class="section"><a href="ch28.xhtml#id886">控制器</a></span></li><li><span class="section"><a href="ch28.xhtml#id887">Application</a></span></li><li><span class="section"><a href="ch28.xhtml#id888">测试</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch29.xhtml">29. Spring boot with starter</a></span><ul><li><span class="section"><a href="ch29.xhtml#id893">实现 starter</a></span><ul><li><span class="section"><a href="ch29.xhtml#id889">Maven pom.xml 依赖包</a></span></li><li><span class="section"><a href="ch29.xhtml#id890">配置文件处理</a></span></li><li><span class="section"><a href="ch29.xhtml#id891">自动配置文件</a></span></li><li><span class="section"><a href="ch29.xhtml#id892">启用 starter 的自定义注解</a></span></li></ul></li><li><span class="section"><a href="ch29s02.xhtml">引用 starter</a></span><ul><li><span class="section"><a href="ch29s02.xhtml#id894">Maven pom.xml 引入依赖</a></span></li><li><span class="section"><a href="ch29s02.xhtml#id895">通过注解配置 starter</a></span></li><li><span class="section"><a href="ch29s02.xhtml#id896">测试运行结果</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="monitor/ch30.xhtml">30. Spring boot with Monitor</a></span><ul><li><span class="section"><a href="monitor/ch30.xhtml#springboot.grafana">Spring boot with Grafana</a></span><ul><li><span class="section"><a href="monitor/ch30.xhtml#id897">Springboot 集成 InfluxDB</a></span></li><li><span class="section"><a href="monitor/ch30.xhtml#id898">InfluxDB</a></span></li></ul></li><li><span class="section"><a href="monitor/ch30s02.xhtml">Spring Boot with Prometheus</a></span><ul><li><span class="section"><a href="monitor/ch30s02.xhtml#id899">Maven 依赖</a></span></li><li><span class="section"><a href="monitor/ch30s02.xhtml#id900">application.properties 配置文件</a></span></li><li><span class="section"><a href="monitor/ch30s02.xhtml#id901">启动类</a></span></li><li><span class="section"><a href="monitor/ch30s02.xhtml#id902">测试</a></span></li><li><span class="section"><a href="monitor/ch30s02.xhtml#id903">控制器监控</a></span></li><li><span class="section"><a href="monitor/ch30s02.xhtml#id908">自定义埋点监控</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="git/ch32.xhtml">32. Spring boot with Git version</a></span><ul><li><span class="section"><a href="git/ch32.xhtml#id909">CommonRestController 公共控制器</a></span></li><li><span class="section"><a href="git/ch32s02.xhtml">VersionRestController 测试控制器</a></span></li><li><span class="section"><a href="git/ch32s03.xhtml">创建 .gitattributes 文件</a></span></li></ul></li><li><span class="chapter"><a href="session/ch33.xhtml">33. Spring boot with Session share</a></span><ul><li><span class="section"><a href="session/ch33.xhtml#id913">Redis</a></span><ul><li><span class="section"><a href="session/ch33.xhtml#id910">Maven</a></span></li><li><span class="section"><a href="session/ch33.xhtml#id911">application.properties</a></span></li><li><span class="section"><a href="session/ch33.xhtml#id912">Application</a></span></li></ul></li><li><span class="section"><a href="session/ch33s02.xhtml">测试 Session</a></span></li><li><span class="section"><a href="session/ch33s03.xhtml">JDBC</a></span></li><li><span class="section"><a href="session/ch33s04.xhtml">Springboot 2.1</a></span></li></ul></li><li><span class="chapter"><a href="cache/ch34.xhtml">34. Spring boot with Caching</a></span><ul><li><span class="section"><a href="cache/ch34.xhtml#id915">maven</a></span><ul><li><span class="section"><a href="cache/ch34.xhtml#id914">Redis</a></span></li></ul></li><li><span class="section"><a href="cache/ch34s02.xhtml">启用 Cache</a></span></li><li><span class="section"><a href="cache/ch34s03.xhtml">@Cacheable 的用法</a></span><ul><li><span class="section"><a href="cache/ch34s03.xhtml#id916">SpEL表达式</a></span></li><li><span class="section"><a href="cache/ch34s03.xhtml#id917">排除 null 结果</a></span></li><li><span class="section"><a href="cache/ch34s03.xhtml#id918">排除 empty</a></span></li></ul></li><li><span class="section"><a href="cache/ch34s04.xhtml">@CachePut 用法</a></span></li><li><span class="section"><a href="cache/ch34s05.xhtml">清空缓存</a></span></li><li><span class="section"><a href="cache/ch34s06.xhtml">@Caching</a></span></li><li><span class="section"><a href="cache/ch34s07.xhtml">解决Expire 和 TTL 过期时间</a></span></li></ul></li><li><span class="chapter"><a href="email/ch35.xhtml">35. Spring boot with Email</a></span><ul><li><span class="section"><a href="email/ch35.xhtml#id919">Maven</a></span></li><li><span class="section"><a href="email/ch35s02.xhtml">Resource</a></span></li><li><span class="section"><a href="email/ch35s03.xhtml">POJO</a></span></li><li><span class="section"><a href="email/ch35s04.xhtml">RestController</a></span></li><li><span class="section"><a href="email/ch35s05.xhtml">Test</a></span></li></ul></li><li><span class="chapter"><a href="hessian/ch36.xhtml">36. Spring boot with Hessian</a></span><ul><li><span class="section"><a href="hessian/ch36.xhtml#id920">Maven</a></span></li><li><span class="section"><a href="hessian/ch36s02.xhtml">Application</a></span></li><li><span class="section"><a href="hessian/ch36s03.xhtml">HessianServiceExporter</a></span></li><li><span class="section"><a href="hessian/ch36s04.xhtml">Service</a></span></li><li><span class="section"><a href="hessian/ch36s05.xhtml">RestController</a></span></li></ul></li><li><span class="chapter"><a href="async/ch37.xhtml">37. Spring boot with Async</a></span><ul><li><span class="section"><a href="async/ch37.xhtml#Callable">Callable 实现异步</a></span></li><li><span class="section"><a href="async/ch37s02.xhtml">WebAsyncTask 实现异步</a></span></li><li><span class="section"><a href="async/ch37s03.xhtml">DeferredResult 实现异步返回结果</a></span></li><li><span class="section"><a href="async/ch37s04.xhtml">默认简单线程池 SimpleAsyncTaskExecutor</a></span><ul><li><span class="section"><a href="async/ch37s04.xhtml#id921">配置线程池</a></span></li><li><span class="section"><a href="async/ch37s04.xhtml#id922">@Service/@Component 中异步执行</a></span></li><li><span class="section"><a href="async/ch37s04.xhtml#id923">applicationTaskExecutor</a></span></li></ul></li><li><span class="section"><a href="async/ch37s05.xhtml">ThreadPoolTaskExecutor 自定义线程池</a></span><ul><li><span class="section"><a href="async/ch37s05.xhtml#简单异步执行">最简单的配置</a></span></li><li><span class="section"><a href="async/ch37s05.xhtml#id924">队列</a></span></li><li><span class="section"><a href="async/ch37s05.xhtml#id925">定义多个线程池</a></span></li><li><span class="section"><a href="async/ch37s05.xhtml#id926">实现 AsyncConfigurer 接口方式创建自定义连接池</a></span></li><li><span class="section"><a href="async/ch37s05.xhtml#id927">继承 AsyncConfigurerSupport 创建自定义连接池 </a></span></li><li><span class="section"><a href="async/ch37s05.xhtml#id928">生产环境完整代码 @Bean 注入方式</a></span></li><li><span class="section"><a href="async/ch37s05.xhtml#id929">通过 @Bean 覆盖掉 SimpleAsyncTaskExecutor</a></span></li></ul></li><li><span class="section"><a href="async/ch37s06.xhtml">自定义线程池 ThreadPoolExecutor</a></span><ul><li><span class="section"><a href="async/ch37s06.xhtml#id930">ThreadPoolExecutor</a></span></li><li><span class="section"><a href="async/ch37s06.xhtml#id931">注入自定义线程池bean</a></span></li></ul></li><li><span class="section"><a href="async/ch37s07.xhtml">设置线程名称</a></span></li><li><span class="section"><a href="async/ch37s08.xhtml">线程池监控</a></span></li><li><span class="section"><a href="async/ch37s09.xhtml">注意事项</a></span></li></ul></li><li><span class="chapter"><a href="ch38.xhtml">38. Springboot with Ethereum (web3j)</a></span><ul><li><span class="section"><a href="ch38.xhtml#id932">Maven</a></span></li><li><span class="section"><a href="ch38s02.xhtml">application.properties</a></span></li><li><span class="section"><a href="ch38s03.xhtml">TestRestController</a></span></li><li><span class="section"><a href="ch38s04.xhtml">测试</a></span></li></ul></li><li><span class="chapter"><a href="record/ch39.xhtml">39. Java Record 新特性</a></span><ul><li><span class="section"><a href="record/ch39.xhtml#id933">Record 替代 POJO 类</a></span></li><li><span class="section"><a href="record/ch39s02.xhtml">Record 作为 Properties</a></span></li><li><span class="section"><a href="record/ch39s03.xhtml">Record 作为实体类</a></span></li><li><span class="section"><a href="record/ch39s04.xhtml">Record 作为 Service</a></span></li><li><span class="section"><a href="record/ch39s05.xhtml">Record 作为 Controller</a></span></li></ul></li></ul></div><section class="section" id="redis"><div class="titlepage"><div><div><h2 class="title" style="clear: both">Spring boot with Redis</h2></div></div></div><section class="section" id="redis"><div class="titlepage"><div><div><h3 class="title">Spring boot with Redis</h3></div></div></div><section class="section" id="id1543"><div class="titlepage"><div><div><h4 class="title">maven</h4></div></div></div><pre class="programlisting">
				
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
&lt;/dependency&gt;			
				
			</pre></section><section class="section" id="id1544"><div class="titlepage"><div><div><h4 class="title">application.properties</h4></div></div></div><pre class="programlisting">
				
spring.redis.database=10
spring.redis.host=localhost
spring.redis.port=6379
spring.redis.password=
spring.redis.pool.max-active=8
spring.redis.pool.max-wait=-1
spring.redis.pool.max-idle=8
spring.redis.pool.min-idle=0
spring.redis.timeout=0
				
			</pre></section><section class="section" id="id1545"><div class="titlepage"><div><div><h4 class="title">JUnit</h4></div></div></div><pre class="programlisting">
				
@RunWith(SpringJUnit4ClassRunner.class)
@SpringApplicationConfiguration(Application.class)
public class ApplicationTests {
	@Autowired
	private StringRedisTemplate stringRedisTemplate;
	@Test
	public void test() throws Exception {
		// 保存字符串
		stringRedisTemplate.opsForValue().set("neo", "chen");
		Assert.assertEquals("chen", stringRedisTemplate.opsForValue().get("neo"));
    }
}				
				
			</pre></section><section class="section" id="id1546"><div class="titlepage"><div><div><h4 class="title">Controller</h4></div></div></div><p>stringRedisTemplate模板用于存储key,value为字符串的数据</p><pre class="programlisting">
				
	@Autowired
	private StringRedisTemplate stringRedisTemplate;
	
	@RequestMapping("/test")
	@ResponseBody
	public String test() {
		String message = "";
		stringRedisTemplate.opsForValue().set("hello", "world");
		message = stringRedisTemplate.opsForValue().get("hello");
		return message;
	}
				
			</pre><p>等同于</p><pre class="programlisting">
				
	@Autowired
	private RedisTemplate&lt;String, String&gt; redisTemplate;
				
			</pre><div class="example" id="id1459"><div class="example-title">例 2. RedisTemplate</div><div class="example-contents"><pre class="programlisting">
					
	@Autowired
	private RedisTemplate&lt;String, String&gt; redisTemplate;
	
	public List&lt;Protocol&gt; getProtocol() {
		List&lt;Protocol&gt; protocols = new ArrayList&lt;Protocol&gt;();
		Gson gson = new Gson();
		Type type = new TypeToken&lt;List&lt;Protocol&gt;&gt;(){}.getType();
		redisTemplate.setKeySerializer(new StringRedisSerializer());
		redisTemplate.setValueSerializer(new StringRedisSerializer());
		
		String cacheKey = String.format("%s:%s", this.getClass().getName(), Thread.currentThread().getStackTrace()[1].getMethodName());
		long expireTime = 5;
		
		if(redisTemplate.hasKey(cacheKey)){
			String cacheValue = redisTemplate.opsForValue().get(cacheKey);
			System.out.println(cacheValue);
			protocols = gson.fromJson(cacheValue, type);
		}else{
			Protocol protocol = new Protocol();
			protocol.setRequest(new Date().toString());
			protocols.add(protocol);
			
			String jsonString = gson.toJson(protocols, type);
	        System.out.println( jsonString );
			
			redisTemplate.opsForValue().set(cacheKey, jsonString);
			redisTemplate.expire(cacheKey, expireTime, TimeUnit.SECONDS);
		}
		return protocols;
	}
					
				</pre></div></div><br class="example-break"/></section></section><section class="section" id="id1547"><div class="titlepage"><div><div><h3 class="title"/></div></div></div><section class="section" id="id1548"><div class="titlepage"><div><div><h4 class="title">获取过期时间</h4></div></div></div><pre class="programlisting">
			
    @Autowired
    private RedisTemplate&lt;String, String&gt; redisTemplate;
    
    Long ttl = redisTemplate.getExpire(String.format("lock:%s", device));			
			
			</pre></section><section class="section" id="id1549"><div class="titlepage"><div><div><h4 class="title">列表操作</h4></div></div></div><p>ListOperations</p><pre class="programlisting">
				
public class Example {

    // inject the actual template
    @Autowired
    private RedisTemplate&lt;String, String&gt; template;

    // inject the template as ListOperations
    // can also inject as Value, Set, ZSet, and HashOperations
    @Resource(name="redisTemplate")
    private ListOperations&lt;String, String&gt; listOps;

    public void addLink(String userId, URL url) {
        listOps.leftPush(userId, url.toExternalForm());
        // or use template directly
        redisTemplate.boundListOps(userId).leftPush(url.toExternalForm());
    }
}
				
			</pre></section></section><section class="section" id="redis.pubsub"><div class="titlepage"><div><div><h3 class="title">Redis Pub/Sub</h3></div></div></div><section class="section" id="id1550"><div class="titlepage"><div><div><h4 class="title">Redis配置类</h4></div></div></div><pre class="programlisting">
				
package cn.netkiller.wallet.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.connection.RedisConnectionFactory;

import org.springframework.data.redis.core.StringRedisTemplate;
import org.springframework.data.redis.listener.ChannelTopic;
import org.springframework.data.redis.listener.RedisMessageListenerContainer;
import org.springframework.data.redis.listener.adapter.MessageListenerAdapter;

import cn.netkiller.wallet.redis.RedisMessageSubscriber;

@Configuration
public class RedisConfig {

	public RedisConfig() {
	}

	@Bean
	public StringRedisTemplate stringRedisTemplate(RedisConnectionFactory connectionFactory) {
		StringRedisTemplate redisTemplate = new StringRedisTemplate();
		redisTemplate.setConnectionFactory(connectionFactory);
		return redisTemplate;
	}

	@Bean
	public MessageListenerAdapter messageListener() {
		return new MessageListenerAdapter(new RedisMessageSubscriber());
	}

	@Bean
	public ChannelTopic topic() {
		return new ChannelTopic("demo");
	}

	@Bean
	public RedisMessageListenerContainer redisContainer(RedisConnectionFactory connectionFactory, MessageListenerAdapter messageListener) {
		RedisMessageListenerContainer container = new RedisMessageListenerContainer();

		container.setConnectionFactory(connectionFactory);
		container.addMessageListener(messageListener(), topic());
		container.addMessageListener(messageListener(), new ChannelTopic("test"));
		return container;
	}

}

				
			</pre></section><section class="section" id="id1551"><div class="titlepage"><div><div><h4 class="title">订阅和发布类</h4></div></div></div><pre class="programlisting">
				
package cn.netkiller.wallet.redis;

import java.nio.charset.StandardCharsets;

import org.springframework.data.redis.connection.Message;
import org.springframework.data.redis.connection.MessageListener;

public class RedisMessageSubscriber implements MessageListener {
	public void onMessage(final Message message, final byte[] pattern) {
		System.out.println("Topic : " + new String(message.getChannel(), StandardCharsets.UTF_8));
		System.out.println("Message : " + message.toString());
	}
}

				
			</pre><pre class="programlisting">
				
package cn.netkiller.wallet.redis;

import org.springframework.data.redis.core.StringRedisTemplate;
import org.springframework.data.redis.listener.ChannelTopic;

public class RedisMessagePublisher {

	private final StringRedisTemplate redisTemplate;

	private final ChannelTopic topic;

	public RedisMessagePublisher(StringRedisTemplate redisTemplate, ChannelTopic topic) {
		this.redisTemplate = redisTemplate;
		this.topic = topic;
	}

	public void publish(String message) {
		redisTemplate.convertAndSend(topic.getTopic(), message);
	}
}
								
				
			</pre></section><section class="section" id="id1552"><div class="titlepage"><div><div><h4 class="title">消息发布演示</h4></div></div></div><pre class="programlisting">
				
	@Autowired
	private StringRedisTemplate stringRedisTemplate;
	
	@GetMapping("/pub/demo")
	public String pub() {

		RedisMessagePublisher publisher = new RedisMessagePublisher(stringRedisTemplate, new ChannelTopic("demo"));
		String message = "Message " + UUID.randomUUID();
		publisher.publish(message);
		return message;
	}

	@GetMapping("/pub/test")
	public String pub(@RequestParam String message) {

		RedisMessagePublisher publisher = new RedisMessagePublisher(stringRedisTemplate, new ChannelTopic("test"));
		publisher.publish(message);
		return message;
	}				
				
			</pre></section></section><section class="section" id="redisson"><div class="titlepage"><div><div><h3 class="title">Sprint boot with Redisson</h3></div></div></div><section class="section" id="id1553"><div class="titlepage"><div><div><h4 class="title">Springboot 3.x</h4></div></div></div><pre class="screen">
		

		
			</pre></section><section class="section" id="id1554"><div class="titlepage"><div><div><h4 class="title">Springboot 2.1</h4></div></div></div><p>注意：排除 redisson-spring-data-23，引用 redisson-spring-data-21</p><pre class="screen">
		
 		&lt;dependency&gt;
            &lt;groupId&gt;org.redisson&lt;/groupId&gt;
            &lt;artifactId&gt;redisson-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;3.14.0&lt;/version&gt;
            &lt;exclusions&gt;
                &lt;exclusion&gt;
                    &lt;groupId&gt;org.redisson&lt;/groupId&gt;
                    &lt;artifactId&gt;redisson-spring-data-23&lt;/artifactId&gt;
                &lt;/exclusion&gt;
            &lt;/exclusions&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.redisson&lt;/groupId&gt;
            &lt;artifactId&gt;redisson-spring-data-21&lt;/artifactId&gt;
            &lt;version&gt;3.14.0&lt;/version&gt;
        &lt;/dependency&gt;
		
		
			</pre></section></section></section></div><footer><div class="navfooter"><hr/><table style="width: 100%; "><tr><td style="width: 40%; text-align: left; "><a accesskey="p" href="../pr01s05.xhtml">上一页</a> </td><td style="width: 20%; text-align: center; "> </td><td style="width: 40%; text-align: right; "> <a accesskey="n" href="ch01.xhtml">下一页</a></td></tr><tr><td style="width: 40%; text-align: left; vertical-align: top; ">联系方式 </td><td style="width: 20%; text-align: center; "><a accesskey="h" href="../index.xhtml">起始页</a></td><td style="width: 40%; text-align: right; vertical-align: top; "> 第 1 章 Spring Boot Quick start</td></tr></table></div></footer></body></html>