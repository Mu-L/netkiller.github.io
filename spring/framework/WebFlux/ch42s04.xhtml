<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Thymeleaf</title><link rel="stylesheet" type="text/css" href="../../docbook.css"/><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"/><meta name="keywords" content="Spring, Spring Boot, Spring Cloud, Spring Eureka, Spring Config"/><link rel="prev" href="ch42s03.xhtml" title="WebFlux Router"/><link rel="next" href="ch42s05.xhtml" title="Webflux Redis"/></head><body><header><div class="navheader"><table style="width: 100%; "><tr><th style="text-align: center; " colspan="3">Thymeleaf</th></tr><tr><td style="width: 20%; text-align: left; "><a accesskey="p" href="ch42s03.xhtml">上一页</a> </td><th style="width: 60%; text-align: center; ">第 42 章 WebFlux framework</th><td style="width: 20%; text-align: right; "> <a accesskey="n" href="ch42s05.xhtml">下一页</a></td></tr></table><hr/></div></header><section class="section" id="webflux.Thymeleaf"><div class="titlepage"><div><div><h2 class="title" style="clear: both">Thymeleaf</h2></div></div></div><section class="section" id="id1013"><div class="titlepage"><div><div><h3 class="title">模板引擎 Thymeleaf 依赖</h3></div></div></div><pre class="screen">
			
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
    &lt;/dependency&gt;			
			
		</pre></section><section class="section" id="id1014"><div class="titlepage"><div><div><h3 class="title">application.properties 相关的配置</h3></div></div></div><pre class="screen">
			
spring.thymeleaf.cache=true # Enable template caching.
spring.thymeleaf.check-template=true # Check that the template exists before rendering it.
spring.thymeleaf.check-template-location=true # Check that the templates location exists.
spring.thymeleaf.enabled=true # Enable Thymeleaf view resolution for Web frameworks.
spring.thymeleaf.encoding=UTF-8 # Template files encoding.
spring.thymeleaf.excluded-view-names= # Comma-separated list of view names that should be excluded from resolution.
spring.thymeleaf.mode=HTML5 # Template mode to be applied to templates. See also StandardTemplateModeHandlers.
spring.thymeleaf.prefix=classpath:/templates/ # Prefix that gets prepended to view names when building a URL.
spring.thymeleaf.reactive.max-chunk-size= # Maximum size of data buffers used for writing to the response, in bytes.
spring.thymeleaf.reactive.media-types= # Media types supported by the view technology.
spring.thymeleaf.servlet.content-type=text/html # Content-Type value written to HTTP responses.
spring.thymeleaf.suffix=.html # Suffix that gets appended to view names when building a URL.
spring.thymeleaf.template-resolver-order= # Order of the template resolver in the chain.
spring.thymeleaf.view-names= # Comma-separated list of view names that can be resolved.
			
		</pre></section><section class="section" id="id1015"><div class="titlepage"><div><div><h3 class="title">Webflux 控制器</h3></div></div></div><pre class="programlisting">
			
	@GetMapping("/welcome")
    public Mono&lt;String&gt; hello(final Model model) {
        model.addAttribute("name", "Neo");
        model.addAttribute("city", "深圳");

        String path = "hello";
        return Mono.create(monoSink -&gt; monoSink.success(path));
    }

    @GetMapping("/list")
    public String listPage(final Model model) {
        final Flux&lt;City&gt; citys = cityService.findAllCity();
        model.addAttribute("cityLists", citys);
        return "cityList";
    }			
			
		</pre></section><section class="section" id="id1016"><div class="titlepage"><div><div><h3 class="title">Tymeleaf 视图</h3></div></div></div><p>welcome.html</p><pre class="programlisting">
			
&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"/&gt;
    &lt;title&gt;欢迎页面&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;

&lt;h1 &gt;你好，欢迎来自&lt;p th:text="${city}"&gt;&lt;/p&gt;的&lt;p th:text="${name}"&gt;&lt;/p&gt;&lt;/h1&gt;

&lt;/body&gt;
&lt;/html&gt;			
			
		</pre><p>cityList.html</p><pre class="programlisting">
			
&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"/&gt;
    &lt;title&gt;城市列表&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;

&lt;div&gt;


    &lt;table&gt;
        &lt;legend&gt;
            &lt;strong&gt;城市列表&lt;/strong&gt;
        &lt;/legend&gt;
        &lt;thead&gt;
        &lt;tr&gt;
            &lt;th&gt;城市编号&lt;/th&gt;
            &lt;th&gt;省份编号&lt;/th&gt;
            &lt;th&gt;名称&lt;/th&gt;
            &lt;th&gt;描述&lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
        &lt;tr th:each="city : ${cityLists}"&gt;
            &lt;td th:text="${city.id}"&gt;&lt;/td&gt;
            &lt;td th:text="${city.provinceId}"&gt;&lt;/td&gt;
            &lt;td th:text="${city.name}"&gt;&lt;/td&gt;
            &lt;td th:text="${city.description}"&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;

&lt;/div&gt;

&lt;/body&gt;
&lt;/html&gt;			
			
		</pre></section></section><footer><div class="navfooter"><hr/><table style="width: 100%; "><tr><td style="width: 40%; text-align: left; "><a accesskey="p" href="ch42s03.xhtml">上一页</a> </td><td style="width: 20%; text-align: center; "><a accesskey="u" href="ch42.xhtml">上一级</a></td><td style="width: 40%; text-align: right; "> <a accesskey="n" href="ch42s05.xhtml">下一页</a></td></tr><tr><td style="width: 40%; text-align: left; vertical-align: top; ">WebFlux Router </td><td style="width: 20%; text-align: center; "><a accesskey="h" href="../../index.xhtml">起始页</a></td><td style="width: 40%; text-align: right; vertical-align: top; "> Webflux Redis</td></tr></table></div></footer></body></html>