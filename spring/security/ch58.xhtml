<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>第 58 章 Springboot 3 + Security 6</title><link rel="stylesheet" type="text/css" href="../docbook.css"/><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"/><meta name="keywords" content="Spring, Spring Boot, Spring Cloud, Spring Eureka, Spring Config"/><link rel="prev" href="pt04.xhtml" title="部分 IV. Spring Security"/><link rel="next" href="ch58s02.xhtml" title="Springboot 3 Security + OncePerRequestFilter"/></head><body><header><div class="navheader"><table style="width: 100%; "><tr><th style="text-align: center; " colspan="3">第 58 章 Springboot 3 + Security 6</th></tr><tr><td style="width: 20%; text-align: left; "><a accesskey="p" href="pt04.xhtml">上一页</a> </td><th style="width: 60%; text-align: center; ">部分 IV. Spring Security</th><td style="width: 20%; text-align: right; "> <a accesskey="n" href="ch58s02.xhtml">下一页</a></td></tr></table><hr/></div></header><section class="chapter" id="security"><div class="titlepage"><div><div><h2 class="title">第 58 章 Springboot 3 + Security 6</h2></div></div></div><div class="toc"><div class="toc-title">目录</div><ul class="toc"><li><span class="section"><a href="ch58.xhtml#spring.security.user.name">Spring Security with HTTP Auth</a></span><ul><li><span class="section"><a href="ch58.xhtml#id1241">默认配置</a></span></li><li><span class="section"><a href="ch58.xhtml#id1242">设置用户名和密码</a></span></li><li><span class="section"><a href="ch58.xhtml#禁用 Security">禁用 Security</a></span></li><li><span class="section"><a href="ch58.xhtml#id1243">设置角色</a></span></li></ul></li><li><span class="section"><a href="ch58s02.xhtml">Springboot 3 Security + OncePerRequestFilter</a></span><ul><li><span class="section"><a href="ch58s02.xhtml#OncePerRequestFilter">OncePerRequestFilter</a></span></li><li><span class="section"><a href="ch58s02.xhtml#SecurityConfiguration">SecurityConfiguration</a></span></li></ul></li><li><span class="section"><a href="ch58s03.xhtml">SecurityFilterChain</a></span></li><li><span class="section"><a href="ch58s04.xhtml">@PreAuthorize</a></span><ul><li><span class="section"><a href="ch58s04.xhtml#id1244">hasRole</a></span></li><li><span class="section"><a href="ch58s04.xhtml#id1245">hasAnyRole</a></span></li><li><span class="section"><a href="ch58s04.xhtml#id1246">从 HttpServletRequest 返回的 request 变量中判断角色</a></span></li><li><span class="section"><a href="ch58s04.xhtml#id1247">getAuthentication() 获得角色</a></span></li><li><span class="section"><a href="ch58s04.xhtml#id1248">UserDetailsService</a></span></li></ul></li><li><span class="section"><a href="ch58s05.xhtml">httpBasic 配置</a></span></li><li><span class="section"><a href="ch58s06.xhtml"/></span></li></ul></div><section class="section" id="spring.security.user.name"><div class="titlepage"><div><div><h2 class="title" style="clear: both">Spring Security with HTTP Auth</h2></div></div></div><section class="section" id="id1241"><div class="titlepage"><div><div><h3 class="title">默认配置</h3></div></div></div><p>如果在 maven 中引入了 spring security当你启动 springboot 的时候会提示</p><pre class="screen">
			
Using generated security password: 1cd27b90-1208-4be2-ae8e-0f564ee427b8			
			
			</pre><p>默认用户名是 user 可以这样访问</p><pre class="screen">
			
neo@MacBook-Pro ~ % curl -s http://user:1cd27b90-1208-4be2-ae8e-0f564ee427b8@localhost:8080/member/json
{"status":false,"reason":"","code":0,"data":{}} 			
			
			</pre></section><section class="section" id="id1242"><div class="titlepage"><div><div><h3 class="title">设置用户名和密码</h3></div></div></div><pre class="programlisting">
			
spring.security.user.name=test
spring.security.user.password=test
spring.security.user.role=USER		
			
			</pre></section><section class="section" id="禁用 Security"><div class="titlepage"><div><div><h3 class="title">禁用 Security</h3></div></div></div><p>方法一</p><pre class="programlisting">
			
@EnableAutoConfiguration(exclude = {
		org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration.class
})
			
			
			</pre><pre class="screen">
			
@SpringBootApplication(exclude = { SecurityAutoConfiguration.class })
public class Application {
	public static void main(String[] args) {
		System.out.println("Web Starting...");
		SpringApplication.run(Application.class, args);
	}
}
			
			</pre></section><section class="section" id="id1243"><div class="titlepage"><div><div><h3 class="title">设置角色</h3></div></div></div><pre class="screen">
			
spring:
  security:
    user:
      name: kaven
      password: itkaven
      roles:
        - USER
        - ADMIN			
			
			</pre></section></section></section><footer><div class="navfooter"><hr/><table style="width: 100%; "><tr><td style="width: 40%; text-align: left; "><a accesskey="p" href="pt04.xhtml">上一页</a> </td><td style="width: 20%; text-align: center; "><a accesskey="u" href="pt04.xhtml">上一级</a></td><td style="width: 40%; text-align: right; "> <a accesskey="n" href="ch58s02.xhtml">下一页</a></td></tr><tr><td style="width: 40%; text-align: left; vertical-align: top; ">部分 IV. Spring Security </td><td style="width: 20%; text-align: center; "><a accesskey="h" href="../index.xhtml">起始页</a></td><td style="width: 40%; text-align: right; vertical-align: top; "> Springboot 3 Security + OncePerRequestFilter</td></tr></table></div></footer></body></html>