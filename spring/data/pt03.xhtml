<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>部分 III. Spring Data</title><link rel="stylesheet" type="text/css" href="../docbook.css"/><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"/><meta name="keywords" content="Spring, Spring Boot, Spring Cloud, Spring Eureka, Spring Config"/><link rel="prev" href="../framework/util/ch49s05.xhtml" title="RestClient"/><link rel="next" href="ch50.xhtml" title="第 50 章 EntityManager"/></head><body><header><div class="navheader"><table style="width: 100%; "><tr><th style="text-align: center; " colspan="3">部分 III. Spring Data</th></tr><tr><td style="width: 20%; text-align: left; "><a accesskey="p" href="../framework/util/ch49s05.xhtml">上一页</a> </td><th style="width: 60%; text-align: center; "> </th><td style="width: 20%; text-align: right; "> <a accesskey="n" href="ch50.xhtml">下一页</a></td></tr></table><hr/></div></header><div class="part" id="index"><div class="titlepage"><div><div><h1 class="title">部分 III. Spring Data</h1></div></div></div><div class="toc"><div class="toc-title">目录</div><ul class="toc"><li><span class="chapter"><a href="ch50.xhtml">50. EntityManager</a></span></li><li><span class="chapter"><a href="JdbcTemplate/ch51.xhtml">51. Spring Data with JdbcTemplate</a></span><ul><li><span class="section"><a href="JdbcTemplate/ch51.xhtml#execute">execute</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s02.xhtml">queryForInt</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s03.xhtml">queryForLong</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s04.xhtml">queryForObject</a></span><ul><li><span class="section"><a href="JdbcTemplate/ch51s04.xhtml#id1095">返回整形与字符型</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s04.xhtml#id1096">查询 Double 类型数据库</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s04.xhtml#id1097">返回日期</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s04.xhtml#id1098">返回结果集</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s04.xhtml#id1099">通过 "?" 向SQL传递参数</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s04.xhtml#id1100">RowMapper 记录映射</a></span></li></ul></li><li><span class="section"><a href="JdbcTemplate/ch51s05.xhtml">queryForList</a></span><ul><li><span class="section"><a href="JdbcTemplate/ch51s05.xhtml#id1101">Iterator 用法</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s05.xhtml#id1102">for 循环</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s05.xhtml#id1103">forEach 用法</a></span></li></ul></li><li><span class="section"><a href="JdbcTemplate/ch51s06.xhtml">queryForMap</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s07.xhtml">query</a></span><ul><li><span class="section"><a href="JdbcTemplate/ch51s07.xhtml#id1104">ResultSet</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s07.xhtml#id1105">ResultSetExtractor</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s07.xhtml#id1106">RowMapper</a></span></li></ul></li><li><span class="section"><a href="JdbcTemplate/ch51s08.xhtml">queryForRowSet</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s09.xhtml">update</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s10.xhtml">MapSqlParameterSource</a></span></li><li><span class="section"><a href="JdbcTemplate/ch51s11.xhtml">实例参考</a></span><ul><li><span class="section"><a href="JdbcTemplate/ch51s11.xhtml#">参数传递技巧</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="mysql/ch52.xhtml">52. Spring Data with MySQL</a></span><ul><li><span class="section"><a href="mysql/ch52.xhtml#engine">选择数据库表引擎</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml">声明实体</a></span><ul><li><span class="section"><a href="mysql/ch52s02.xhtml#id1107">@Entity 声明实体</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@Table">@Table 定义表名</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@Id">@Id 定义主键</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@Column">@Column 定义字段：</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@Transient">非数据库字段</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@Lob">@Lob 注解属性将被持久化为 Blog 或 Clob 类型</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@NotNull">@NotNull 不能为空声明</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@Temporal">@Temporal 日期定义</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@CreateDate">创建日期</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@DateTimeFormat">@DateTimeFormat 处理日期时间格式</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#enum">Enum 枚举数据类型</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#set">SET 数据结构</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#json">JSON 数据类型</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#index">索引</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@Embeddable">嵌入</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#ForeignKey">外键</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@ElementCollection">映射集合属性</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@JsonIgnore">@JsonIgnore</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@EnableJpaAuditing">@EnableJpaAuditing 开启 JPA 审计功能</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@Comment">注释 @Comment</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#@Pattern">@Pattern 数据匹配</a></span></li><li><span class="section"><a href="mysql/ch52s02.xhtml#Inheritance">实体继承</a></span></li></ul></li><li><span class="section"><a href="mysql/ch52s03.xhtml">Repository</a></span><ul><li><span class="section"><a href="mysql/ch52s03.xhtml#CrudRepository">CrudRepository</a></span></li><li><span class="section"><a href="mysql/ch52s03.xhtml#JpaRepository">JpaRepository</a></span></li><li><span class="section"><a href="mysql/ch52s03.xhtml#PagingAndSortingRepository">PagingAndSortingRepository</a></span></li><li><span class="section"><a href="mysql/ch52s03.xhtml#jpa.find">findByXXX</a></span></li><li><span class="section"><a href="mysql/ch52s03.xhtml#jpa.count">count 操作</a></span></li><li><span class="section"><a href="mysql/ch52s03.xhtml#jpa.delete">delete 删除操作</a></span></li><li><span class="section"><a href="mysql/ch52s03.xhtml#OrderBy">OrderBy</a></span></li><li><span class="section"><a href="mysql/ch52s03.xhtml#GreaterThan">GreaterThan</a></span></li><li><span class="section"><a href="mysql/ch52s03.xhtml#sort">Sort 排序操作操作</a></span></li><li><span class="section"><a href="mysql/ch52s03.xhtml#pageable">Pageable 翻页操作</a></span></li><li><span class="section"><a href="mysql/ch52s03.xhtml#@DynamicInsert">@DynamicInsert 与 @DynamicUpdate</a></span></li><li><span class="section"><a href="mysql/ch52s03.xhtml#id1138">继承已存在的 Repository</a></span></li></ul></li><li><span class="section"><a href="mysql/ch52s04.xhtml">TransactionTemplate</a></span></li><li><span class="section"><a href="mysql/ch52s05.xhtml">JPQL @Query</a></span><ul><li><span class="section"><a href="mysql/ch52s05.xhtml#@Modifying">@Modifying 更新/删除</a></span></li><li><span class="section"><a href="mysql/ch52s05.xhtml#@Transactional">事务 @Transactional</a></span></li><li><span class="section"><a href="mysql/ch52s05.xhtml#@Param">参数传递</a></span></li><li><span class="section"><a href="mysql/ch52s05.xhtml#Query.nativeQuery">原生 SQL</a></span></li><li><span class="section"><a href="mysql/ch52s05.xhtml#id1145">@Query 与 Pageagble</a></span></li><li><span class="section"><a href="mysql/ch52s05.xhtml#id1146">返回指定字段</a></span></li><li><span class="section"><a href="mysql/ch52s05.xhtml#id1147">返回指定的模型</a></span></li><li><span class="section"><a href="mysql/ch52s05.xhtml#Query.Collection">Collection</a></span></li><li><span class="section"><a href="mysql/ch52s05.xhtml#nativeQuery">原生SQL查询</a></span></li><li><span class="section"><a href="mysql/ch52s05.xhtml#Sort">Sort</a></span></li><li><span class="section"><a href="mysql/ch52s05.xhtml#@Lock">锁 @Lock</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="redis/ch53.xhtml">53. Spring Data with Redis</a></span><ul><li><span class="section"><a href="redis/ch53.xhtml#springdata.redis.exmaple">集成 Redis XML 方式</a></span><ul><li><span class="section"><a href="redis/ch53.xhtml#id1148">pom.xml</a></span></li><li><span class="section"><a href="redis/ch53.xhtml#id1149">springframework-servlet.xml</a></span></li><li><span class="section"><a href="redis/ch53.xhtml#id1150">Controller</a></span></li><li><span class="section"><a href="redis/ch53.xhtml#id1151">index.jsp</a></span></li><li><span class="section"><a href="redis/ch53.xhtml#id1152">测试</a></span></li></ul></li><li><span class="section"><a href="redis/ch53s02.xhtml">RedisTemplate</a></span><ul><li><span class="section"><a href="redis/ch53s02.xhtml#stringRedisTemplate">stringRedisTemplate 基本用法</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#id1153">设置缓存时间</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#id1154">字符串截取</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#id1155">追加字符串</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#id1156">设置键的字符串值并返回其旧值</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#id1157">increment</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#delete">删除 key </a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#size">返回字符串长度</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#setIfAbsent">如果key不存便缓存。</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#multiSet">缓存多个值 /获取多个值 multiSet / multiGet</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#list">List</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#set">SET 数据类型</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#zset">有序的 set 集合</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#hash">Hash</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#redisTemplate.expire">过期时间未执行</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#id1192">setBit / getBit 二进制位操作</a></span></li><li><span class="section"><a href="redis/ch53s02.xhtml#JsonRedisTemplate">存储 Json 对象</a></span></li></ul></li><li><span class="section"><a href="redis/ch53s03.xhtml">Spring Data Redis - Repository Examples</a></span><ul><li><span class="section"><a href="redis/ch53s03.xhtml#id1196">@EnableRedisRepositories 启动 Redis 仓库</a></span></li><li><span class="section"><a href="redis/ch53s03.xhtml#id1197">定义 Domain 类</a></span></li><li><span class="section"><a href="redis/ch53s03.xhtml#id1198">Repository 接口</a></span></li><li><span class="section"><a href="redis/ch53s03.xhtml#id1199">测试代码</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch54.xhtml">54. Spring Data with MongoDB</a></span><ul><li><span class="section"><a href="ch54.xhtml#SpringDataMongoDB">Example Spring Data MongoDB</a></span><ul><li><span class="section"><a href="ch54.xhtml#id1200">pom.xml</a></span></li><li><span class="section"><a href="ch54.xhtml#id1201">springframework-servlet.xml</a></span></li><li><span class="section"><a href="ch54.xhtml#id1202">POJO</a></span></li><li><span class="section"><a href="ch54.xhtml#id1203">Controller</a></span></li><li><span class="section"><a href="ch54.xhtml#id1204">查看测试结果</a></span></li><li><span class="section"><a href="ch54.xhtml#id1205">条件查询</a></span></li></ul></li><li><span class="section"><a href="ch54s02.xhtml">MongoDB 多数据源</a></span><ul><li><span class="section"><a href="ch54s02.xhtml#id1206">Maven</a></span></li><li><span class="section"><a href="ch54s02.xhtml#id1207">Application 禁止自动配置 MongoDB</a></span></li><li><span class="section"><a href="ch54s02.xhtml#id1208">application.properties 新增配置项</a></span></li><li><span class="section"><a href="ch54s02.xhtml#id1209">MongoDB 配置类</a></span></li><li><span class="section"><a href="ch54s02.xhtml#id1210">创建 Document 关系映射类 </a></span></li><li><span class="section"><a href="ch54s02.xhtml#id1211">测试控制器</a></span></li><li><span class="section"><a href="ch54s02.xhtml#id1212">测试</a></span></li></ul></li><li><span class="section"><a href="ch54s03.xhtml">@Document</a></span><ul><li><span class="section"><a href="ch54s03.xhtml#@Document">指定表名</a></span></li><li><span class="section"><a href="ch54s03.xhtml#@Id">@Id</a></span></li><li><span class="section"><a href="ch54s03.xhtml#@Version">@Version</a></span></li><li><span class="section"><a href="ch54s03.xhtml#@Field">@Field 定义字段名</a></span></li><li><span class="section"><a href="ch54s03.xhtml#@Indexed">@Indexed</a></span></li><li><span class="section"><a href="ch54s03.xhtml#@CompoundIndex">@CompoundIndex 复合索引</a></span></li><li><span class="section"><a href="ch54s03.xhtml#@TextIndexed">@TextIndexed</a></span></li><li><span class="section"><a href="ch54s03.xhtml#@GeoSpatialIndex">@GeoSpatialIndex 地理位置索引</a></span></li><li><span class="section"><a href="ch54s03.xhtml#@Transient">@Transient 丢弃数据，不存到 mongodb</a></span></li><li><span class="section"><a href="ch54s03.xhtml#@DBRef">@DBRef 做外外键引用</a></span></li><li><span class="section"><a href="ch54s03.xhtml#DateTimeFormat">@DateTimeFormat</a></span></li><li><span class="section"><a href="ch54s03.xhtml#NumberFormat">@NumberFormat</a></span></li><li><span class="section"><a href="ch54s03.xhtml#Enum">在 @Document 中使用 Enum 类型</a></span></li><li><span class="section"><a href="ch54s03.xhtml#document.list">在 @Document 中定义数据结构 List/Map</a></span></li><li><span class="section"><a href="ch54s03.xhtml#mongodb.geojson">GeoJson 数据类型</a></span></li></ul></li><li><span class="section"><a href="ch54s04.xhtml">MongoRepository</a></span><ul><li><span class="section"><a href="ch54s04.xhtml#id1225">扫描仓库接口</a></span></li><li><span class="section"><a href="ch54s04.xhtml#findAll">findAll()</a></span></li><li><span class="section"><a href="ch54s04.xhtml#deleteAll">deleteAll()</a></span></li><li><span class="section"><a href="ch54s04.xhtml#save">save()</a></span></li><li><span class="section"><a href="ch54s04.xhtml#count">count()</a></span></li><li><span class="section"><a href="ch54s04.xhtml#Repository.exists">exists() 判断是否存在</a></span></li><li><span class="section"><a href="ch54s04.xhtml#existsById">existsById()</a></span></li><li><span class="section"><a href="ch54s04.xhtml#findByXXXX">findByXXXX</a></span></li><li><span class="section"><a href="ch54s04.xhtml#findAllOrderBy">findAll with OrderBy</a></span></li><li><span class="section"><a href="ch54s04.xhtml#findsort">findAll with Sort</a></span></li><li><span class="section"><a href="ch54s04.xhtml#findpage">FindAll with Pageable</a></span></li><li><span class="section"><a href="ch54s04.xhtml#StartingWith">StartingWith 和 EndingWith</a></span></li><li><span class="section"><a href="ch54s04.xhtml#Between">Between</a></span></li><li><span class="section"><a href="ch54s04.xhtml#Before.After">Before / After</a></span></li><li><span class="section"><a href="ch54s04.xhtml#@Query">@Query</a></span></li></ul></li><li><span class="section"><a href="ch54s05.xhtml">mongoTemplate</a></span><ul><li><span class="section"><a href="ch54s05.xhtml#mongoTemplate.save">Save 保存</a></span></li><li><span class="section"><a href="ch54s05.xhtml#mongoTemplate.insert">Insert</a></span></li><li><span class="section"><a href="ch54s05.xhtml#mongoTemplate.updateFirst">updateFirst 修改符合条件第一条记录</a></span></li><li><span class="section"><a href="ch54s05.xhtml#mongoTemplate.updateMulti">updateMulti 修改符合条件的所有</a></span></li><li><span class="section"><a href="ch54s05.xhtml#mongoTemplate.findAndModify">查找并保存</a></span></li><li><span class="section"><a href="ch54s05.xhtml#mongoTemplate.upsert">upsert - 修改符合条件时如果不存在则添加</a></span></li><li><span class="section"><a href="ch54s05.xhtml#mongoTemplate.remove">删除</a></span></li><li><span class="section"><a href="ch54s05.xhtml#mongoTemplate.findOne">查找一条数据</a></span></li><li><span class="section"><a href="ch54s05.xhtml#mongoTemplate.find">查找所有数据</a></span></li><li><span class="section"><a href="ch54s05.xhtml#mongoTemplate.query">Query</a></span></li><li><span class="section"><a href="ch54s05.xhtml#Criteria">Criteria</a></span></li><li><span class="section"><a href="ch54s05.xhtml#Update">Update</a></span></li><li><span class="section"><a href="ch54s05.xhtml#BasicUpdate">BasicUpdate</a></span></li><li><span class="section"><a href="ch54s05.xhtml#sort">Sort</a></span></li><li><span class="section"><a href="ch54s05.xhtml#PageRequest">Query + PageRequest</a></span></li><li><span class="section"><a href="ch54s05.xhtml#newAggregation">newAggregation</a></span></li><li><span class="section"><a href="ch54s05.xhtml#indexOps">创建索引</a></span></li><li><span class="section"><a href="ch54s05.xhtml#mongoTemplate.subobject">子对象操作</a></span></li></ul></li><li><span class="section"><a href="ch54s06.xhtml">GeoJson 反序列化</a></span></li><li><span class="section"><a href="ch54s07.xhtml">FAQ</a></span><ul><li><span class="section"><a href="ch54s07.xhtml#id1228">location object expected, location array not in correct format; nested exception is com.mongodb.MongoWriteException: location object expected, location array not in correct format</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch55.xhtml">55. Spring Data with Elasticsearch</a></span><ul><li><span class="section"><a href="ch55.xhtml#id1235">内嵌 Elasticsearch</a></span><ul><li><span class="section"><a href="ch55.xhtml#id1229">Maven</a></span></li><li><span class="section"><a href="ch55.xhtml#id1230">src/main/resources/application.properties</a></span></li><li><span class="section"><a href="ch55.xhtml#id1231">Domain Class</a></span></li><li><span class="section"><a href="ch55.xhtml#id1232">ElasticsearchRepository</a></span></li><li><span class="section"><a href="ch55.xhtml#id1233">SearchRestController</a></span></li><li><span class="section"><a href="ch55.xhtml#id1234">测试</a></span></li></ul></li><li><span class="section"><a href="ch55s02.xhtml">集群模式</a></span></li><li><span class="section"><a href="ch55s03.xhtml">Document</a></span></li><li><span class="section"><a href="ch55s04.xhtml">Elasticsearch 删除操作</a></span></li><li><span class="section"><a href="ch55s05.xhtml">FAQ</a></span><ul><li><span class="section"><a href="ch55s05.xhtml#id1236">java.lang.IllegalStateException: Received message from unsupported version: [2.0.0] minimal compatible version is: [5.0.0]</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch56.xhtml">56. Spring boot with Data restful</a></span><ul><li><span class="section"><a href="ch56.xhtml#id1237">Maven</a></span></li></ul></li><li><span class="chapter"><a href="ch57.xhtml">57. Apache ShardingSphere</a></span><ul><li><span class="section"><a href="ch57.xhtml#id1240">微服务集群环境，雪花算法出现重复ID</a></span><ul><li><span class="section"><a href="ch57.xhtml#id1238">方案一、配置实现</a></span></li><li><span class="section"><a href="ch57.xhtml#id1239">方案二、代码实现</a></span></li></ul></li></ul></li></ul></div></div><footer><div class="navfooter"><hr/><table style="width: 100%; "><tr><td style="width: 40%; text-align: left; "><a accesskey="p" href="../framework/util/ch49s05.xhtml">上一页</a> </td><td style="width: 20%; text-align: center; "> </td><td style="width: 40%; text-align: right; "> <a accesskey="n" href="ch50.xhtml">下一页</a></td></tr><tr><td style="width: 40%; text-align: left; vertical-align: top; ">RestClient </td><td style="width: 20%; text-align: center; "><a accesskey="h" href="../index.xhtml">起始页</a></td><td style="width: 40%; text-align: right; vertical-align: top; "> 第 50 章 EntityManager</td></tr></table></div></footer></body></html>