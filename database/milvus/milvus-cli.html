<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>84.4. milvus-cli</title><link rel="stylesheet" type="text/css" href="../docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><meta name="keywords" content="MySQL, PostgreSQL, Oracle, NoSQL, ER, TokyoCabinet/Tyrant, Memcache, Membase, Redis, Flare, Voldemort, LevelDB, MongoDB, GreenSQL, RDBMS, ORDBMS" /><link rel="home" href="../index.html" title="Netkiller Database 手札" /><link rel="up" href="index.html" title="第 84 章 Milvus 向量数据库" /><link rel="prev" href="ch84s03.html" title="84.3. 问答模型" /><link rel="next" href="ch84s05.html" title="84.5. Python SDK" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> | <a xmlns="" href="//netkiller.github.io/">简体中文</a> | <a xmlns="" href="http://netkiller.sourceforge.net/">繁体中文</a> | <a xmlns="" href="/journal/index.html">杂文</a>
		| <a xmlns="" href="https://github.com/netkiller">Github</a> | <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> | <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> | <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> | <a xmlns="" href="https://www.youtube.com/user/bg7nyt/videos">Youtube</a> | <a xmlns="" href="//www.netkiller.cn/home/donations.html">打赏(Donations)</a> | <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">84.4. milvus-cli</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch84s03.html">上一页</a> </td><th width="60%" align="center">第 84 章 Milvus 向量数据库</th><td width="20%" align="right"> <a accesskey="n" href="ch84s05.html">下一页</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td><td></td><td><a href="https://zhuanlan.zhihu.com/netkiller"><img src="/images/logo/zhihu-card-default.svg" height="25" /></a></td><td valign="middle"><a href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a></td><td></td><td></td><td></td><td></td></tr></table><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="milvus-cli"></a>84.4. milvus-cli</h2></div></div></div>
	
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1284"></a>84.4.1. 安装 milvus-cli</h3></div></div></div>
		
		<pre class="screen">
	
pip install milvus-cli
	
		</pre>
		<pre class="screen">
		
[root@netkiller milvus]# milvus_cli 



  __  __ _ _                    ____ _     ___
 |  \/  (_) |_   ___   _ ___   / ___| |   |_ _|
 | |\/| | | \ \ / / | | / __| | |   | |    | |
 | |  | | | |\ V /| |_| \__ \ | |___| |___ | |
 |_|  |_|_|_| \_/  \__,_|___/  \____|_____|___|

Milvus cli version: 0.4.0
Pymilvus version: 2.3.0

Learn more: https://github.com/zilliztech/milvus_cli.


milvus_cli &gt; 		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1285"></a>84.4.2. 查看帮助信息</h3></div></div></div>
		
		<pre class="screen">
		
milvus_cli &gt; help
Usage:  [OPTIONS] COMMAND [ARGS]...

  Milvus_CLI

Commands:
  clear    Clear screen.
  connect  Connect to Milvus.
  create   Create collection, database, partition,user and index.
  delete   Delete collection, database, partition,alias,user and index.
  exit     Exit the CLI.
  help     Show help messages.
  insert   Import data from csv file(local or remote) with headers and...
  list     List collections,databases, partitions,users and indexes.
  load     Load collection, partition
  query    Query with a set of criteria, and results in a list of records...
  release  Release collection, partition
  rename   Rename collection
  search   Conducts a vector similarity search with an optional boolean...
  show     Show connection, database,collection, loading_progress and...
  use      Use database
  version  Get Milvus_CLI version.

milvus_cli &gt; 		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="milvus-cli.connetct"></a>84.4.3. 链接数据库</h3></div></div></div>
		
		<pre class="screen">
		
milvus_cli &gt; connect
Connect Milvus successfully.
+---------+-----------------+
| Address | 127.0.0.1:19530 |
|  User   |                 |
|  Alias  |     default     |
+---------+-----------------+
milvus_cli &gt;		
		
		</pre>
		<p>链接指定服务器</p>
		<pre class="screen">
		
connect -h 172.16.0.1 -p 19530		
		
		</pre>
		<p></p>
		<pre class="screen">
		
		
		
		</pre>

	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="milvus-cli.list"></a>84.4.4. </h3></div></div></div>
		
		<pre class="screen">
		
milvus_cli &gt; list --help
Usage: milvus_cli list [OPTIONS] COMMAND [ARGS]...

  List collections,databases, partitions,users and indexes.

Options:
  --help  Show this message and exit.

Commands:
  aliases      List all aliases of a collection.
  collections  List all collections.
  connections  List connections
  databases    List databases.
  indexes      List all indexes.
  partitions   List partitions.
  users        List all users in Milvus Example:		
		
		</pre>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="milvus_cli.list.databases"></a>84.4.4.1. 查看数据库列表</h4></div></div></div>
			
			<pre class="screen">
			
milvus_cli &gt; list databases
+---------+
| db_name |
+---------+
| default |
|  test   |
+---------+			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id1286"></a>84.4.4.2. 查看链接实例</h4></div></div></div>
			
			<p></p>
			<pre class="screen">
			
milvus_cli &gt; list connections
+---------+---------------------------------------------------------------------+
|  Alias  |                              Instance                               |
+---------+---------------------------------------------------------------------+
| default | &lt;pymilvus.client.grpc_handler.GrpcHandler object at 0x7f77d5ddbc90&gt; |
+---------+---------------------------------------------------------------------+
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id1287"></a>84.4.4.3. 查看表</h4></div></div></div>
			
			<p></p>
			<pre class="screen">
			
milvus_cli &gt; list collections
['answer', 'album', 'huashan', 'question']			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id1288"></a>84.4.4.4. 查看索引</h4></div></div></div>
			
			<p></p>
			<pre class="screen">
			
milvus_cli &gt; list indexes -c album
question_vector idx {'index_type': 'IVF_FLAT', 'metric_type': 'L2', 'params': {'nlist': 2048}}
+----+-----------------+--------------+--------------+---------------+-----------------+
|    | Field Name      | Index Name   | Index Type   | Metric Type   | Params          |
+====+=================+==============+==============+===============+=================+
|  0 | question_vector | idx          | IVF_FLAT     | L2            | {'nlist': 2048} |
+----+-----------------+--------------+--------------+---------------+-----------------+			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id1289"></a>84.4.4.5. 查看分区</h4></div></div></div>
			
			<p></p>
			<pre class="screen">
			
milvus_cli &gt; list partitions -c album
['_default']
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id1290"></a>84.4.4.6. 查看用户</h4></div></div></div>
			
			<p></p>
			<pre class="screen">
			
milvus_cli &gt; list users
['root']			
			
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="milvus-cli.show"></a>84.4.5. 查看数据库</h3></div></div></div>
		
		<pre class="screen">
		
milvus_cli &gt; show --help
Usage: milvus_cli show [OPTIONS] COMMAND [ARGS]...

  Show connection, database,collection, loading_progress and index_progress.

Options:
  --help  Show this message and exit.

Commands:
  collection        Describe collection.
  index             Show index details.
  index_progress    Show index progress.
  loading_progress  Show loading progress.
  partition         Describe partition.
milvus_cli &gt;	
		
		</pre>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id1291"></a>84.4.5.1. 查看表</h4></div></div></div>
			
			<pre class="screen">
			
milvus_cli &gt; show collection -c question
+---------------+---------------------------------+
| Name          | question                        |
+---------------+---------------------------------+
| Description   | 问题集                          |
+---------------+---------------------------------+
| Is Empty      | False                           |
+---------------+---------------------------------+
| Entities      | 40171                           |
+---------------+---------------------------------+
| Primary Field | id                              |
+---------------+---------------------------------+
| Schema        | Description: 问题集             |
|               |                                 |
|               | Auto ID: False                  |
|               |                                 |
|               | Fields(* is the primary field): |
|               |  - *id INT64                    |
|               |  - question VARCHAR  问题       |
|               |  - answer_id INT64  答案ID      |
|               |  - vector FLOAT_VECTOR dim: 768 |
+---------------+---------------------------------+
| Partitions    | - _default                      |
+---------------+---------------------------------+
| Indexes       | - vector                        |
+---------------+---------------------------------+
milvus_cli &gt; 				
			
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="milvus-cli.use"></a>84.4.6. 数据库管理</h3></div></div></div>
		
		<pre class="screen">
		
milvus_cli &gt; use --help
Usage: milvus_cli use [OPTIONS] COMMAND [ARGS]...

  Use database

Options:
  --help  Show this message and exit.

Commands:
  database  Use database.
milvus_cli &gt; 		
		
		</pre>
		<p>查看数据库</p>
		<pre class="screen">
		
milvus_cli &gt; list databases
+---------+
| db_name |
+---------+
| default |
|  test   |
+---------+
milvus_cli &gt;		
		
		</pre>
		<p>切换到 test 数据库</p>
		<pre class="screen">
		
milvus_cli &gt; use database -db test
Using database test successfully!
milvus_cli &gt;		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="milvus-cli.create"></a>84.4.7. </h3></div></div></div>
		
		<pre class="screen">
		
milvus_cli &gt; create --help
Usage: milvus_cli create [OPTIONS] COMMAND [ARGS]...

  Create collection, database, partition,user and index.

Options:
  --help  Show this message and exit.

Commands:
  alias       Specify alias for a collection.
  collection  Create collection.
  database    Create database.
  index       Create index.
  partition   Create partition.
  user        Create user.
		
		</pre>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id1292"></a>84.4.7.1. 创建表</h4></div></div></div>
			
			<p></p>
			<pre class="screen">
			
milvus_cli &gt; list collections
[]
			
			</pre>
			<p></p>
			<pre class="screen">
			
milvus_cli &gt; create collection -c car -f id:INT64:primary_field -f vector:FLOAT_VECTOR:128 -f color:INT64:color -f brand:INT64:brand -p id -a -d 'car_collection'
+---------------+----------------------------------+
| Name          | car                              |
+---------------+----------------------------------+
| Description   |                                  |
+---------------+----------------------------------+
| Is Empty      | True                             |
+---------------+----------------------------------+
| Entities      | 0                                |
+---------------+----------------------------------+
| Primary Field | id                               |
+---------------+----------------------------------+
| Schema        | Description:                     |
|               |                                  |
|               | Auto ID: True                    |
|               |                                  |
|               | Fields(* is the primary field):  |
|               |  - *id INT64  primary_field      |
|               |  - vector FLOAT_VECTOR dim: 128  |
|               |  - color INT64  color            |
|               |  - brand INT64  brand            |
+---------------+----------------------------------+
| Partitions    | - _default                       |
+---------------+----------------------------------+
| Indexes       | -                                |
+---------------+----------------------------------+
Create collection successfully!
milvus_cli &gt; 
			
			</pre>
			<p></p>
			<pre class="screen">
			
milvus_cli &gt; list collections
['car']
			
			</pre>
			
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1295"></a>84.4.8. 查询</h3></div></div></div>
		
		<pre class="screen">
		
milvus_cli &gt; query --help
Usage: milvus_cli query [OPTIONS]

  Query with a set of criteria, and results in a list of records that match
  the query exactly.

  Example:

      milvus_cli &gt; query

      Collection name: car

      The query expression: color in [2000,2002]

      A list of fields to return(split by "," if multiple) []: id, color,
      brand

      timeout []:

      Guarantee timestamp. This instructs Milvus to see all operations
      performed before a provided timestamp. If no such timestamp is provided,
      then Milvus will search all operations performed to date. [0]:

      Graceful time. Only used in bounded consistency level. If graceful_time
      is set, PyMilvus will use current timestamp minus the graceful_time as
      the guarantee_timestamp. This option is 5s by default if not set. [5]:

Options:
  --help  Show this message and exit.
milvus_cli &gt; 
		
		</pre>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id1293"></a>84.4.8.1. 查询内容</h4></div></div></div>
			
			<p></p>
			<pre class="screen">
			
milvus_cli &gt; query 
Collection name (answer, question, album, huashan): question
The query expression: id == 1
Fields to return(split by "," if multiple) ['id', 'question', 'answer_id', 'vector'] []: id, question, answer_id
timeout []: 
Guarantee timestamp. This instructs Milvus to see all operations performed before a provided timestamp. If no such timestamp is provided, then Milvus will search all operations performed to date. [0]: 5
Graceful time. Only used in bounded consistency level. If graceful_time is set, PyMilvus will use current timestamp minus the graceful_time as the guarantee_timestamp. This option is 5s by default if not set. [5]: 
[{'id': 1, 'question': 'test', 'answer_id': 1}]			
			
			</pre>
			<p>查询结果如下</p>
			<pre class="screen">
			
[{'id': 1, 'question': 'test', 'answer_id': 1}]				
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id1294"></a>84.4.8.2. </h4></div></div></div>
			
			<p></p>
			<pre class="screen">
			
			
			
			</pre>
		</div>
	</div>
	
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1298"></a>84.4.9. 删除操作</h3></div></div></div>
		
		<pre class="screen">
		
		
		
		</pre>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id1296"></a>84.4.9.1. 删除表</h4></div></div></div>
			
			<p></p>
			<pre class="screen">
			
delete collection -c car
			
			</pre>
		</div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id1297"></a>84.4.9.2. </h4></div></div></div>
			
			<p></p>
			<pre class="screen">
			
			
			
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id1301"></a>84.4.10. </h3></div></div></div>
		
		<pre class="screen">
		
		
		
		</pre>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id1299"></a>84.4.10.1. </h4></div></div></div>
			
			<p></p>
			<pre class="screen">
			
			
			
			</pre>
		</div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id1300"></a>84.4.10.2. </h4></div></div></div>
			
			<p></p>
			<pre class="screen">
			
			
			
			</pre>
		</div>
	</div>

</div><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch84s03.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="index.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="ch84s05.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">84.3. 问答模型 </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 84.5. Python SDK</td></tr></table></div><script xmlns="">
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-11694057-1', 'auto');
			ga('send', 'pageview');

		</script><script xmlns="" async="async">
			var _hmt = _hmt || [];
			(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
			})();
</script><script xmlns="" async="async">
			(function(){
			var bp = document.createElement('script');
			var curProtocol = window.location.protocol.split(':')[0];
			if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
			}
			else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
			}
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(bp, s);
			})();
</script></body></html>